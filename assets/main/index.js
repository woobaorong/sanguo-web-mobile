System.register("chunks:///_virtual/AStar.ts",["cc"],(function(t){"use strict";var i,s,e;return{setters:[function(t){i=t.cclegacy,s=t._decorator,e=t.log}],execute:function(){var o;i._RF.push({},"922902ZotpPjoOeugz5YHtX","AStar",void 0);var n=s.ccclass,h=(s.property,t("AStar",n("AStar")(o=function(){function t(){this.nodes=[],this.openList=[],this.closeList=[]}t.getInstance=function(){return null!=this.aStar&&null!=this.aStar||(this.aStar=new t),this.aStar};var i=t.prototype;return i.initMap=function(){for(var t=0;t<50;t++){for(var i=[],s=0;s<50;s++){var e=new h;e.x=t,e.y=s,e.type=0,e.g=0,e.h=0,e.f=0,10==e.x&&10==e.y&&(e.type=1),i.push(e)}this.nodes.push(i)}this.printMap()},i.getPath=function(t,i){this.startPoint=this.nodes[t.x][t.y],this.endPoint=this.nodes[i.x][i.y],this.openList=[],this.closeList=[],this.openList.push(this.startPoint),this.startPoint.g=0,this.startPoint.h=0,this.startPoint.f=0;for(var s=(new Date).getTime(),o=0;;){if(o++,0==this.openList.length){e("没有路径");var n=(new Date).getTime();return void e("cost-time-----"+(n-s))}if(this.openList.sort(this.sortOpenList),this.closeList.push(this.openList[0]),this.thisPoint=this.openList[0],this.thisPoint==this.endPoint){e("寻路结束",this.thisPoint);var h=(new Date).getTime();return e("cost-time-----"+(h-s)),void this.printMap()}if(this.openList.splice(0,1),o>5e3){e("超出深度",this.thisPoint);var r=(new Date).getTime();return void e("cost-time-----"+(r-s))}this.checkDirNodeForASatr(this.thisPoint,1,0,10),this.checkDirNodeForASatr(this.thisPoint,0,1,10),this.checkDirNodeForASatr(this.thisPoint,-1,0,10),this.checkDirNodeForASatr(this.thisPoint,0,-1,10),this.checkDirNodeForASatr(this.thisPoint,1,1,14),this.checkDirNodeForASatr(this.thisPoint,1,-1,14),this.checkDirNodeForASatr(this.thisPoint,-1,1,14),this.checkDirNodeForASatr(this.thisPoint,-1,-1,14)}},i.printMap=function(){for(var t=this.thisPoint;t;)t.type=8,t=t.parent;for(var i=0;i<50;i++){for(var s="",o=0;o<50;o++)s+=this.nodes[i][o].type+" ";e(s)}},i.checkDirNodeForASatr=function(t,i,s,e){if(this.nodes[t.x+i]&&this.nodes[t.x+i][t.y+s]){var o=this.nodes[t.x+i][t.y+s];o&&0==o.type&&-1==this.openList.indexOf(o)&&-1==this.closeList.indexOf(o)&&(o.parent=t,o.h=this.getH(o,this.endPoint),o.g=o.parent.g+e,o.f=o.g+o.h,this.openList.push(o))}},i.getH=function(t,i){return Math.abs(t.x-i.x)+Math.abs(t.y-i.y)},i.sortOpenList=function(t,i){return t.f>i.f?1:t.f<i.f?-1:0},t}())||o),t("MyNode",(function(){this.type=0})));i._RF.pop()}}}));

System.register("chunks:///_virtual/AStarRoadSeeker.ts",["./rollupPluginModLoBabelHelpers.js","cc","./DataControler.ts","./MapRoadUtils.ts"],(function(t){"use strict";var e,i,s,n,r,o,h,a,u,c,d,_;return{setters:[function(t){e=t.createClass},function(t){i=t.cclegacy,s=t.find,n=t.loader,r=t.Prefab,o=t.instantiate,h=t.v3,a=t.Sprite,u=t.Color,c=t.log},function(t){d=t.DataControler},function(t){_=t.default}],execute:function(){i._RF.push({},"ab4b1bcMntCY7B3lf+sLKf/","AStarRoadSeeker",void 0);t("RoadNode",function(){function t(){this._value=0,this._f=0,this._g=0,this._h=0,this._parent=null}return e(t,[{key:"px",get:function(){return this._px},set:function(t){this._px=t}},{key:"py",get:function(){return this._py},set:function(t){this._py=t}},{key:"cx",get:function(){return this._cx},set:function(t){this._cx=t}},{key:"cy",get:function(){return this._cy},set:function(t){this._cy=t}},{key:"dx",get:function(){return this._dx},set:function(t){this._dx=t}},{key:"dy",get:function(){return this._dy},set:function(t){this._dy=t}},{key:"value",get:function(){return this._value},set:function(t){this._value=t}},{key:"f",get:function(){return this._f},set:function(t){this._f=t}},{key:"g",get:function(){return this._g},set:function(t){this._g=t}},{key:"h",get:function(){return this._h},set:function(t){this._h=t}},{key:"parent",get:function(){return this._parent},set:function(t){this._parent=t}}]),t}()),t("default",function(){function t(){this.COST_STRAIGHT=10,this.COST_DIAGONAL=14,this.maxStep=5e3,this._roadNodes={},this._round=[[0,-1],[1,-1],[1,0],[1,1],[0,1],[-1,1],[-1,0],[-1,-1]],this.kk=0,this.be=0,this.ee=0,this.isForTeam=!1,this.x1=0,this.y1=0}t.getInstance=function(){return null!=this.aStarRoadSeeker&&null!=this.aStarRoadSeeker||(t.aStarRoadSeeker=new t),this.aStarRoadSeeker};var e=t.prototype;return e.init=function(t){_.instance.updateMapInfo(100,100,100,100,1),this._roadNodes={};for(var e=0;e<100;e++)for(var i=0;i<100;i++){var s=_.instance.getNodeByDerect(e,i);s.value=0,s.value=t[e][i],this._roadNodes[s.cx+"_"+s.cy]=s}},e.go=function(t,e,i,c,d){var _=this._roadNodes[t+"_"+e],f=this._roadNodes[i+"_"+c],l=this.seekPath("test",_,f);s("Canvas/Path").removeAllChildren(),n.loadRes("prefabs/MapItem",r,(function(t,e){for(var i=0;i<l.length;i++){var n=o(e);n.parent=s("Canvas/Path"),n.position=h(10*l[i].dx+5,10*l[i].dy+5,0),n.getComponent(a).color=u.YELLOW}}))},e.changeBuildingValue=function(t,e,i){var s=d.getInstance().bds.get(i);if(s){var n=s.pos,r=s.type,o=s.index;if(2==n.length)t[n[0]][n[1]]=1e4*e+10*o+r+5,t[n[0]-1][n[1]]=1e4*e+10*o+r+5,t[n[0]+1][n[1]]=1e4*e+10*o+r+5,t[n[0]][n[1]-1]=1e4*e+10*o+r+5,t[n[0]][n[1]+1]=1e4*e+10*o+r+5,t[n[0]-1][n[1]-1]=3333333,t[n[0]+1][n[1]+1]=3333333,t[n[0]-1][n[1]+1]=3333333,t[n[0]+1][n[1]-1]=3333333;else{if(4!=n.length)return void c("地图数据错误");t[n[0]][n[1]]=1e4*e+10*o+r+5,t[n[2]][n[3]]=1e4*e+10*o+r+5}this.init(t)}},e.findPath=function(t,e,i,s,n,r,o,h,a){void 0===a&&(a=!1),this.kk=r,this.ee=h,this.be=o,this.isForTeam=a,this.x1=e,this.y1=i;var u=this._roadNodes[e+"_"+i],c=this._roadNodes[s+"_"+n];return this.seekPath(t,u,c)},e.isValueCanPass=function(t,e,i){if(1==t||4==t)return!1;if(t>10){var s=t%10-5,n=(t%1e4-t%10)/10,r=(t-t%1e4)/1e4;return this.isForTeam?2==s||3==s||(n==this.ee||n==this.be||!(1!=s||!this.isInCityArea(e,i))):!(0!=r&&r!=this.kk||2!=s&&3!=s)||(n==this.ee||n==this.be)}return!0},e.isInCityArea=function(t,e){return this.x1==t&&1==Math.abs(this.y1-e)||this.y1==e&&1==Math.abs(t-this.x1)||this.y1==e&&this.x1==t},e.ppp=function(t){c(t%10-5+"---------"+(t%1e4-t%10)/10+"-----------"+(t-t%1e4)/1e4)},e.seekPath=function(t,e,i){this._startNode=e,this._currentNode=e,this._targetNode=i;(new Date).getTime();if(!this._startNode||!this._targetNode)return c("起点或终点不存在:"+t),[];if(1==this._targetNode.value)return c("目标不可达到:"+t),[];if(this._startNode.dx==this._targetNode.dx&&this._startNode.dy==this._targetNode.dy)return c("起点和终点重复返回起点:"+t),[this._startNode];this._openlist=[],this._closelist=[];for(var s=0;;){if(s>this.maxStep)return c(t+"--步骤超出限制计算步骤为：",s),[];if(s++,this.searchRoundNodes(this._currentNode),0==this._openlist.length)return c(t+"--没找到任何路径计算步骤为：",s),[];if(this._openlist.sort(this.sortNode),this._currentNode=this._openlist.shift(),this._currentNode==this._targetNode){(new Date).getTime();return this.getPath()}this._closelist.push(this._currentNode)}},e.sortNode=function(t,e){return t.f<e.f?-1:t.f>e.f?1:0},e.getPath=function(){for(var t=[],e=this._targetNode;e!=this._startNode;)t.unshift(e),e=e.parent;return t.unshift(this._startNode),t},e.isPassNode=function(t){return!(!t||1==t.value||4==t.value||!this.isValueCanPass(t.value,t.dx,t.dy))},e.searchRoundNodes=function(t){for(var e=0;e<this._round.length;e++){var i=t.cx+this._round[e][0],s=t.cy+this._round[e][1],n=this._roadNodes[i+"_"+s];null==n||n==this._startNode||1==n.value||4==n.value||!this.isValueCanPass(n.value,n.dx,n.dy)||this.isInCloseList(n)||this.inInCorner(n)||this.setNodeF(n)}},e.setNodeF=function(t){var e;if(e=t.cx==this._currentNode.cx||t.cy==this._currentNode.cy?this._currentNode.g+this.COST_STRAIGHT:this._currentNode.g+this.COST_DIAGONAL,this.isInOpenList(t)){if(!(e<t.g))return;t.g=e}else t.g=e,this._openlist.push(t);t.parent=this._currentNode,t.h=(Math.abs(this._targetNode.cx-t.cx)+Math.abs(this._targetNode.cy-t.cy))*this.COST_STRAIGHT,t.f=t.g+t.h},e.isInOpenList=function(t){return-1!=this._openlist.indexOf(t)},e.isInCloseList=function(t){return-1!=this._closelist.indexOf(t)},e.inInCorner=function(t){if(t.cx==this._currentNode.cx||t.cy==this._currentNode.cy)return!1;var e=this._roadNodes[this._currentNode.cx+"_"+t.cy],i=this._roadNodes[t.cx+"_"+this._currentNode.cy];return!this.isPassNode(e)||!this.isPassNode(i)},e.dispose=function(){this._roadNodes=null,this._round=null},t}());i._RF.pop()}}}));

System.register("chunks:///_virtual/BaseComponent.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameHelper.ts"],(function(t){"use strict";var e,n,o,r,s,i,u;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,o=t._decorator,r=t.log,s=t.sys,i=t.Component},function(t){u=t.default}],execute:function(){var c;n._RF.push({},"11908eLZ7RPDpdNl8/eK8gU","BaseComponent",void 0);var l=o.ccclass;o.property,t("default",l(c=function(t){function n(){return t.apply(this,arguments)||this}e(n,t);var o=n.prototype;return o.invoke=function(t,e){this.scheduleOnce(t,e)},o.invokeForever=function(t,e){this.schedule(t,e)},o.cancelInvokeItem=function(t){this.unschedule(t)},o.cancelInvoke=function(){this.unscheduleAllCallbacks()},o.setString=function(t,e){this.setItem(t,e)},o.getString=function(t){return this.getItem(t)},o.setInt=function(t,e){this.setItem(t,e+"")},o.getInt=function(t,e){var n=this.getItem(t);return n&&this.isNormalInteger(n)?parseInt(n):e},o.isNormalInteger=function(t){var e=Math.floor(Number(t));return e!==1/0&&String(e)===t&&e>=0},o.log=function(t,e){e?r(t,e):r(t)},o.getDistance=function(t,e){return u.getDistance(t,e)},o.getWorldPos=function(t){return u.getWorldPos(t)},o.getNodePos=function(t,e){return u.getNodePos(t,e)},o.getItem=function(t){return s.localStorage.getItem(t)},o.setItem=function(t,e){s.localStorage.setItem(t,e)},o.getIFS=function(t){return t&&this.isNormalInteger(t)?parseInt(t):0},n}(i))||c);n._RF.pop()}}}));

System.register("chunks:///_virtual/BasePannelController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseComponent.ts","./GameHelper.ts"],(function(e){"use strict";var t,n,a,o,s,i,l,c,r,u,h,v;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,a=e._decorator,o=e.find,s=e.Label,i=e.log,l=e.v3,c=e.tween,r=e.Vec3,u=e.Node},function(e){h=e.default},function(e){v=e.default}],execute:function(){var d;n._RF.push({},"d6336MgDjNNb56a+v+82iO/","BasePannelController",void 0);var f=a.ccclass;a.property,e("BasePannelController",f("BasePannelController")(d=function(e){function n(){return e.apply(this,arguments)||this}t(n,e);var a=n.prototype;return a.toast=function(e){this.cancelInvokeItem(this.cancelToast),o("Canvas/Toast")?(o("Canvas/Toast").active=!0,o("Canvas/Toast/Label").getComponent(s).string=e,this.invoke(this.cancelToast,2)):i("toast组件不存在")},a.cancelToast=function(){o("Canvas/Toast")&&(o("Canvas/Toast").active=!1)},a.showFrame=function(e,t,n,a){var o=this;void 0===n&&(n=!0),void 0===a&&(a=!0),e.active=!0,n&&v.playMusic(this.node,"随机收获",!1,1),null!=t&&null!=t||(t=e.getChildByName("Pannel")),t&&(t.scale=l(0,0,0),c(t).to(.15,{scale:new r(1,1,1)},{easing:"smooth"}).start()),e.getChildByName("Bg")&&t&&(e.getChildByName("Bg").off(u.EventType.TOUCH_END),a&&e.getChildByName("Bg").on(u.EventType.TOUCH_END,(function(){o.hideFrame(e,t)}),this))},a.hideFrame=function(e,t){null!=t&&null!=t||(t=e.getChildByName("Pannel")),t&&c(t).to(.15,{scale:new r(0,0,0)},{easing:"smooth"}).start(),this.scheduleOnce((function(){e.active=!1}),.2)},n}(h))||d);n._RF.pop()}}}));

System.register("chunks:///_virtual/BetrayHelper.ts",["./rollupPluginModLoBabelHelpers.js","cc","./KingAI.ts","./DataControler.ts","./GameController.ts","./EntityHelper.ts","./GameHelper.ts","./AStarRoadSeeker.ts","./EventBus.ts","./DynamicHelper.ts"],(function(e){"use strict";var n,t,i,a,s,o,r,g,c,l,u,d,m,p,h,v,f,y;return{setters:[function(e){n=e.createForOfIteratorHelperLoose},function(e){t=e.cclegacy,i=e._decorator,a=e.log,s=e.find},function(e){o=e.KingAI},function(e){r=e.EntityType,g=e.InfomationType,c=e.JueType,l=e.Kingdom},function(e){u=e.GameController},function(e){d=e.EH},function(e){m=e.default},function(e){p=e.default},function(e){h=e.EventBus,v=e.EventType,f=e.EventMsg},function(e){y=e.DynamicHelper}],execute:function(){t._RF.push({},"26078ZojH9CNq4Vj/+FhSTF","BetrayHelper",void 0);i.ccclass,i.property;var I=e("BetrayHelper",function(){function e(){}return e.update=function(){if(this.gc=u.getInstance(),this.index++,this.index%100==0)for(var e,t=n(this.gc.entities.values());!(e=t()).done;){var i=e.value;if(i.peoples.length>0){var a=d.getKingdomIdByEntityName(i.name);if(!this.gc.kingdoms.get(a)||m.checKIsArrayContainsItem(a,i.peoples))continue;var s=this.getSuperHeroInEntity(i.name);if(s&&i.shiqi<10&&m.getRandom(0,999)>960)return i.type==r.city?void this.panli(s,i):void this.panfu(s,i);for(var o,g=n(i.peoples);!(o=g()).done;){var c=o.value,l=this.gc.peoples.get(c),p=this.gc.dc.pps.get(c);if(!this.gc.kingdoms.get(l.name)&&!this.checkIsPeopleCaptive(l.name))if(s&&s==c){if(this.checkBadRelationShip(c,i,0)&&l.loyal<60&&m.getRandom(0,99)>85)return i.type==r.city?void this.panli(c,i):void this.panfu(c,i)}else{if(!s&&p.home==i.name&&p.zs+p.wl+p.zs+p.ts>250&&l.loyal<70&&m.getRandom(0,99)>65)return void this.panli(c,i);if(this.checkBadRelationShip(c,i,-5)&&l.loyal<60&&m.getRandom(0,99)>80)return void this.pantao(c,i)}}}else if(d.checkIsEntityBeContainedByAnyKing(i.name)&&0==i.isBuilding()){if(m.getRandom(0,9999)>9998)return void this.kongli(i);if(i.shiqi<10&&m.getRandom(0,999)>998)return void this.kongli(i)}}},e.checkIsPeopleCaptive=function(e){for(var t,i=n(this.gc.kingdoms.values());!(t=i()).done;)for(var a,s=t.value,o=n(s.entities);!(a=o()).done;)for(var r,g=a.value,c=n(this.gc.entities.get(g).captives);!(r=c()).done;){if(e==r.value)return!0}return!1},e.getSuperHeroInEntity=function(e){var t=d.getEntityByName(e);if(1==t.peoples.length)return t.peoples[0];for(var i,a=null,s=0,o=0,r=n(t.peoples);!(i=r()).done;){var g=i.value,c=this.gc.dc.pps.get(g),l=c.nz+c.ts+c.wl+c.zs;l>s&&(o=s,a=c,s=l)}return a&&this.gc.kingdoms.get(top.name)?null:s-o>150?a.name:null},e.checkBadRelationShip=function(e,t,i){for(var a,s=n(t.peoples);!(a=s()).done;){var o=a.value;if(o!=e)if(d.getRelationship(e,o)<i)return!0}return!1},e.pantao=function(e,n){d.getKingdomIdByEntityName(e)==this.gc.playerId&&this.gc.cc.showInfomation("禀报主公:"+d.c2r(e)+"从"+d.c2r(n.name)+"叛逃",null,g.武将叛逃),a(d.c2r(e)+"从"+d.c2r(n.name)+"叛逃"),m.spliceItemFormArray(e,n.peoples)},e.panli=function(e,n){var t=this.gc.kingdoms.get(d.getKingdomIdByEntityName(n.name));m.spliceItemFormArray(n.name,t.entities);var i=new l,a=new o;a.init(e),i.entities.push(n.name),this.changeManToCaptive(e,n),i.kingId=e,i.money=100,i.credit=10;var s=this.getNewKindomIndex();i.index=s,this.gc.kingdoms.set(e,i),this.gc.kings.set(e,a),p.getInstance().changeBuildingValue(this.gc.arr,s,n.name),h.getInstance().board(v.change_onwer,(new f).setStr(n.name)),y.isAnyKindomMeiWang(),this.gc.cc.showInfomation("禀报主公:"+d.c2r(e)+"在"+d.c2r(n.name)+"拥兵自立",null,g.势力建立)},e.changeManToCaptive=function(e,n){for(var t=n.peoples.length-1;t>-1;t--){var i=n.peoples[t],a=this.gc.peoples.get(i),s=d.getRelationship(e,i);a.juewei=c.无,i!=e&&(s<2||a.loyal>85)?(n.captives.push(i),m.spliceItemFormArray(i,n.peoples)):a.loyal=90}},e.getNewKindomIndex=function(){for(var e,t=0,i=n(this.gc.kingdoms.values());!(e=i()).done;){var a=e.value;t<a.index&&(t=a.index)}return t+1},e.panfu=function(e,n){var t=this.getMyTatgetKing(e,n);if(t){var i=this.gc.kingdoms.get(d.getKingdomIdByEntityName(n.name));m.spliceItemFormArray(n.name,i.entities);var a=this.gc.kingdoms.get(t);a.entities.push(n.name),this.changeManToCaptive(e,n),p.getInstance().changeBuildingValue(this.gc.arr,a.index,n.name),h.getInstance().board(v.change_onwer,(new f).setStr(n.name)),y.isAnyKindomMeiWang(),this.gc.cc.showInfomation("禀报主公:"+d.c2r(n.name)+"归附了势力:"+d.c2r(a.kingId),null,g.势力建立)}},e.getMyTatgetKing=function(e,t){for(var i,a=new Map,o=n(this.gc.kingdoms.values());!(i=o()).done;){for(var r,g=i.value,c=1e4,l=n(g.entities);!(r=l()).done;){var u=r.value,p=m.getDistance(s(t.name).position,s(u).position);p<c&&(c=p)}a.set(g.kingId,c)}var h=Array.from(a);h.sort((function(e,n){return e[1]-n[1]}));for(var v=null,f=-1,y=0,I=h;y<I.length;y++){var k=I[y],R=k[0],w=k[1],B=d.getRelationship(R,e);B<0||(w>1e3||B>f&&(f=B,v=R))}var E=d.getKingdomIdByEntityName(t.name);return v&&E!=v?v:null},e.kongli=function(e){var n=this.gc.kingdoms.get(d.getKingdomIdByEntityName(e.name));m.spliceItemFormArray(e.name,n.entities),e.bubing=0,e.shuibing=0,e.gongbing=0,e.qibing=0,e.troops=0,e.food=0,e.bingyi=0,e.mingxing=0,e.shiqi=0,e.gbs=0,e.bbs=0,e.sbs=0,e.qbs=0,p.getInstance().changeBuildingValue(this.gc.arr,0,e.name),h.getInstance().board(v.change_onwer,(new f).setStr(e.name)),y.isAnyKindomMeiWang(),this.gc.cc.showInfomation("禀报主公:"+d.c2r(e.name)+"脱离了"+d.c2r(n.kingId)+"势力",null,g.势力建立)},e.updateDead=function(){if(this.gc||(this.gc=u.getInstance(),this.index=0),this.updateDeadIndex++,this.updateDeadIndex%10==0)for(var e,t=n(this.gc.peoples.values());!(e=t()).done;){var i=e.value;if((this.gc.dc.pps.get(i.name).age<this.gc.year-70||i.health<30)&&m.getRandom(0,99)>25){i.isDead=!0;var s=d.getEntityByPeopleName(i.name);return void(s&&(m.spliceItemFormArray(i.name,s.peoples),y.changeCaptain(s,i.name),y.changeKing(i.name),d.getKingdomIdByEntityName(s.name)==this.gc.playerId&&this.gc.cc.addInfomationsToStack(d.c2r(i.name)+"逝世了",null,g.武将死亡),a(d.c2r(i.name)+"逝世了")))}}},e.updateTouben=function(){var e=this;if(this.gc||(this.gc=u.getInstance(),this.index=0),this.updateToubenIndex++,this.updateToubenIndex%10==0)for(var t,i=function(){var n=t.value;if(0==d.checkIsPeopleZaiye(n.name))return"continue";if(e.gc.dc.pps.get(n.name).age>e.gc.year-16)return"continue";var i=d.getMyLovelyKing(n.name);if(i){var s=d.getEntityByPeopleName(i);return s.name!=n.now?"continue":(a("-----------投奔事件:"+n.name+"->"+i+" 位于"+s.name),i==e.gc.playerId?(e.gc.cc.confirm(d.c2r(n.name)+"来投奔,是否接受?",(function(){n.loyal=80,n.juewei=c.无,s.peoples.push(n.name)}),(function(){d.setRelationship(i,n.name,-5)}),n.name),{v:void 0}):(e.gc.kings.get(i).isAcceptPeople()?(n.loyal=80,n.juewei=c.无,s.peoples.push(n.name)):d.setRelationship(i,n.name,-5),{v:void 0}))}},s=n(this.gc.peoples.values());!(t=s()).done;){var o=i();if("continue"!==o&&"object"==typeof o)return o.v}},e.updateDisaster=function(){var e=this;if(this.gc||(this.gc=u.getInstance(),this.index=0),this.updateDisasterIndex++,this.updateDisasterIndex%500==0)for(var t,i=function(){var n=t.value;if(n.type==r.city&&m.getRandom(0,999)>995){var i="旱灾",a=m.getRandom(0,15);a>3&&a<=7?i="瘟疫":a>7&&a<=11?i="蝗灾":a>11&&a<=15&&(i="匪患");var s=d.getKingdomIdByEntityName(n.name);if(s&&e.gc.kingdoms.get(s))if(e.gc.kings.get(s)&&e.gc.kings.get(s).isAcceptDisaster()){var o=e.getEmptyPeople(n.name);if(o&&e.gc.peoples.get(o)){var g=e.gc.dc.pps.get(o);e.showDisasterResult(i,n,g,e.gc.kingdoms.get(s))}else e.showDisasterResult(i,n,null,e.gc.kingdoms.get(s))}else if(e.gc.kingdoms.get(s).kingId==e.gc.playerId){var c=e.getEmptyPeople(n.name);c==e.gc.playerId&&(c=null),e.gc.cc.confirm("禀告主公,"+d.c2r(n.name)+"发生"+d.c2r(i)+",是否前往赈灾?",(function(){var t=d.getKingdomIdByEntityName(n.name);if(t&&e.gc.kingdoms.get(t)){var a=e.gc.kingdoms.get(t),s=e.getEmptyPeople(n.name);if(s&&e.gc.peoples.get(s)){var o=e.gc.dc.pps.get(s);return void e.showDisasterResult(i,n,o,a)}}e.showDisasterResult(i,n,null,null)}),(function(){var t=d.getKingdomIdByEntityName(n.name);if(t&&e.gc.kingdoms.get(t)){var a=e.gc.kingdoms.get(t);e.showDisasterResult(i,n,null,a)}else e.showDisasterResult(i,n,null,null)}),c)}else e.showDisasterResult(i,n,null,e.gc.kingdoms.get(s));else e.showDisasterResult(i,n,null,null);return{v:void 0}}},a=n(this.gc.entities.values());!(t=a()).done;){var s=i();if("object"==typeof s)return s.v}},e.showDisasterResult=function(e,n,t,i){var a=m.getRandom(80,99);a>n.bingyi&&(a=n.bingyi);var s=m.getRandom(80,99);s>n.shouyi&&(s=n.shouyi);var o=m.getRandom(80,99);o>n.mingxing&&(o=n.mingxing);var r=0;if(i&&t){var c=t.nz+t.zs;i.money>100&&n.food>100?(i.money-=100,n.food-=100,r=c>100&&m.getRandom(0,9)>2?.1:c>60&&m.getRandom(0,9)>2?.3:.5):r=.5}else r=.5;a=Math.round(a*r),s=Math.round(s*r),o=Math.round(o*r),n.bingyi-=a,n.mingxing-=o,n.shouyi-=s;var l="轻微";.5==r?l="重大":.3==r&&(l="中度");var u=d.c2r(n.name)+"遭受"+d.c2r(e)+"造成"+d.c2r(l)+"损失";if(this.gc.cc.addLog(u),i&&i.kingId==this.gc.playerId){var p=r<.2?g.执行成功:g.执行失败;this.gc.cc.showInfomation(u,null,p)}},e.getEmptyPeople=function(e){var t=this.gc.entities.get(e),i=t.peoples;if(i.length>0)for(var a,s=t.tasks,o=n(i);!(a=o()).done;){var r=a.value;if(null==s.get(r)||null==s.get(r))return r}return null},e}());I.index=0,I.updateDeadIndex=0,I.updateToubenIndex=0,I.updateDisasterIndex=0,t._RF.pop()}}}));

System.register("chunks:///_virtual/BgSoundController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GroupController.ts","./GameController.ts","./GameHelper.ts","./DataControler.ts"],(function(t){"use strict";var o,e,n,r,a,i,u,s,l,c,p,d,m;return{setters:[function(t){o=t.inheritsLoose,e=t.createForOfIteratorHelperLoose},function(t){n=t.cclegacy,r=t._decorator,a=t.AudioSource,i=t.log,u=t.find,s=t.v3,l=t.Component},function(t){c=t.GroupController},function(t){p=t.GameController},function(t){d=t.default},function(t){m=t.GameStatus}],execute:function(){var g;n._RF.push({},"5cd53D0wb5NPodxqZn6XS5v","BgSoundController",void 0);var h=r.ccclass;r.property,t("BgSoundController",h("BgSoundController")(g=function(t){function n(){for(var o,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(o=t.call.apply(t,[this].concat(n))||this).map=new Map,o.index=0,o}o(n,t);var r=n.prototype;return r.addBgSound=function(t,o){var e=null;this.map.get(t)?e=this.map.get(t):(e=this.node.addComponent(a),this.map.set(t,e)),e.clip=d.audios.get(o),e.loop=!0,e.volume=0,e.play()},r.removeBgSound=function(t){if(this.map.has(t)){var o=this.map.get(t);this.map.delete(t),o.stop(),o.destroy()}},r.changeSound=function(t,o){var e=this.map.get(t);e?(e.stop(),e.clip=d.audios.get(o),e.play()):i("------------BUG--该队伍没有初始化声音组件-------------")},r.update=function(){if(this.index++,this.index%10==0)for(var t,o=e(this.map);!(t=o()).done;){var n=t.value,r=n[0],a=n[1];0==d.isPlayMusic?a&&(a.volume=0):r&&a?p.getInstance().gameStatus==m.go&&r.getComponent(c)&&r.getComponent(c).isMoving?a.volume=this.getEntitySoundVolume(r):a.volume=0:a&&(a.volume=0)}},r.getEntitySoundVolume=function(t){this.camera||(this.camera=u("Camera"));var o=this.camera.position,e=s(o.x,o.y-8,o.z-6),n=t.position,r=d.getDistance(e,n);return r>10?0:.5*(1-r/10)},n}(l))||g);n._RF.pop()}}}));

System.register("chunks:///_virtual/BuildingController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UiHelper.ts","./GameValueHelper.ts","./DataControler.ts","./EventBus.ts","./BaseComponent.ts","./GameController.ts","./EntityHelper.ts","./DynamicHelper.ts","./GameHelper.ts","./RenderHelper.ts","./PatrolEventController.ts"],(function(t){"use strict";var e,i,n,s,o,r,a,y,g,h,c,u,l,p,d,m,b,I,f,v,E,_,k,T;return{setters:[function(t){e=t.inheritsLoose,i=t.createForOfIteratorHelperLoose},function(t){n=t.cclegacy,s=t._decorator,o=t.Collider},function(t){r=t.UiHelper},function(t){a=t.GameValueHelper},function(t){y=t.TaskType,g=t.ArmyType,h=t.InfomationType,c=t.OrderType,u=t.OD,l=t.ActType,p=t.GameStatus,d=t.EntityType},function(t){m=t.EventBus,b=t.EventType},function(t){I=t.default},function(t){f=t.GameController},function(t){v=t.EH},function(t){E=t.DynamicHelper},function(t){_=t.default},function(t){k=t.RenderHelper},function(t){T=t.PatrolEventController}],execute:function(){var S;n._RF.push({},"20ddeyDcqNOkpg8hXA3kNW3","BuildingController",void 0);var B=s.ccclass;s.property,t("BuildingController",B("BuildingController")(S=function(t){function n(){for(var e,i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))||this).updateIndex=0,e.colliderEntities=new Map,e.stayIndex=0,e}e(n,t);var s=n.prototype;return s.onStart=function(t,e){},s.onStop=function(t,e){a.huifu(this.entity);for(var n,s=i(this.entity.tasks);!(n=s()).done;){var o=n.value;if(0!=_.checKIsArrayContainsItem(o[0],this.entity.peoples)){var c=o[1];if(c.type==y.buy)this.entity.food+=r.getNumberByTask(c);else if(c.type==y.sell){var u=v.getKingdomIdByEntityName(this.entity.name);this.gc.kingdoms.get(u).money+=r.getNumberByTask(c)}else if(c.type==y.train)c.armyType==g.gb?this.entity.gongbing+=c.num:c.armyType==g.sb?this.entity.shuibing+=c.num:c.armyType==g.qb&&(this.entity.qibing+=c.num);else if(c.type==y.zhengbing){var l=r.getNumberByTask(c);l<this.entity.bingyi?(this.entity.bubing+=l,this.entity.bingyi-=l):(this.entity.bubing+=this.entity.bingyi,this.entity.bingyi=0)}else if(c.type==y.patrol)this.entity.mingxing+=r.getNumberByTask(c),this.entity.mingxing>100&&(this.entity.mingxing=100);else if(c.type==y.repair)this.entity.health+=r.getNumberByTask(c),this.entity.health>100&&(this.entity.health=100);else if(c.type==y.caolian)this.entity.shiqi+=r.getNumberByTask(c),this.entity.shiqi>100&&(this.entity.shiqi=100);else if(c.type==y.kaikeng)this.entity.shouyi+=r.getNumberByTask(c),this.entity.shouyi>100&&(this.entity.shouyi=100);else if(c.type==y.quanxiang){r.getNumberByTask(c)>5?(this.entity.peoples.push(c.traget),_.spliceItemFormArray(c.traget,this.entity.captives),v.getKingdomIdByEntityName(this.entity.name)==this.gc.playerId&&this.gc.cc.addInfomationsToStack(v.c2r(c.traget)+"被成功劝降",null,h.执行成功)):v.getKingdomIdByEntityName(this.entity.name)==this.gc.playerId&&this.gc.cc.addInfomationsToStack("对"+v.c2r(c.traget)+"劝降失败",null,h.执行失败)}else this.log("收到未实现的任务")}}this.entity.tasks=new Map},s.onPause=function(t,e){},s.onRecovery=function(t,e){},s.onOrder=function(t,e){var i=t.object;if(i.id==this.entity.name)if(i.orderType==c.attack||i.orderType==c.stay||i.orderType==c.join)E.addArmyOnGame(this.entity,i);else{var n=v.getKingdomIdByEntityName(this.entity.name);i.orderType==c.yidong?i.troops=0:i.orderType==c.xirao?(this.gc.kingdoms.get(n).money-=u.xirao_money_cost,i.troops=u.xirao_mini_bubing):i.orderType==c.lijian?(this.gc.kingdoms.get(n).money-=u.lijian_money_cost,i.troops=u.lijian_mini_bubing):i.orderType==c.liuyan?(this.gc.kingdoms.get(n).money-=u.liuyan_money_cost,i.troops=u.liuyan_mini_bubing):i.orderType==c.maifu?(this.gc.kingdoms.get(n).money-=u.maifu_money_cost,i.troops=u.maifu_mini_bubing):i.orderType==c.find?(this.gc.kingdoms.get(n).money-=u.tansuo_money_cost,i.troops=u.tansuo_mini_bubing):i.orderType==c.yihe?(this.gc.kingdoms.get(n).money-=i.food,i.troops=u.yihe_mini_bubing):this.log("--尚未实现的命令--"),E.addTeamOnGame(this.entity,i)}},s.onTask=function(t,e){var i=t.object;if(i.homeId==this.entity.name){this.entity.tasks.set(i.people,i);var n=v.getKingdomIdByEntityName(i.homeId);i.type==y.buy?this.gc.kingdoms.get(n).money-=i.num:i.type==y.sell?this.entity.food-=i.num:i.type==y.train?(this.entity.bubing-=i.num,this.gc.kingdoms.get(n).money-=(Math.floor(i.num/100)+1)*u.xunlian_100_money_cost):i.type==y.zhengbing?this.gc.kingdoms.get(n).money-=u.zhengbing_money_cost:i.type==y.patrol?this.gc.kingdoms.get(n).money-=u.xunshi_money_cost:i.type==y.repair?this.gc.kingdoms.get(n).money-=u.xiushan_money_cost:i.type==y.kaikeng?this.gc.kingdoms.get(n).money-=u.kaikeng_money_cost:i.type==y.caolian?this.gc.kingdoms.get(n).money-=u.caolian_money_cost:(i.type,y.quanxiang)}},s.onAct=function(t,e){var i=t.object;if(i.homeId==this.entity.name){var n=v.getKingdomIdByEntityName(i.homeId);if(i.type==l.chu_jue)_.spliceItemFormArray(i.people,this.entity.captives),this.gc.peoples.get(i.people).setIsDead(!0);else if(i.type==l.jiang_shang)this.gc.peoples.get(i.people).loyal+=5,this.gc.peoples.get(i.people).loyal>100&&(this.gc.peoples.get(i.people).loyal=100),this.gc.kingdoms.get(n).money-=u.jiangli_money_cost;else if(i.type==l.jue_wei){var s=this.gc.peoples.get(i.people).juewei;s<5?(this.gc.peoples.get(i.people).setJuewei(s+1),this.gc.kingdoms.get(n).money-=u.juewei_money_cost):this.log("该武将已经位极人臣,无法进爵")}else i.type==l.liu_fang&&(_.spliceItemFormArray(i.people,this.entity.peoples),this.gc.peoples.get(i.people).now=this.entity.name)}},s.onChange=function(t,e){},s.onMieWang=function(t,e){v.getKingdomIdByEntityName(this.entity.name)!=t.str&&""!=v.getKingdomIdByEntityName(this.entity.name)||(this.entity.peoples=[],this.entity.captives=[],this.entity.bubing=0,this.entity.shuibing=0,this.entity.qibing=0,this.entity.gongbing=0,this.entity.food=0,this.entity.bbs=0,this.entity.qbs=0,this.entity.sbs=0,this.entity.gbs=0)},s.start=function(){this.gc=f.getInstance(),this.onStartEventId=m.getInstance().sub(this.onStart,b.go,this),this.onStopEventId=m.getInstance().sub(this.onStop,b.stop,this),this.onPauseEventId=m.getInstance().sub(this.onPause,b.pause,this),this.onRecoveryEventId=m.getInstance().sub(this.onRecovery,b.recovery,this),this.onTaskEventId=m.getInstance().sub(this.onTask,b.post_task,this),this.onOrderEventId=m.getInstance().sub(this.onOrder,b.post_order,this),this.onActEventId=m.getInstance().sub(this.onAct,b.post_act,this),this.onChangeEventId=m.getInstance().sub(this.onChange,b.change_onwer,this),this.onMieWangEventId=m.getInstance().sub(this.onMieWang,b.mie_wang,this);var t=this.getComponent(o);t.on("onTriggerStay",this.onTriggerStay,this),t.on("onTriggerExit",this.onTriggerExit,this),t.on("onTriggerEnter",this.onTriggerEnter,this),this.render()},s.update=function(){this.updateIndex++,this.updateIndex%100==0&&this.gc.gameStatus==p.go&&(a.cutFoodAndShiqi(this.entity),this.render(),T.getIns().update(this.entity,this.gc))},s.render=function(){this.entity.type==d.city?k.renderCity(this):this.entity.type==d.port?k.renderPort(this):this.entity.type==d.gate&&k.renderGate(this)},s.onDestroy=function(){m.getInstance().unSub(this.onStartEventId),m.getInstance().unSub(this.onStopEventId),m.getInstance().unSub(this.onPauseEventId),m.getInstance().unSub(this.onRecoveryEventId),m.getInstance().unSub(this.onTaskEventId),m.getInstance().unSub(this.onOrderEventId),m.getInstance().unSub(this.onActEventId),m.getInstance().unSub(this.onChangeEventId),m.getInstance().unSub(this.onMieWangEventId)},s.onTriggerEnter=function(t){if(t.otherCollider){var e=t.otherCollider.node.name;if(v.checkIsTwoEntityFrineds(this.entity,v.getEntityByName(e)))return;!this.colliderEntities.has(e)&&this.gc.entities.has(e)&&v.getKingdomIdByEntityName(e)!=v.getKingdomIdByEntityName(this.entity.name)&&(this.entity.isInWar=!0,this.colliderEntities.set(e,this.gc.entities.get(e)))}},s.onTriggerStay=function(t){this.stayIndex++,this.stayIndex%100==0&&this.gc.gameStatus==p.go&&t.otherCollider&&(a.getHurt(this.entity,this.colliderEntities),this.entity.type==d.city&&a.cutShouyi(this.entity,this.colliderEntities))},s.onTriggerExit=function(t){if(t.otherCollider){var e=t.otherCollider.node.name;this.colliderEntities.has(e)&&(this.colliderEntities.delete(e),0==this.colliderEntities.size&&(this.entity.isInWar=!1))}},n}(I))||S);n._RF.pop()}}}));

System.register("chunks:///_virtual/BuyAndSellPannelController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./DataControler.ts","./EntityHelper.ts","./GameController.ts","./BasePannelController.ts"],(function(t){"use strict";var n,e,i,s,o,l,a,h,u,r,c;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy,i=t._decorator,s=t.Node,o=t.find,l=t.Label,a=t.log},function(t){h=t.TaskType},function(t){u=t.EH},function(t){r=t.GameController},function(t){c=t.BasePannelController}],execute:function(){var d;e._RF.push({},"c58005x9MhMOKjSx/GDWT6b","BuyAndSellPannelController",void 0);var g=i.ccclass;i.property,t("BuyAndSellPannelController",g("BuyAndSellPannelController")(d=function(t){function e(){for(var n,e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];return(n=t.call.apply(t,[this].concat(i))||this).count=0,n.task=null,n.order=null,n.isBuy=!1,n.isForOrder=!1,n.maxFoodCount=0,n.maxMoneyCount=0,n.maxCount=0,n}n(e,t);var i=e.prototype;return i.start=function(){var t=this;this.pannel=this.node.getChildByName("BuyAndSellPannel"),this.gc=r.getInstance(),this.pannel.getChildByName("Pannel").getChildByName("Cancel").on(s.EventType.TOUCH_END,(function(){t.hideFrame(t.pannel,t.pannel.getChildByName("Pannel"))}),this)},i.renderLabel=function(){this.isBuy?(o("Canvas/BuyAndSellPannel/Pannel/Foods/Add/Label").getComponent(l).string="+10",o("Canvas/BuyAndSellPannel/Pannel/Foods/Cut/Label").getComponent(l).string="-10",o("Canvas/BuyAndSellPannel/Pannel/Foods/Add2/Label").getComponent(l).string="+100",o("Canvas/BuyAndSellPannel/Pannel/Foods/Cut2/Label").getComponent(l).string="-100"):(o("Canvas/BuyAndSellPannel/Pannel/Foods/Add/Label").getComponent(l).string="+100",o("Canvas/BuyAndSellPannel/Pannel/Foods/Cut/Label").getComponent(l).string="-100",o("Canvas/BuyAndSellPannel/Pannel/Foods/Add2/Label").getComponent(l).string="+1000",o("Canvas/BuyAndSellPannel/Pannel/Foods/Cut2/Label").getComponent(l).string="-1000")},i.showSetMoneyForOrderPannel=function(t){this.order=t,this.isForOrder=!0,this.isBuy=!0,this.renderLabel(),this.count=0,this.maxMoneyCount=this.gc.kingdoms.get(u.getKingdomIdByEntityName(t.homeId)).money,this.showFrame(this.pannel,this.pannel.getChildByName("Pannel")),this.label=this.pannel.getChildByName("Pannel").getChildByName("Foods").getChildByName("Label").getComponent(l),this.label.string="金钱："+this.count},i.showBuyAndSellPannel=function(t){if(this.task=t,this.isForOrder=!1,this.task.type==h.buy)this.isBuy=!0;else{if(this.task.type!=h.sell)return void this.toast("任务参数错误");this.isBuy=!1}this.renderLabel(),this.count=0,this.maxMoneyCount=this.gc.kingdoms.get(u.getKingdomIdByEntityName(t.homeId)).money;var n=this.gc.entities.get(t.homeId);this.maxFoodCount=n.food,this.showFrame(this.pannel,this.pannel.getChildByName("Pannel"),!0,!1),this.label=this.pannel.getChildByName("Pannel").getChildByName("Foods").getChildByName("Label").getComponent(l),this.isBuy?this.label.string="金钱："+this.count:this.label.string="粮草："+this.count},i.ok=function(){if(this.isForOrder)this.order.food=this.count,this.hideFrame(this.pannel,this.pannel.getChildByName("Pannel")),this.gc.cc.postOrder(this.order);else{if(this.isBuy){if(a("买粮食要花的钱---"+this.count),this.getLimitCount()<=this.count)return void this.toast("该买进数值超出设施的最大商业能力")}else if(a("卖粮食的数量---"+this.count),this.getLimitCount()<=this.count)return void this.toast("该卖出数值超出设施的最大商业能力");this.task.num=this.count,this.hideFrame(this.pannel,this.pannel.getChildByName("Pannel")),this.gc.cc.postTask(this.task)}},i.getLimitCount=function(){var t;return t=this.gc.dc.bds.get(this.task.homeId).size,this.isBuy?3==t?400:2==t?200:100:3==t?4e3:2==t?2e3:1e3},i.add=function(){this.isBuy?(this.count<this.maxMoneyCount-10?this.count+=10:this.count=this.maxMoneyCount,this.label.string="金钱："+this.count):(this.count<this.maxFoodCount-100?this.count+=100:this.count=this.maxFoodCount,this.label.string="粮草："+this.count)},i.cut=function(){this.isBuy?(this.count>10?this.count-=10:this.count=0,this.label.string="金钱："+this.count):(this.count>100?this.count-=100:this.count=0,this.label.string="粮草："+this.count)},i.add2=function(){this.isBuy?(this.count<this.maxMoneyCount-100?this.count+=100:this.count=this.maxMoneyCount,this.label.string="金钱："+this.count):(this.count<this.maxFoodCount-1e3?this.count+=1e3:this.count=this.maxFoodCount,this.label.string="粮草："+this.count)},i.cut2=function(){this.isBuy?(this.count>100?this.count-=100:this.count=0,this.label.string="金钱："+this.count):(this.count>1e3?this.count-=1e3:this.count=0,this.label.string="粮草："+this.count)},e}(c))||d);e._RF.pop()}}}));

System.register("chunks:///_virtual/CameraController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventBus.ts","./GameHelper.ts","./BuildingController.ts","./GroupController.ts"],(function(t){"use strict";var o,n,i,s,e,r,a,h,l,c,d,u,p,y,f,m,v,g,x,P;return{setters:[function(t){o=t.inheritsLoose},function(t){n=t.cclegacy,i=t._decorator,s=t.systemEvent,e=t.SystemEventType,r=t.Camera,a=t.v2,h=t.PhysicsSystem,l=t.v3,c=t.log,d=t.find,u=t.tween,p=t.geometry,y=t.Component},function(t){f=t.EventBus,m=t.EventType,v=t.EventMsg},function(t){g=t.default},function(t){x=t.BuildingController},function(t){P=t.GroupController}],execute:function(){var C;n._RF.push({},"afe19ngImpPT61GmFSB4MTr","CameraController",void 0);var T=i.ccclass;i.property,t("CameraController",T("CameraController")(C=function(t){function n(){for(var o,n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(o=t.call.apply(t,[this].concat(i))||this).ray=new p.Ray,o.left=-44,o.right=44,o.up=-33,o.down=54,o.isShowInfomation=!1,o}o(n,t);var i=n.prototype;return i.start=function(){s.on(e.TOUCH_MOVE,this.onTouchMove,this),s.on(e.TOUCH_START,this.onTouchStart,this),s.on(e.TOUCH_END,this.onTouchEnd,this),this.camera=this.node.getComponent(r)},i.onTouchStart=function(t,o){var n=a(t._point.x,t._point.y);this.startPos=n},i.onTouchMove=function(t,o){if(!this.isShowInfomation&&(this.camera.screenPointToRay(t._point.x,t._point.y,this.ray),h.instance.raycast(this.ray))){var n=h.instance.raycastResults;if(n[0])if("Land"==n[0].collider.node.name){var i=a(t._point.x,t._point.y);this.lastPos||(this.lastPos=i);var s=a(i.x-this.lastPos.x,i.y-this.lastPos.y);0!=s.x&&(s.x=s.x/100),0!=s.y&&(s.y=s.y/100);var e=this.camera.node.position;e.add(l(-s.x,0,s.y)),e.x<this.left&&(e.x=this.left),e.x>this.right&&(e.x=this.right),e.z<this.up&&(e.z=this.up),e.z>this.down&&(e.z=this.down),this.camera.node.position=e,this.lastPos=i}}},i.onTouchEnd=function(t,o){this.lastPos=null;var n=a(t._point.x,t._point.y);if(this.endPos=n,this.startPos&&this.endPos&&(!(this.startPos.x-this.endPos.x>1||this.startPos.x-this.endPos.x<-1)||!(this.startPos.y-this.endPos.y>1||this.startPos.y-this.endPos.y<-1))&&(this.camera.screenPointToRay(t._point.x,t._point.y,this.ray),h.instance.raycast(this.ray))){var i=h.instance.raycastResults;if(i[0]){var s=i[i.length-1];"Land"!=s.collider.node.name?(s.collider.node.getComponent(P)?c("click-group:"+s.collider.node.name,s.collider.node.getComponent(P).entity):s.collider.node.getComponent(x)&&c("click-building:"+s.collider.node.name,s.collider.node.getComponent(x).entity),f.getInstance().board(m.click_entity,v.GetIns().setStr(s.collider.node.name))):f.getInstance().board(m.click_land,v.GetIns().setStr(s.collider.node.name).setObject(i[0].hitPoint))}}},i.moveToEntity=function(t){var o=d(t);if(o&&0!=o.isValid){var n=l(o.position.x,this.node.position.y,o.position.z+8);n.x<this.left&&(n.x=this.left),n.x>this.right&&(n.x=this.right),n.z<this.up&&(n.z=this.up),n.z>this.down&&(n.z=this.down),u(this.node).to(this.getMoveTime(n),{position:n}).call((function(){c("----移动相机到实体的上方----")})).start()}},i.moveToPos=function(t,o){var n=l(t,this.node.position.y,o+8);n.x<this.left&&(n.x=this.left),n.x>this.right&&(n.x=this.right),n.z<this.up&&(n.z=this.up),n.z>this.down&&(n.z=this.down),u(this.node).to(this.getMoveTime(n),{position:n}).call((function(){c("----移动相机到指定位置----")})).start()},i.getMoveTime=function(t){var o=g.getDistance(t,this.node.position);return(o/=50)>.6?.6:o<.1?.1:o},n}(y))||C);n._RF.pop()}}}));

System.register("chunks:///_virtual/CameraScript.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameHelper.ts"],(function(e){"use strict";var i,t,r,o,n,s,a,h,l,d,u,c,g;return{setters:[function(e){i=e.applyDecoratedDescriptor,t=e.inheritsLoose,r=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){n=e.cclegacy,s=e._decorator,a=e.Node,h=e.view,l=e.Camera,d=e.Vec3,u=e.v3,c=e.Component},function(e){g=e.default}],execute:function(){var S,p,w,y,f,m,z,O,b;n._RF.push({},"7530cAEpsxLbp5acNQOuN3g","CameraScript",void 0);var v=s.ccclass,x=s.property;e("default",(S=x(a),p=x(a),v((f=i((y=function(e){function i(){for(var i,t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];return i=e.call.apply(e,[this].concat(n))||this,r(i,"player",f,o(i)),r(i,"OutOfSightZones",m,o(i)),r(i,"edgeSizeX",z,o(i)),r(i,"edgeSizeY",O,o(i)),r(i,"moveSpeed",b,o(i)),i}t(i,e);var n=i.prototype;return n.start=function(){this.windowSize=h.getVisibleSize(),this.camera=this.node.getComponent(l),this.node.setPosition(g.getWorldPos(this.player))},n.lateUpdate=function(e){if(null!=this.player){var i=g.getWorldPos(this.player);this.windowSize=h.getVisibleSize();var t=this.camera.worldToScreen(new d(i.x,i.y)),r=this.node.position;0==this.isCameraOutOfSightX()&&(t.x>this.windowSize.width*(1-this.edgeSizeX)?r=u(r.x+this.moveSpeed*e*60,r.y,0):t.x<this.windowSize.width*this.edgeSizeX&&(r=u(r.x-this.moveSpeed*e*60,r.y,0))),0==this.isCameraOutOfSightY()&&(t.y>this.windowSize.height*(1-this.edgeSizeY)?r=u(r.x,r.y+this.moveSpeed*e*60,0):t.y<this.windowSize.height*this.edgeSizeY&&(r=u(r.x,r.y-this.moveSpeed*e*60,0))),this.node.setPosition(r)}},n.isCameraOutOfSightX=function(){if(null==this.player)return!1;var e=g.getWorldPos(this.player),i=g.getWorldPos(this.OutOfSightZones.getChildByName("L")),t=g.getWorldPos(this.OutOfSightZones.getChildByName("R")),r=new d(e.x,e.y),o=this.camera.worldToScreen(i),n=this.camera.worldToScreen(t),s=this.camera.worldToScreen(r);return s.x-o.x<this.windowSize.width*this.edgeSizeX||n.x-s.x<this.windowSize.width*this.edgeSizeX},n.isCameraOutOfSightY=function(){if(null==this.player)return!1;var e=g.getWorldPos(this.player),i=g.getWorldPos(this.OutOfSightZones.getChildByName("T")),t=g.getWorldPos(this.OutOfSightZones.getChildByName("B")),r=new d(e.x,e.y),o=this.camera.worldToScreen(i),n=this.camera.worldToScreen(t),s=this.camera.worldToScreen(r);return s.y-n.y<this.windowSize.height*this.edgeSizeY||o.y-s.y<this.windowSize.height*this.edgeSizeY},n.showPraticleBySeasonAndZone=function(){},i}(c)).prototype,"player",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=i(y.prototype,"OutOfSightZones",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=i(y.prototype,"edgeSizeX",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.25}}),O=i(y.prototype,"edgeSizeY",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.15}}),b=i(y.prototype,"moveSpeed",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),w=y))||w));n._RF.pop()}}}));

System.register("chunks:///_virtual/CanvasController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SelectOrderPannelController.ts","./KindomPannelController.ts","./MapPannelController.ts","./InfoShowPannelController.ts","./UpdateEventHelper.ts","./CameraController.ts","./DataControler.ts","./CunDangHelper.ts","./EntityHelper.ts","./GameController.ts","./EventBus.ts","./GameHelper.ts","./BasePannelController.ts","./LogPannelController.ts","./EntityInfoController.ts","./PeopleInfoController.ts","./OrderConfirmController.ts","./CundangSoltController.ts"],(function(t){"use strict";var e,n,o,i,a,s,l,h,c,r,g,d,m,u,C,f,y,p,v,N,B,I,P,E,S,w,T,k,b,D,H,O,L,G;return{setters:[function(t){e=t.inheritsLoose,n=t.createForOfIteratorHelperLoose},function(t){o=t.cclegacy,i=t._decorator,a=t.find,s=t.Sprite,l=t.Label,h=t.RichText,c=t.Node,r=t.v3,g=t.log,d=t.director},function(t){m=t.SelectOrderPannelController},function(t){u=t.KindomPannelController},function(t){C=t.MapPannelController},function(t){f=t.InfoShowPannelController},function(t){y=t.UpdateEventHelper},function(t){p=t.CameraController},function(t){v=t.InfomationType,N=t.EntityType,B=t.GameStatus,I=t.DataControler},function(t){P=t.CunDangHelper},function(t){E=t.EH},function(t){S=t.GameController},function(t){w=t.EventBus,T=t.EventType},function(t){k=t.default},function(t){b=t.BasePannelController},function(t){D=t.LogPannelController},function(t){H=t.EntityInfoController},function(t){O=t.PeopleInfoController},function(t){L=t.OrderConfirmController},function(t){G=t.CundangSoltController}],execute:function(){var M;o._RF.push({},"31a4ckJ6dVL+71DCzcokiBL","CanvasController",void 0);var _=i.ccclass,F=(i.property,t("CanvasController",_("CanvasController")(M=function(t){function o(){for(var e,n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))||this).updateIndex=0,e.informations=[],e.logs=[],e}e(o,t);var i=o.prototype;return i.start=function(){if(w.getInstance().sub(this.showClickEntityInfo,T.click_entity,this),w.getInstance().sub(this.onStop,T.stop,this),w.getInstance().sub(this.onGo,T.go,this),this.gc=S.getInstance(),this.showGameData(0),E.getEntityByPeopleName(this.gc.playerId)){this.showInfomation("欢迎主公回到三国,请下令吧!",null,v.回合开始),this.showCoverAndTipsOrHide(!1);var t=E.getEntityByPeopleName(this.gc.playerId).name;a(t)?this.gc.cs.moveToEntity(t):this.toast("玩家所在的实体尚未初始化 无法转移视角")}},i.showCoverAndTipsOrHide=function(t){a("Canvas/Cover").active=t},i.update=function(){this.updateIndex++,this.updateIndex%50==0&&(this.showGameData(0),this.updateClickEntityInfo())},i.onStop=function(t,e){this.showGameData(1)},i.onGo=function(t,e){y.weiyue()},i.setPrecent=function(t){a("Canvas/Mask/Progress").getComponent(s).fillRange=t},i.showGameData=function(t){this.gc.xun+=t,this.gc.xun>3&&(this.gc.xun=1,this.gc.month++),this.gc.month>12&&(this.gc.month=1,this.gc.year++);var e=this.gc.month+"月",n="建安"+(this.gc.year-196)+"年";this.gc.month>9?n+="冬 ":this.gc.month>6?n+="秋 ":this.gc.month>3?n+="夏 ":n+="春 ";var o="上旬 ";switch(this.gc.xun){case 1:o="上旬 ";break;case 2:o="中旬 ";break;case 3:o="下旬 ";break;default:o="上旬 "}this.logTime=n+""+e+o,t>0&&y.update(),this.node.getChildByName("MyInfo").getChildByName("Label").getComponent(l).string=this.gc.playerId+" "+n+e+o+"金钱 "+this.gc.kingdoms.get(this.gc.playerId).money+" 信望 "+this.gc.kingdoms.get(this.gc.playerId).credit},i.startGame=function(){this.checkIsShowingSelectEntityOrPos()||this.confirm("主公,确定要开始么?",this.doStartGame.bind(this))},i.doStartGame=function(){a("Canvas/Go").active=!1,this.gc.go()},i.showGoIcon=function(){a("Canvas/Go").active=!0},i.showClickEntityInfo=function(t,e){var n=t.str;this.clickEntityName=n,this.updateClickEntityInfo()},i.updateClickEntityInfo=function(){var t=a("Canvas/EntityInfo/Label").getComponent(l);if(null!=this.clickEntityName&&null!=this.clickEntityName&&null!=this.gc.entities.get(this.clickEntityName)){var e=this.clickEntityName;t.string=e;var n=E.getKingdomIdByEntityName(e),o=this.gc.entities.get(e),i=o.type,s="",h="无";if(null!=E.getCaptainInEntity(o)&&(h=E.getCaptainInEntity(o)),""!=n)i==N.city||i==N.gate||i==N.port?(s+=e+" 势力:"+n+" 主将:"+h,s+=" 兵力:"+(o.bubing+o.qibing+o.shuibing+o.gongbing),s+=" 粮草:"+o.food+" 耐久:"+o.health,s+=o.isInWar?" 交战中":""):i==N.army&&(s+=e+"队 势力:"+n+" 兵力:"+o.troops+" 士气:"+o.shiqi,s+=" 粮草:"+o.food);else if(i==N.city){var c=this.gc.dc.bds.get(e);s+=e+" 耐久:"+o.health+" 收益:"+o.shouyi+" 税收:"+o.shuishou,s+=" 等级:"+c.size+" 特性:无"}else s+=e+" 耐久:"+o.health;t.string=s}else t.string=""},i.showInfomation=function(t,e,n){var o=this;void 0===e&&(e=null),void 0===n&&(n=v.普通消息),this.hideAllPannel(),this.gc.gameStatus==B.go&&this.gc.pause(),a("Camera").getComponent(p).isShowInfomation=!0,this.node.getChildByName("InformationPannel").active=!0,this.playInfoSoundByType(n),this.node.getChildByName("InformationPannel").getChildByName("Pannel").getChildByName("Label").getComponent(h).string=t,this.node.getChildByName("InformationPannel").getChildByName("Bg").off(c.EventType.TOUCH_END),this.node.getChildByName("InformationPannel").getChildByName("Bg").on(c.EventType.TOUCH_END,(function(){o.node.getChildByName("InformationPannel").active=!1,a("Camera").getComponent(p).isShowInfomation=!1,o.gc.gameStatus==B.pause&&o.gc.recovery(),e&&e()}),this)},i.addInfomationsToStack=function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=0);var o=new F;o.callback=e,o.str=t,o.type=n,this.informations.push(o)},i.playInfoSoundByType=function(t){t==v.势力灭亡?k.playMusic(this.node,"武将死亡",!1,1):t==v.攻陷设施?k.playMusic(this.node,"攻陷",!1,1):t==v.设施叛立||t==v.武将叛逃?k.playMusic(this.node,"背叛",!1,1):t==v.部队暴击?k.playMusic(this.node,"威武",!1,1):t==v.回合开始?k.playMusic(this.node,"回合开始",!1,1):t==v.执行成功||t==v.登用成功?k.playMusic(this.node,"登用成功",!1,1):t==v.执行失败?k.playMusic(this.node,"扰乱",!1,1):t==v.势力建立?k.playMusic(this.node,"武将死亡",!1,1):t==v.武将投奔?k.playMusic(this.node,"随机收获",!1,1):t==v.武将死亡?k.playMusic(this.node,"武将死亡",!1,1):k.playMusic(this.node,"随机收获",!1,1)},i.showInformationsFromStack=function(){var t=this;if(this.gc.gameStatus==B.stop&&0!=this.informations.length){this.hideAllPannel();var e=this.informations.shift(),n=e.str,o=e.callback;a("Camera").getComponent(p).isShowInfomation=!0,this.node.getChildByName("InformationPannel").active=!0,this.playInfoSoundByType(e.type),this.node.getChildByName("InformationPannel").getChildByName("Pannel").getChildByName("Label").getComponent(h).string=n,this.node.getChildByName("InformationPannel").getChildByName("Bg").off(c.EventType.TOUCH_END),this.node.getChildByName("InformationPannel").getChildByName("Bg").on(c.EventType.TOUCH_END,(function(){t.node.getChildByName("InformationPannel").active=!1,a("Camera").getComponent(p).isShowInfomation=!1,o&&o(),t.invoke(t.showInformationsFromStack,.2)}),this)}},i.showDialogs=function(t){var e=this,n=t.shift();if(n){this.hideAllPannel(),this.gc.gameStatus==B.go&&this.gc.pause();var o=this.node.getChildByName("DialogPannel");this.showFrame(o,o.getChildByName("Pannel"),!0,!1);var i=this.node.getChildByName("DialogPannel").getChildByName("Pannel");i.getChildByName("Label").getComponent(h).string=" ",i.getChildByName("Label").getComponent(h).string=n.msg,o.getChildByName("Bg").off(c.EventType.TOUCH_END),o.getChildByName("Bg").on(c.EventType.TOUCH_END,(function(){t.length>0?e.showDialogs(t):(o.active=!1,e.gc.gameStatus==B.pause&&e.gc.recovery())}),this),i.getChildByName("HeadImage").getComponent(s).spriteFrame=I.getInstance().heads.get(n.id)}},i.hideAllPannel=function(){this.node.getComponent(f).hide(),this.node.getComponent(D).hide(),this.node.getComponent(C).hide(),this.node.getComponent(u).hide(),this.node.getComponent(H).hide(),this.node.getComponent(O).hide(),this.node.getComponent(G).hide(),this.node.getComponent(m).hide()},i.confirm=function(t,e,n,o){var i=this;void 0===n&&(n=null),void 0===o&&(o=null),this.hideAllPannel(),this.gc.gameStatus==B.go&&this.gc.pause();var a=this.node.getChildByName("Confirm");this.showFrame(a,a.getChildByName("Pannel"),!0,!1);var l=a.getChildByName("Pannel");l.getChildByName("Label").getComponent(h).string=t,o?(l.getChildByName("Head").active=!0,l.getChildByName("Head").getComponent(s).spriteFrame=this.gc.dc.heads.get(o),l.getChildByName("Label").position=r(0,0,0)):(l.getChildByName("Head").active=!1,l.getChildByName("Label").position=r(0,60,0)),a.getChildByName("Pannel").getChildByName("Yes").off(c.EventType.TOUCH_END),a.getChildByName("Pannel").getChildByName("No").off(c.EventType.TOUCH_END),a.getChildByName("Pannel").getChildByName("Yes").on(c.EventType.TOUCH_END,(function(){i.hideFrame(a,a.getChildByName("Pannel")),i.gc.gameStatus==B.pause&&i.gc.recovery(),e&&e()}),this),a.getChildByName("Pannel").getChildByName("No").on(c.EventType.TOUCH_END,(function(){i.hideFrame(a,a.getChildByName("Pannel")),i.gc.gameStatus==B.pause&&i.gc.recovery(),n&&n()}),this)},i.printScene=function(){if(!this.checkIsShowingSelectEntityOrPos()){g("场景对象",this.node.parent.children),g("数据模型",this.gc);for(var t,e=n(this.gc.peoples.values());!(t=e()).done;){var o=t.value;E.checkIsPeopleZaiye(o.name)&&o.now&&g(o.name+" 在 "+o.now)}this.confirm("是否要退出游戏?",this.leaveScene.bind(this))}},i.saveScene=function(){var t=this;this.checkIsShowingSelectEntityOrPos()||(this.gc.gameStatus==B.stop?this.gc.cundang.solt&&""!=this.gc.cundang.solt&&"cache_0"!=this.gc.cundang.solt?this.confirm("确定要存档么?",(function(){g("-------存档-------"),P.getInstance().saveGameData(t.gc.cundang.solt)})):this.node.getComponent(G).show():this.toast("正在进行,无法存档"))},i.leaveScene=function(){w.getInstance().removeAll(),d.loadScene("SelectScene")},i.postOrder=function(t){var e=this;this.node.getComponent(L).showForOrder(t,(function(){e.gc.postOrder(t)}))},i.postTask=function(t){var e=this;this.node.getComponent(L).showForTask(t,(function(){e.gc.postTask(t)}))},i.postAction=function(t){var e=this;this.node.getComponent(L).showForAct(t,(function(){e.gc.postAct(t)}))},i.addLog=function(t){for(;this.logs.length>999;)this.logs.shift();this.logs.push(this.logTime+" "+t)},i.checkIsShowingSelectEntityOrPos=function(){return!(!a("Canvas/SelectEntityPannel").active&&!a("Canvas/SelectPosPannel").active)},o}(b))||M),t("Dialog",(function(){})),t("Info",(function(){})));o._RF.pop()}}}));

System.register("chunks:///_virtual/CunDangHelper.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameController.ts","./DataControler.ts","./EntityHelper.ts"],(function(e){"use strict";var t,s,a,n,o,i,r,p,l,u,g;return{setters:[function(e){t=e.createForOfIteratorHelperLoose},function(e){s=e.cclegacy,a=e.find,n=e.log},function(e){o=e.GameController},function(e){i=e.Kingdom,r=e.EntityType,p=e.People,l=e.Task,u=e.CunDang},function(e){g=e.Entity}],execute:function(){s._RF.push({},"15524hCIcpM/qySFk2Rj6Yx","CunDangHelper",void 0);e("CunDangHelper",function(){function e(){}e.getInstance=function(){return null==this.instance&&(this.instance=new e),this.instance};var s=e.prototype;return s.makeCunDangOne=function(){var e=new u;e.playerId="成宜",e.month=11,e.year=201,e.xun=1,e.hasHanXianDi=!0,e.relationships=new Map,e.treatys=new Map;var t=i.getIns().setCredit(100).setMoney(1e5).setKingId("成宜");t.entities=["新野","长安"];var s=i.getIns().setCredit(100).setMoney(1e3).setKingId("刘备");s.entities=["许都","洛阳"],e.kingdoms=[t,s],e.entities=[];var a=g.getIns().setType(r.city).setName("新野").setBubing(2e4).setFood(2e4);a.setHealth(90).setPeoples(["成宜","张飞"]).setQibing(500).setGongbing(500).setCaptives(["李典"]);var n=g.getIns().setType(r.city).setName("长安").setBubing(1e4).setFood(1e4);n.setHealth(90).setPeoples(["许褚"]).setCaptives(["糜竺"]);var o=g.getIns().setType(r.city).setName("许都").setBubing(1e3).setFood(1e3);o.setHealth(90).setPeoples(["刘备","法正"]);var l=g.getIns().setType(r.city).setName("洛阳").setBubing(1e3).setFood(1e3);return l.setHealth(90).setPeoples(["甘宁","公孙恭"]).setQibing(200).setGongbing(100),e.entities.push(a,n,o,l),e.peoples=[],e.peoples.push(p.getIns().setLoyal(100).setHealth(80).setName("成宜")),e.peoples.push(p.getIns().setLoyal(100).setHealth(80).setName("张飞")),e.peoples.push(p.getIns().setLoyal(100).setHealth(80).setName("许褚")),e.peoples.push(p.getIns().setLoyal(100).setHealth(80).setName("糜竺")),e.peoples.push(p.getIns().setLoyal(100).setHealth(80).setName("法正")),e.peoples.push(p.getIns().setLoyal(100).setHealth(80).setName("刘备")),e.peoples.push(p.getIns().setLoyal(100).setHealth(80).setName("公孙恭")),e.peoples.push(p.getIns().setLoyal(100).setHealth(80).setName("甘宁")),e.peoples.push(p.getIns().setLoyal(100).setHealth(80).setName("李典")),e},s.saveGameData=function(e){var s=o.getInstance(),i=new u;i.month=s.month,i.year=s.year,i.xun=s.xun,i.logs=s.cc.logs,i.index=s.cundang.index,i.playerId=s.playerId,i.hasHanXianDi=s.hasHanXianDi,i.relationships=this.mapToObject(s.cundang.relationships),i.treatys=this.mapToObject(s.cundang.treatys),i.solt=s.cundang.solt;for(var p,l=t(s.entities.values());!(p=l()).done;){var g=p.value;if(g.type==r.army||g.type==r.team){var h=g.name,y=a(h);y&&(g.pos=[y.position.x+50,50-y.position.z])}}i.peoples=[];for(var v,m=t(s.peoples.values());!(v=m()).done;){var d=v.value;i.peoples.push(d)}i.entities=[];for(var c,b=t(s.entities.values());!(c=b()).done;){var f=c.value;i.entities.push(f)}i.kingdoms=[];for(var I,H=t(s.kingdoms.values());!(I=H()).done;){var T=I.value;i.kingdoms.push(T)}i.tag=s.playerId+" "+s.year+" "+s.month+" "+s.xun;var k=JSON.stringify(i);n(e,k),localStorage.setItem(e,k)},s.getData=function(e){return this.makeData(localStorage.getItem(e))},s.makeData=function(e){var s=new u,a=JSON.parse(e);s.index=0,a.index&&(s.index=a.index),s.year=a.year,s.month=a.month,s.xun=a.xun,s.playerId=a.playerId,s.tag=a.tag,s.hasHanXianDi=a.hasHanXianDi,a.logs&&(s.logs=a.logs),s.solt=a.solt,a.relationships?s.relationships=this.objectToMap(a.relationships):s.relationships=new Map,a.treatys?s.treatys=this.objectToMap(a.treatys):s.treatys=new Map,s.peoples=[];for(var n,o=t(a.peoples);!(n=o()).done;){var h=n.value,y=new p;y.health=h.health,y.name=h.name,y.loyal=h.loyal,y.juewei=h.juewei,y.isDead=h.isDead,y.now=h.now,s.peoples.push(y)}s.entities=[];for(var v,m=t(a.entities);!(v=m()).done;){var d=v.value,c=new g;c.armyType=d.armyType,c.bingyi=d.bingyi,c.bubing=d.bubing,c.captives=[];for(var b,f=t(d.captives);!(b=f()).done;){var I=b.value;c.captives.push(I)}c.food=d.food,c.gongbing=d.gongbing,c.health=d.health,c.homeId=d.homeId,c.name=d.name,c.orderType=d.orderType,c.peoples=[];for(var H,T=t(d.peoples);!(H=T()).done;){var k=H.value;c.peoples.push(k)}c.pos=[];for(var x,w=t(d.pos);!(x=w()).done;){var D=x.value;c.pos.push(D)}for(var C in c.qibing=d.qibing,c.shiqi=d.shiqi,c.shouyi=d.shouyi,c.shuibing=d.shuibing,c.shuishou=d.shuishou,c.tasks=new Map,d.tasks){var N=d.tasks.get(C);if(N){var M=N[1],L=new l;L.homeId=M.homeId,L.num=M.num,L.people=M.people,L.traget=M.traget,L.type=M.type,L.armyType=M.armyType,c.tasks.set(N[0],L)}}d.type,r.army,c.traget=d.traget,c.tragetPos=[];for(var P,j=t(d.tragetPos);!(P=j()).done;){var F=P.value;c.tragetPos.push(F)}c.troops=d.troops,c.type=d.type,c.mingxing=d.mingxing,c.isInRiver=d.isInRiver,c.targetPeople=d.targetPeople,c.isComplete=d.isComplete,c.isInWar=d.isInWar,c.maifuTime=d.maifuTime,d.ts&&(c.ts=d.ts),d.bbs&&(c.bbs=d.bbs),d.ts&&(c.gbs=d.gbs),d.gbs&&(c.sbs=d.sbs),d.qbs&&(c.qbs=d.sbs),s.entities.push(c)}s.kingdoms=[];for(var q,O=t(a.kingdoms);!(q=O()).done;){var S=q.value,B=new i;B.credit=S.credit,B.index=S.index,B.kingId=S.kingId,B.money=S.money,B.entities=[];for(var G,R=t(S.entities);!(G=R()).done;){var X=G.value;B.entities.push(X)}s.kingdoms.push(B)}return s},s.objectToMap=function(e){var t=new Map;for(var s in e)t.set(s,e[s]);return t},s.mapToObject=function(e){for(var s,a={},n=t(e);!(s=n()).done;){var o=s.value;a[o[0]]=o[1]}return a},e}());s._RF.pop()}}}));

System.register("chunks:///_virtual/CunDangMaker.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EntityHelper.ts","./DataControler.ts","./GameHelper.ts","./BaseComponent.ts","./PinYinHelper.ts"],(function(t){"use strict";var e,i,n,s,o,a,h,l,g,r,d,p,c,u,y,v,m,C,f,w,k,b,S,E,P;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,s=t.assertThisInitialized,o=t.createForOfIteratorHelperLoose},function(t){a=t.cclegacy,h=t._decorator,l=t.Prefab,g=t.Asset,r=t.find,d=t.Label,p=t.EditBox,c=t.log,u=t.instantiate,y=t.v3,v=t.UITransform,m=t.Toggle},function(t){C=t.Entity},function(t){f=t.DataControler,w=t.EntityType,k=t.Kingdom,b=t.People},function(t){S=t.default},function(t){E=t.default},function(t){P=t.default}],execute:function(){var K,I,B,N,V,D,M;a._RF.push({},"f6f945KZLJJCYUjojBIXvAp","CunDangMaker",void 0);var x=h.ccclass,H=h.property;t("CunDangMaker",(K=x("CunDangMaker"),I=H(l),B=H(g),K((D=e((V=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o))||this,n(e,"itemPrefab",D,s(e)),n(e,"cache",M,s(e)),e.entities=new Map,e.peoples=new Map,e.kindoms=new Map,e.isShowPeoples=!1,e}i(e,t);var a=e.prototype;return a.check=function(t,e){if(t.length<e.length)return!1;for(var i,n=0,s=o(e);!(i=s()).done;){if(i.value!=this.pinyin.convertPinyin(t[n])[0])return!1;n++}return!0},a.start=function(){this.pinyin=P.getIns(),this.entityName=r("Canvas/EntityData/entityName").getComponent(d),this.entityFood=r("Canvas/EntityData/entityFood").getComponent(p),this.entityFood.string="1000",this.entityFood.node.on("editing-did-ended",this.updateEntity,this),this.entityShiqi=r("Canvas/EntityData/entityShiqi").getComponent(p),this.entityShiqi.string="80",this.entityShiqi.node.on("editing-did-ended",this.updateEntity,this),this.entityHealth=r("Canvas/EntityData/entityHealth").getComponent(p),this.entityHealth.string="80",this.entityHealth.node.on("editing-did-ended",this.updateEntity,this),this.entityBingyi=r("Canvas/EntityData/entityBingyi").getComponent(p),this.entityBingyi.string="1000",this.entityBingyi.node.on("editing-did-ended",this.updateEntity,this),this.entityShouyi=r("Canvas/EntityData/entityShouyi").getComponent(p),this.entityShouyi.string="80",this.entityShouyi.node.on("editing-did-ended",this.updateEntity,this),this.entityShuishou=r("Canvas/EntityData/entityShuishou").getComponent(p),this.entityShuishou.string="80",this.entityShuishou.node.on("editing-did-ended",this.updateEntity,this),this.entityMingxing=r("Canvas/EntityData/entityMingxing").getComponent(p),this.entityMingxing.string="80",this.entityMingxing.node.on("editing-did-ended",this.updateEntity,this),this.entityBubing=r("Canvas/EntityData/entityBubing").getComponent(p),this.entityBubing.string="6000",this.entityBubing.node.on("editing-did-ended",this.updateEntity,this),this.entityShuibing=r("Canvas/EntityData/entityShuibing").getComponent(p),this.entityShuibing.string="0",this.entityShuibing.node.on("editing-did-ended",this.updateEntity,this),this.entityQibing=r("Canvas/EntityData/entityQibing").getComponent(p),this.entityQibing.string="0",this.entityQibing.node.on("editing-did-ended",this.updateEntity,this),this.entityGongbing=r("Canvas/EntityData/entityGongbing").getComponent(p),this.entityGongbing.string="0",this.entityGongbing.node.on("editing-did-ended",this.updateEntity,this),this.kingName=r("Canvas/KingdomData/kingName").getComponent(d),this.kingMoney=r("Canvas/KingdomData/kingMoney").getComponent(p),this.kingMoney.string="1000",this.kingMoney.node.on("editing-did-ended",this.updateKingdom,this),this.kingCredit=r("Canvas/KingdomData/kingCredit").getComponent(p),this.kingCredit.string="1000",this.kingCredit.node.on("editing-did-ended",this.updateKingdom,this),this.peopleName=r("Canvas/PeopleData/peopleName").getComponent(d),this.peopleLoyal=r("Canvas/PeopleData/peopleLoyal").getComponent(p),this.peopleLoyal.string="80",this.peopleLoyal.node.on("editing-did-ended",this.updatePeople,this),this.peopleHealth=r("Canvas/PeopleData/peopleHealth").getComponent(p),this.peopleHealth.string="100",this.peopleHealth.node.on("editing-did-ended",this.updatePeople,this),this.peopleJuewei=r("Canvas/PeopleData/peopleJuewei").getComponent(p),this.peopleJuewei.string="0",this.peopleJuewei.node.on("editing-did-ended",this.updatePeople,this),this.playerEditBox=r("Canvas/Player").getComponent(p),this.playerEditBox.node.on("editing-did-ended",this.showKings,this),this.suoxieEditBox=r("Canvas/SuoXie").getComponent(p),this.suoxieEditBox.node.on("text-changed",this.onSuoXie,this),this.cundang=JSON.parse(this.cache._nativeAsset);for(var t,e=o(this.cundang.entities);!(t=e()).done;){var i=t.value;this.entities.set(i.name,i)}for(var n,s=o(this.cundang.peoples);!(n=s()).done;){var a=n.value;this.peoples.set(a.name,a)}for(var h,l=o(this.cundang.kingdoms);!(h=l()).done;){var g=h.value;this.kindoms.set(g.kingId,g)}r("Canvas/Year").getComponent(p).string=this.cundang.year+"",r("Canvas/Player").getComponent(p).string=this.cundang.playerId+"",this.renderKingdoms()},a.addKingdom=function(){this.showPeoples(this.addKingdomCallback,!0)},a.addKingdomCallback=function(t){r("Canvas/ShowPeopleScrollView").active=!1,this.isShowPeoples=!1,c(t);var e=new k;e.kingId=t,this.kindoms.set(t,e),this.renderKingdoms()},a.deleteKingdom=function(){if(this.kindoms.get(this.selectKindom)){var t=this.kindoms.get(this.selectKindom).entities;this.kindoms.delete(this.selectKindom);for(var e,i=[],n=o(this.entities.values());!(e=n()).done;){var s=e.value;if(S.checKIsArrayContainsItem(s.name,t))for(var a,h=o(s.peoples);!(a=h()).done;){var l=a.value;i.push(l)}}for(var g=0,r=i;g<r.length;g++){var d=r[g];this.peoples.delete(d)}for(var p,c=o(t);!(p=c()).done;){var u=p.value;this.entities.delete(u)}this.renderKingdoms()}},a.updateKingdom=function(){r("Canvas/ShowPeopleScrollView").active=!1,c("------------updateKingdom-----------");try{if(this.kindoms.get(this.selectKindom)){var t=this.kindoms.get(this.selectKindom.trim());t.money=this.parseInt(this.kingMoney),t.credit=this.parseInt(this.kingCredit)}}catch(t){c("------------error---updatePeople----------")}},a.addEntity=function(){null!=this.selectKindom?this.showEntities(this.showEntitiesToggleCallback):c("请先添加或选择势力")},a.showEntitiesToggleCallback=function(t){r("Canvas/ShowEntityScrollView").active=!1,c(t),this.kindoms.get(this.selectKindom).entities.push(t);var e=new C;e.name=t,this.entityName.string=e.name+"",this.entityBubing.string=e.bubing+"",this.entityQibing.string=e.qibing+"",this.entityGongbing.string=e.gongbing+"",this.entityShuibing.string=e.shuibing+"",this.entityShiqi.string=e.shiqi+"",this.entityShouyi.string=e.shouyi+"",this.entityShuishou.string=e.shuishou+"",this.entityFood.string=e.food+"",this.entityMingxing.string=e.mingxing+"",this.entityHealth.string=e.health+"",this.entityBingyi.string=e.bingyi+"",this.entities.set(t,e),this.renderEntities()},a.deleteEntity=function(){if(this.entities.get(this.selectEntity)){this.kindoms.delete(this.selectEntity),S.spliceItemFormArray(this.selectEntity,this.kindoms.get(this.selectKindom).entities);for(var t,e=o(this.entities.get(this.selectEntity).peoples);!(t=e()).done;){var i=t.value;this.peoples.delete(i)}this.renderEntities()}},a.updateEntity=function(){r("Canvas/ShowEntityScrollView").active=!1,c("------------updateEntity-----------");try{if(this.entities.get(this.selectEntity)){var t=this.entities.get(this.selectEntity);t.food=this.parseInt(this.entityFood),t.mingxing=this.parseInt(this.entityMingxing),t.health=this.parseInt(this.entityHealth),t.shiqi=this.parseInt(this.entityShiqi),t.shuishou=this.parseInt(this.entityShuishou),t.shouyi=this.parseInt(this.entityShouyi),t.bingyi=this.parseInt(this.entityBingyi),t.bubing=this.parseInt(this.entityBubing),t.qibing=this.parseInt(this.entityQibing),t.shuibing=this.parseInt(this.entityShuibing),t.gongbing=this.parseInt(this.entityGongbing)}}catch(t){c("------------error---updateEntity----------")}},a.parseInt=function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t){var e=t.string.trim();return this.isNumber(e)?parseInt(e):(c(e+"---数字字符串错误"),t.string="0",0)})),a.isNumber=function(t){return!(!/^\d+(\.\d+)?$/.test(t)&&!/^(-(([0-9]+\.[0-9]*[1-9][0-9]*)|([0-9]*[1-9][0-9]*\.[0-9]+)|([0-9]*[1-9][0-9]*)))$/.test(t))},a.addPeople=function(){null!=this.selectEntity?this.showPeoples(this.addPeopleCallback,!1):c("请先添加或选择实体")},a.addPeopleCallback=function(t){r("Canvas/ShowPeopleScrollView").active=!1,this.isShowPeoples=!1,c(t);var e=new b;e.name=t,this.peoples.set(t,e),this.entities.get(this.selectEntity).peoples.push(t),this.renderPeoples()},a.deletePeople=function(){if(this.peoples.get(this.selectPeople)){this.peoples.delete(this.selectPeople);for(var t,e=o(this.entities.get(this.selectEntity).peoples);!(t=e()).done;){if(t.value==this.selectPeople)return S.spliceItemFormArray(this.selectPeople,this.entities.get(this.selectEntity).peoples),void this.renderPeoples()}c("----bug---不存在此人无法删除---"+this.selectPeople)}},a.updatePeople=function(){r("Canvas/ShowPeopleScrollView").active=!1,c("------------updatePeople-----------");try{if(this.peoples.get(this.selectPeople)){var t=this.peoples.get(this.selectPeople);t.health=this.parseInt(this.peopleHealth),t.juewei=this.parseInt(this.peopleJuewei),t.name=this.peopleName.string,t.loyal=this.parseInt(this.peopleLoyal)}}catch(t){c("------------error---updatePeople----------")}},a.renderKingdoms=function(){r("Canvas/KingdomScrollView/view/content").removeAllChildren();for(var t,e=0,i=o(this.kindoms.values());!(t=i()).done;){var n=t.value,s=u(this.itemPrefab);s.parent=r("Canvas/KingdomScrollView/view/content"),s.position=y(-80,-80*e,0),s.name=n.kingId,s.getChildByName("Label").getComponent(d).string=n.kingId,e++,s.getChildByName("Toggle").on("toggle",this.kingdomClickCallback.bind(this,n.kingId),this)}r("Canvas/KingdomScrollView/view/content").getComponent(v).height=80*e;for(var a,h=[],l=o(this.kindoms.keys());!(a=l()).done;){var g=a.value;h.push(g)}h[0]?(this.selectKindom=h[0],this.kingdomClickCallback(this.selectKindom)):(this.selectKindom=null,this.renderEntities())},a.renderEntities=function(){if(r("Canvas/EntityScrollView/view/content").removeAllChildren(),null!=this.kindoms.get(this.selectKindom)){for(var t,e=this.kindoms.get(this.selectKindom).entities,i=0,n=o(e);!(t=n()).done;){var s=t.value,a=u(this.itemPrefab);a.parent=r("Canvas/EntityScrollView/view/content"),a.position=y(-80,-80*i,0),a.name=s,a.getChildByName("Label").getComponent(d).string=s,i++,a.getChildByName("Toggle").on("toggle",this.entityClickCallback.bind(this,s),this)}r("Canvas/EntityScrollView/view/content").getComponent(v).height=80*i,this.kindoms.get(this.selectKindom).entities[0]?(this.selectEntity=this.kindoms.get(this.selectKindom).entities[0],this.entityClickCallback(this.selectEntity)):(this.selectEntity=null,this.renderPeoples())}else this.renderPeoples()},a.renderPeoples=function(){if(r("Canvas/PeopleScrollView/view/content").removeAllChildren(),null!=this.entities.get(this.selectEntity)){for(var t,e=this.entities.get(this.selectEntity).peoples,i=0,n=o(e);!(t=n()).done;){var s=t.value,a=u(this.itemPrefab);a.parent=r("Canvas/PeopleScrollView/view/content"),a.position=y(-80,-80*i,0),a.name=s,a.getChildByName("Label").getComponent(d).string=s,i++,a.getChildByName("Toggle").on("toggle",this.peopleClickCallback.bind(this,s),this)}this.entities.get(this.selectEntity).peoples[0]?(this.selectPeople=this.entities.get(this.selectEntity).peoples[0],this.peopleClickCallback(this.selectPeople)):this.selectPeople=null,r("Canvas/PeopleScrollView/view/content").getComponent(v).height=80*i}},a.peopleClickCallback=function(t){if(null!=this.peoples.get(t)){this.peopleHealth.string=this.peoples.get(t).health+"",this.peopleJuewei.string=this.peoples.get(t).juewei+"",this.peopleLoyal.string=this.peoples.get(t).loyal+"",this.peopleName.string=this.peoples.get(t).name+"",c(t);for(var e,i=o(this.entities.get(this.selectEntity).peoples);!(e=i()).done;){var n=e.value;r("Canvas/PeopleScrollView/view/content").getChildByName(n).getChildByName("Toggle").getComponent(m).isChecked=!1,this.selectPeople=t}}},a.kingdomClickCallback=function(t){if(null!=this.kindoms.get(t)){this.kingMoney.string=this.kindoms.get(t).money+"",this.kingCredit.string=this.kindoms.get(t).credit+"",this.kingName.string=this.kindoms.get(t).kingId+"",c(t);for(var e,i=o(this.kindoms.values());!(e=i()).done;){var n=e.value;r("Canvas/KingdomScrollView/view/content").getChildByName(n.kingId).getChildByName("Toggle").getComponent(m).isChecked=!1,this.selectKindom=t}this.renderEntities()}},a.entityClickCallback=function(t){if(null!=this.entities.get(t)){this.entityName.string=this.entities.get(t).name+"",this.entityFood.string=this.entities.get(t).food+"",this.entityHealth.string=this.entities.get(t).health+"",this.entityShouyi.string=this.entities.get(t).shouyi+"",this.entityShuishou.string=this.entities.get(t).shuishou+"",this.entityMingxing.string=this.entities.get(t).mingxing+"",this.entityShiqi.string=this.entities.get(t).shiqi+"",this.entityBingyi.string=this.entities.get(t).bingyi+"",this.entityBubing.string=this.entities.get(t).bubing+"",this.entityShuibing.string=this.entities.get(t).shuibing+"",this.entityQibing.string=this.entities.get(t).qibing+"",this.entityGongbing.string=this.entities.get(t).gongbing+"",c(t);for(var e,i=o(this.kindoms.get(this.selectKindom).entities);!(e=i()).done;){var n=e.value;r("Canvas/EntityScrollView/view/content").getChildByName(n).getChildByName("Toggle").getComponent(m).isChecked=!1,this.selectEntity=t}this.renderPeoples()}},a.showEntities=function(t){r("Canvas/ShowEntityScrollView").active=!0,r("Canvas/ShowEntityScrollView/view/content").removeAllChildren();for(var e,i=f.getInstance(),n=0,s=o(i.bds.keys());!(e=s()).done;){var a=e.value;if("山越"==a&&c(""),!this.entities.get(a)){var h=u(this.itemPrefab);h.parent=r("Canvas/ShowEntityScrollView/view/content"),h.position=y(-80,-80*n,0),h.getChildByName("Label").getComponent(d).string=a,n++,h.getChildByName("Toggle").on("toggle",t.bind(this,a),this)}}r("Canvas/ShowEntityScrollView/view/content").getComponent(v).height=80*n},a.showPeoples=function(t,e){this.callback=t,this.isForKing=e,this.isShowPeoples=!0;var i=this.parseInt(r("Canvas/Year").getComponent(p));if(i<150||i>250)c("year设置错误 必须在150-250之间");else{r("Canvas/ShowPeopleScrollView").active=!0,r("Canvas/ShowPeopleScrollView/view/content").removeAllChildren();for(var n,s=f.getInstance(),a=r("Canvas/SuoXie").getComponent(p).string.trim(),h=0,l=o(s.pps.keys());!(n=l()).done;){var g=n.value;if(!this.peoples.has(g)&&!(e&&this.kindoms.has(g)||""!=a&&a.length>0&&0==this.check(g,a)||s.pps.get(g).age>i-15||s.pps.get(g).age<i-75||s.pps.get(g).deadTime<=i)){var m=u(this.itemPrefab);m.parent=r("Canvas/ShowPeopleScrollView/view/content"),m.position=y(-80,-80*h,0),m.getChildByName("Label").getComponent(d).string=g,h++,m.getChildByName("Toggle").on("toggle",t.bind(this,g),this)}}r("Canvas/ShowPeopleScrollView/view/content").getComponent(v).height=80*h}},a.showKings=function(){var t=this;r("Canvas/ShowPeopleScrollView").active=!0,r("Canvas/ShowPeopleScrollView/view/content").removeAllChildren();for(var e,i=f.getInstance(),n=0,s=function(){var i=e.value;if(0==t.kindoms.has(i))return"continue";var s=u(t.itemPrefab);s.parent=r("Canvas/ShowPeopleScrollView/view/content"),s.position=y(-80,-80*n,0),s.getChildByName("Label").getComponent(d).string=i,n++,s.getChildByName("Toggle").on("toggle",(function(){t.playerEditBox.string=i}),t)},a=o(i.pps.keys());!(e=a()).done;)s();r("Canvas/ShowPeopleScrollView/view/content").getComponent(v).height=80*n},a.onSuoXie=function(){this.isShowPeoples&&this.showPeoples(this.callback,this.isForKing)},a.add=function(){for(var t,e=o(this.kindoms.keys());!(t=e()).done;){var i=t.value;if(null==this.peoples.get(i)||null==this.peoples.get(i))return void c(i+"不存在于选择的所有人物中");for(var n,s=this.kindoms.get(i),a=0,h=o(s.entities);!(n=h()).done;)for(var l,g=n.value,d=o(this.entities.get(g).peoples);!(l=d()).done;){i==l.value&&(a=1)}if(0==a)return void c(i+"不存在于他的势力中")}var u=this.parseInt(r("Canvas/Year").getComponent(p));if(u<150||u>250)c("year设置错误 必须在150-250之间");else if(this.cundang.year=u,this.cundang.playerId=r("Canvas/Player").getComponent(p).string.trim(),0!=this.kindoms.has(this.cundang.playerId)){this.cundang.entities=[];for(var y,v=o(this.entities.values());!(y=v()).done;){var m=y.value;m.name.includes("港")?m.type=w.port:m.name.includes("关")?m.type=w.gate:m.type=w.city,this.cundang.entities.push(m)}this.cundang.kingdoms=[];for(var C,f=o(this.kindoms.values());!(C=f()).done;){var k=C.value;this.cundang.kingdoms.push(k)}this.cundang.peoples=[];for(var b,S=o(this.peoples.values());!(b=S()).done;){var E=b.value;this.cundang.peoples.push(E)}this.cundang.hasHanXianDi=!0,this.cundang.month=1,this.cundang.xun=1,this.cundang.relationships=new Map,this.log("---存档---",this.cundang),this.log(JSON.stringify(this.cundang))}else c("玩家不存在于势力中")},e}(E)).prototype,"itemPrefab",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=e(V.prototype,"cache",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=V))||N));a._RF.pop()}}}));

System.register("chunks:///_virtual/CundangSoltController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CunDangHelper.ts","./DataControler.ts","./GameController.ts","./BasePannelController.ts"],(function(e){"use strict";var t,n,a,s,i,l,r,o,h,c,g,m,C;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,a=e._decorator,s=e.find,i=e.Node,l=e.Label,r=e.Tween,o=e.v3,h=e.tween},function(e){c=e.CunDangHelper},function(e){g=e.CunDang},function(e){m=e.GameController},function(e){C=e.BasePannelController}],execute:function(){var u;n._RF.push({},"a305chztDJCIZvvkEe271W/","CundangSoltController",void 0);var f=a.ccclass;a.property,e("CundangSoltController",f("CundangSoltController")(u=function(e){function n(){for(var t,n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return(t=e.call.apply(e,[this].concat(a))||this).index=0,t}t(n,e);var a=n.prototype;return a.start=function(){var e=this;if(this.pannel=s("Canvas/CundangSoltPannel"),s("Canvas/CundangSoltPannel/Bg").on(i.EventType.TOUCH_END,(function(){e.hideFrame(e.pannel,e.pannel.getChildByName("Pannel"))}),this),this.frame1=s("Canvas/CundangSoltPannel/Pannel/Datas/Data1/Frame"),this.frame2=s("Canvas/CundangSoltPannel/Pannel/Datas/Data2/Frame"),this.frame3=s("Canvas/CundangSoltPannel/Pannel/Datas/Data3/Frame"),this.frame4=s("Canvas/CundangSoltPannel/Pannel/Datas/Data4/Frame"),this.gc=m.getInstance(),this.getItem("cache_1")){var t=JSON.parse(this.getItem("cache_1"));this.frame1.getChildByName("Value").getComponent(l).string=g.getStr(t)}else this.frame1.getChildByName("Value").getComponent(l).string="空";if(this.getItem("cache_2")){var n=JSON.parse(this.getItem("cache_2"));this.frame2.getChildByName("Value").getComponent(l).string=g.getStr(n)}else this.frame2.getChildByName("Value").getComponent(l).string="空";if(this.getItem("cache_3")){var a=JSON.parse(this.getItem("cache_3"));this.frame3.getChildByName("Value").getComponent(l).string=g.getStr(a)}else this.frame3.getChildByName("Value").getComponent(l).string="空";if(this.getItem("cache_4")){var r=JSON.parse(this.getItem("cache_4"));this.frame4.getChildByName("Value").getComponent(l).string=g.getStr(r)}else this.frame4.getChildByName("Value").getComponent(l).string="空";this.frame1.on(i.EventType.TOUCH_END,this.frameClick.bind(this,1),this),this.frame2.on(i.EventType.TOUCH_END,this.frameClick.bind(this,2),this),this.frame3.on(i.EventType.TOUCH_END,this.frameClick.bind(this,3),this),this.frame4.on(i.EventType.TOUCH_END,this.frameClick.bind(this,4),this)},a.frameClick=function(e){this.index=e,this.selectSolt="cache_"+this.index,r.stopAllByTarget(this.frame1),this.frame1.scale=o(1,1,1),r.stopAllByTarget(this.frame2),this.frame2.scale=o(1,1,1),r.stopAllByTarget(this.frame3),this.frame3.scale=o(1,1,1),r.stopAllByTarget(this.frame4),this.frame4.scale=o(1,1,1),s("Canvas/CundangSoltPannel/Pannel/Datas/Data"+this.index+"/Frame")&&h(s("Canvas/CundangSoltPannel/Pannel/Datas/Data"+this.index+"/Frame")).to(.3,{scale:o(1.1,1.1,1.1)}).to(.2,{scale:o(1,1,1)}).union().repeatForever().start()},a.ok=function(){var e=this;0!=this.index?this.gc.cc.confirm("确定将存档覆盖到存档位置"+this.index,(function(){e.gc.cundang.solt=e.selectSolt,c.getInstance().saveGameData(e.gc.cundang.solt),e.hideFrame(e.pannel,e.pannel.getChildByName("Pannel"))})):this.toast("请选择一个存档位置")},a.show=function(){this.gc.cc.checkIsShowingSelectEntityOrPos()||(this.showFrame(s("Canvas/CundangSoltPannel"),s("Canvas/CundangSoltPannel/Pannel")),this.frameClick(0))},a.hide=function(){this.hideFrame(s("Canvas/CundangSoltPannel"),s("Canvas/CundangSoltPannel/Pannel"))},n}(C))||u);n._RF.pop()}}}));

System.register("chunks:///_virtual/DataControler.ts",["cc","./DataIniter.ts"],(function(t){"use strict";var i,n,e,s;return{setters:[function(t){i=t.cclegacy,n=t._decorator,e=t.Color},function(t){s=t.DataIniter}],execute:function(){t({ActType:void 0,ArmyType:void 0,EntityType:void 0,GameStatus:void 0,InfomationType:void 0,JueType:void 0,OrderType:void 0,TaskType:void 0}),i._RF.push({},"91f64cZ+zFJ3a75mVfgGw07","DataControler",void 0);var a,r,o;n.ccclass,n.property,t("DataControler",function(){function t(){this.tipIndex=0,this.tips=[],this.sounds=["游戏开始","背叛","步兵行军","登用成功","队伍溃散","工兵行军","攻陷","回合开始","火烧","建筑坍塌","买卖","叛逃","骑马","轻骑兵","扰乱","射箭","随机收获","投石","威武","伪报","武将死亡","行船"],this.prefabs=["City","Cube","CundangItem","EntityIcon","EntityInfoItem","Farmland","Gate","Group","Hill","KindomItem","LogItem","MapItem","Particle","PeopleInfoItem","PeopleItem","Points","Port","Quad","TeamIcon","Tree","Marsh"],this.qibingBuildings=["天水","乌丸","武威","长安","西平","羌戎"],this.shuibingBuildings=["柴桑","襄阳","秣陵","北海","吴郡","北海","山越"],this.gongbingBuildings=["洛阳","长安","秣陵","许都","北平","晋阳","成都","汉中","南蛮"]}return t.getInstance=function(){return null==this.instance&&(this.instance=new t,s.initData(this.instance)),this.instance},t}()),t("Building",function(){function t(){this.pop=0,this.size=1,this.type=0,this.index=0,this.isManzu=!1,this.des="无"}t.getIns=function(){return new t};var i=t.prototype;return i.setName=function(t){return this.name=t,this},i.setPos=function(t){return this.pos=t,this},i.setSize=function(t){return this.size=t,this},i.setPop=function(t){return this.pop=t,this},i.setType=function(t){return this.type=t,this},i.setIndex=function(t){return this.index=t,this},i.setIsManzu=function(t){return this.isManzu=t,this},t}()),t("PeopleData",function(){function t(){this.age=200,this.color=e.BLACK,this.story="无",this.isManzu=!1,this.deadTime=300,this.xg=2,this.nz=50,this.ts=50,this.zs=50,this.wl=50,this.bb=0,this.qb=0,this.sb=0,this.gb=0}t.getIns=function(){return new t};var i=t.prototype;return i.getAverageAbility=function(){return Math.round((this.ts+this.wl+this.zs+this.nz)/4)},i.setName=function(t){return this.name=t,this},i.setHome=function(t){return this.home=t,this},i.setParent=function(t){return this.parent=t,this},i.setStroy=function(t){return this.story=t,this},i.setIsManzu=function(t){return this.isManzu=t,this},i.setAge=function(t){return this.age=t,this},i.setNZ=function(t){return this.nz=t,this},i.setXG=function(t){return this.xg=t,this},i.setTS=function(t){return this.ts=t,this},i.setBB=function(t){return this.bb=t,this},i.setQB=function(t){return this.qb=t,this},i.setGB=function(t){return this.gb=t,this},i.setSB=function(t){return this.sb=t,this},i.setZS=function(t){return this.zs=t,this},i.setWL=function(t){return this.wl=t,this},i.setColor=function(t){return this.color=t,this},i.setDeadTime=function(t){return this.deadTime=t,this},t}()),t("CunDang",function(){function t(){this.index=0,this.logs=[],this.name="",this.tag="",this.year=0,this.month=0,this.xun=0,this.hasHanXianDi=!0,this.playerId="",this.kingdoms=[],this.entities=[],this.peoples=[],this.relationships=new Map,this.treatys=new Map,this.solt="cache_0"}return t.getStr=function(t){var i=t.month+"月",n="建安"+(t.year-196)+"年",e="上旬 ";switch(t.xun){case 1:e="上旬 ";break;case 2:e="中旬 ";break;case 3:e="下旬 ";break;default:e="上旬 "}return t.playerId+" "+n+i+e},t}()),t("Kingdom",function(){function t(){this.entities=[],this.kingId="",this.money=1e3,this.credit=100,this.index=0}t.getIns=function(){return new t};var i=t.prototype;return i.setKingId=function(t){return this.kingId=t,this},i.setMoney=function(t){return this.money=t,this},i.setCredit=function(t){return this.credit=t,this},i.setEntities=function(t){return this.entities=t,this},i.setIndex=function(t){return this.index=t,this},t}()),t("People",function(){function t(){this.name="",this.loyal=100,this.health=100,this.juewei=0,this.isDead=!1,this.now=""}t.getIns=function(){return new t};var i=t.prototype;return i.setName=function(t){return this.name=t,this},i.setNow=function(t){return this.now=t,this},i.setLoyal=function(t){return this.loyal=t,this},i.setHealth=function(t){return this.health=t,this},i.setIsDead=function(t){return this.isDead=t,this},i.setJuewei=function(t){return this.juewei=t,this},t}()),t("Order",(function(){this.homeId="",this.id="",this.tragetId="",this.peoples=[],this.pos=[],this.armyType=0,this.orderType=0,this.food=0,this.troops=0,this.tragetPeople=""}));!function(t){t[t.bb=0]="bb",t[t.qb=1]="qb",t[t.gb=2]="gb",t[t.sb=3]="sb"}(a||(a=t("ArmyType",{}))),function(t){t[t.attack=0]="attack",t[t.stay=1]="stay",t[t.join=2]="join",t[t.find=3]="find",t[t.maifu=4]="maifu",t[t.lijian=5]="lijian",t[t.yihe=6]="yihe",t[t.liuyan=7]="liuyan",t[t.xirao=8]="xirao",t[t.yidong=9]="yidong"}(r||(r=t("OrderType",{}))),function(t){t[t.train=0]="train",t[t.sell=1]="sell",t[t.buy=2]="buy",t[t.patrol=3]="patrol",t[t.zhengbing=4]="zhengbing",t[t.repair=5]="repair",t[t.kaikeng=6]="kaikeng",t[t.quanxiang=7]="quanxiang",t[t.caolian=8]="caolian"}(o||(o=t("TaskType",{})));var u,h,c,y,f;t("Task",(function(){this.people="",this.type=0,this.traget="",this.num=0,this.homeId="",this.armyType=a.qb})),t("Act",(function(){}));!function(t){t[t.team=0]="team",t[t.city=1]="city",t[t.gate=2]="gate",t[t.port=3]="port",t[t.army=4]="army"}(u||(u=t("EntityType",{}))),function(t){t[t.stop=0]="stop",t[t.ai=1]="ai",t[t.go=2]="go",t[t.pause=3]="pause"}(h||(h=t("GameStatus",{}))),function(t){t[t.jiang_shang=0]="jiang_shang",t[t.liu_fang=1]="liu_fang",t[t.jue_wei=2]="jue_wei",t[t.chu_jue=3]="chu_jue"}(c||(c=t("ActType",{}))),function(t){t[t["无"]=0]="无",t[t["亭侯"]=1]="亭侯",t[t["乡侯"]=2]="乡侯",t[t["县侯"]=3]="县侯",t[t["列侯"]=4]="列侯",t[t["公"]=5]="公"}(y||(y=t("JueType",{}))),function(t){t[t["普通消息"]=0]="普通消息",t[t["势力灭亡"]=1]="势力灭亡",t[t["攻陷设施"]=2]="攻陷设施",t[t["设施叛立"]=3]="设施叛立",t[t["武将叛逃"]=4]="武将叛逃",t[t["部队暴击"]=5]="部队暴击",t[t["回合开始"]=6]="回合开始",t[t["执行成功"]=7]="执行成功",t[t["执行失败"]=8]="执行失败",t[t["势力建立"]=9]="势力建立",t[t["武将投奔"]=10]="武将投奔",t[t["武将死亡"]=11]="武将死亡",t[t["登用成功"]=12]="登用成功"}(f||(f=t("InfomationType",{})));t("TypeGeter",function(){function t(){}return t.getJueType=function(t){var i="无";switch(t){case y.无:i="无";break;case y.亭侯:i="亭侯";break;case y.乡侯:i="乡侯";break;case y.县侯:i="县侯";break;case y.列侯:i="列侯";break;case y.公:i="公"}return i},t.getActType=function(t){var i="未知";switch(t){case c.chu_jue:i="处决";break;case c.jiang_shang:i="奖赏";break;case c.jue_wei:i="封爵";break;case c.liu_fang:i="流放"}return i},t.getEntityType=function(t){var i="未知";switch(t){case u.army:i="部队";break;case u.city:i="城市";break;case u.port:i="港口";break;case u.gate:i="关隘";break;case u.team:i="团队"}return i},t.getArmyType=function(t){var i="未知";switch(t){case a.qb:i="骑兵";break;case a.bb:i="步兵";break;case a.sb:i="水兵";break;case a.gb:i="工兵"}return i},t.getOrderType=function(t){var i="未知";switch(t){case r.attack:i="攻击";break;case r.find:i="探索";break;case r.join:i="运输";break;case r.lijian:i="离间";break;case r.liuyan:i="流言";break;case r.maifu:i="埋伏";break;case r.stay:i="驻扎";break;case r.xirao:i="袭扰";break;case r.yidong:i="移动";break;case r.yihe:i="议和"}return i},t.getTaskType=function(t){var i="未知";switch(t){case o.buy:i="买进";break;case o.caolian:i="操练";break;case o.kaikeng:i="开垦";break;case o.patrol:i="巡视";break;case o.quanxiang:i="劝降";break;case o.repair:i="修缮";break;case o.sell:i="卖出";break;case o.train:i="训练";break;case o.zhengbing:i="征兵"}return i},t}());var b=t("OD",(function(){}));b.build_army_mini_food=500,b.build_army_mini_bingli=500,b.zhengbing_money_cost=100,b.zhengbing_mini_bingyi=500,b.xunlian_100_money_cost=50,b.xunlian_mini_bubing=100,b.xunshi_money_cost=100,b.kaikeng_money_cost=200,b.xiushan_money_cost=100,b.xirao_money_cost=100,b.xirao_mini_bubing=200,b.lijian_money_cost=100,b.lijian_mini_bubing=50,b.liuyan_money_cost=100,b.liuyan_mini_bubing=50,b.yidong_mini_bubing=50,b.maifu_money_cost=200,b.maifu_mini_bubing=500,b.jiangli_money_cost=100,b.tansuo_mini_bubing=50,b.tansuo_money_cost=100,b.juewei_money_cost=100,b.caolian_money_cost=100,b.yihe_mini_bubing=50,i._RF.pop()}}}));

System.register("chunks:///_virtual/DataIniter.ts",["./rollupPluginModLoBabelHelpers.js","cc","./DataControler.ts","./GameHelper.ts"],(function(s){"use strict";var e,t,B,S,g,p,G,Z,n,I;return{setters:[function(s){e=s.createForOfIteratorHelperLoose},function(s){t=s.cclegacy,B=s._decorator,S=s.Color},function(s){g=s.Building,p=s.PeopleData,G=s.DataControler,Z=s.TypeGeter,n=s.ArmyType},function(s){I=s.default}],execute:function(){var T;t._RF.push({},"9bf7finSU9CJLGC6hBbpEGE","DataIniter",void 0);var A=B.ccclass;B.property,s("DataIniter",A("DataIniter")(T=function(){function s(){}return s.initData=function(s){s.tips=[],s.tips.push("选择内政高的武将征兵会有更好的效果哦"),s.tips.push("选择智商高的武将离间会有更好的效果哦"),s.tips.push("可以赠与金钱和蛮族交好,他就不会和你做对啦"),s.tips.push("注意观察情报,某些势力的武将和主公貌合神离"),s.tips.push("埋伏在山谷或树林附近可以增大对敌方的伤害"),s.tips.push("选择能力强的武将巡视城市会有更好的效果哦"),s.tips.push("尽量不要劳师远征,粮草补给困难"),s.tips.push("太靠近其他势力的设施行军,对方会误以为攻击而出兵反击"),s.tips.push("蛮族势力是不会占据城池的,可以在他们完成进攻后捡漏"),s.tips.push("突发灾害必须是否救助必须权衡,如果武将没有能力会浪费赈灾钱粮"),s.tips.push("长按命令弹窗的命令按钮会弹出该命令的细节说明"),s.tips.push("控制洛阳城就可以给手下武将赐爵来提升忠诚度"),s.tips.push("如果和某势力缔结停战协议一年内开战会大幅降低信望"),s.tips.push("可以选择议和来和某方势力缔结为期[一年]的停战条约"),s.tips.push("如果能派得力的武将巡视会有意外收益哦"),s.tipIndex=I.getRandom(0,s.tips.length-1),s.bds=new Map,s.bds.set("洛阳",g.getIns().setPop(60).setSize(3).setType(1).setPos([38,73])),s.bds.set("长安",g.getIns().setPop(60).setSize(3).setType(1).setPos([28,73])),s.bds.set("许都",g.getIns().setPop(60).setSize(3).setType(1).setPos([42,59])),s.bds.set("宛城",g.getIns().setPop(40).setSize(2).setType(1).setPos([36,64])),s.bds.set("陈留",g.getIns().setPop(40).setSize(2).setType(1).setPos([52,70])),s.bds.set("蓟城",g.getIns().setPop(20).setSize(1).setType(1).setPos([59,98])),s.bds.set("襄平",g.getIns().setPop(20).setSize(1).setType(1).setPos([87,96])),s.bds.set("北平",g.getIns().setPop(20).setSize(1).setType(1).setPos([77,94])),s.bds.set("南皮",g.getIns().setPop(20).setSize(1).setType(1).setPos([78,87])),s.bds.set("晋阳",g.getIns().setPop(20).setSize(1).setType(1).setPos([38,95])),s.bds.set("平原",g.getIns().setPop(20).setSize(1).setType(1).setPos([70,79])),s.bds.set("上党",g.getIns().setPop(20).setSize(2).setType(1).setPos([37,84])),s.bds.set("邺城",g.getIns().setPop(50).setSize(2).setType(1).setPos([51,88])),s.bds.set("濮阳",g.getIns().setPop(50).setSize(2).setType(1).setPos([50,77])),s.bds.set("下邳",g.getIns().setPop(50).setSize(2).setType(1).setPos([75,63])),s.bds.set("小沛",g.getIns().setPop(50).setSize(1).setType(1).setPos([69,69])),s.bds.set("北海",g.getIns().setPop(50).setSize(2).setType(1).setPos([85,76])),s.bds.set("汝南",g.getIns().setPop(50).setSize(2).setType(1).setPos([51,59])),s.bds.set("寿春",g.getIns().setPop(50).setSize(2).setType(1).setPos([68,52])),s.bds.set("南蛮",g.getIns().setPop(50).setSize(2).setType(1).setPos([6,1]).setIsManzu(!0)),s.bds.set("乌丸",g.getIns().setPop(50).setSize(2).setType(1).setPos([71,98]).setIsManzu(!0)),s.bds.set("山越",g.getIns().setPop(50).setSize(1).setType(1).setPos([91,9]).setIsManzu(!0)),s.bds.set("羌戎",g.getIns().setPop(50).setSize(2).setType(1).setPos([1,74]).setIsManzu(!0)),s.bds.set("倭国",g.getIns().setPop(50).setSize(1).setType(1).setPos([98,68]).setIsManzu(!0)),s.bds.set("会稽",g.getIns().setPop(50).setSize(2).setType(1).setPos([91,30])),s.bds.set("吴郡",g.getIns().setPop(50).setSize(2).setType(1).setPos([91,39])),s.bds.set("秣陵",g.getIns().setPop(50).setSize(3).setType(1).setPos([83,37])),s.bds.set("柴桑",g.getIns().setPop(50).setSize(2).setType(1).setPos([68,26])),s.bds.set("庐江",g.getIns().setPop(50).setSize(2).setType(1).setPos([66,39])),s.bds.set("武威",g.getIns().setPop(50).setSize(1).setType(1).setPos([2,97])),s.bds.set("西平",g.getIns().setPop(50).setSize(1).setType(1).setPos([1,86])),s.bds.set("安定",g.getIns().setPop(50).setSize(2).setType(1).setPos([27,82])),s.bds.set("天水",g.getIns().setPop(50).setSize(1).setType(1).setPos([9,70])),s.bds.set("汉中",g.getIns().setPop(50).setSize(2).setType(1).setPos([11,58])),s.bds.set("襄阳",g.getIns().setPop(50).setSize(2).setType(1).setPos([41,41])),s.bds.set("新野",g.getIns().setPop(50).setSize(1).setType(1).setPos([41,48])),s.bds.set("西城",g.getIns().setPop(50).setSize(1).setType(1).setPos([25,50])),s.bds.set("江夏",g.getIns().setPop(50).setSize(2).setType(1).setPos([55,44])),s.bds.set("江陵",g.getIns().setPop(50).setSize(2).setType(1).setPos([47,26])),s.bds.set("交趾",g.getIns().setPop(50).setSize(1).setType(1).setPos([27,2])),s.bds.set("长沙",g.getIns().setPop(50).setSize(2).setType(1).setPos([57,15])),s.bds.set("零陵",g.getIns().setPop(50).setSize(1).setType(1).setPos([42,7])),s.bds.set("武陵",g.getIns().setPop(50).setSize(1).setType(1).setPos([41,15])),s.bds.set("贵阳",g.getIns().setPop(50).setSize(1).setType(1).setPos([58,7])),s.bds.set("成都",g.getIns().setPop(50).setSize(3).setType(1).setPos([2,27])),s.bds.set("云南",g.getIns().setPop(50).setSize(1).setType(1).setPos([2,11])),s.bds.set("建宁",g.getIns().setPop(50).setSize(1).setType(1).setPos([12,10])),s.bds.set("江州",g.getIns().setPop(50).setSize(2).setType(1).setPos([11,23])),s.bds.set("永安",g.getIns().setPop(50).setSize(2).setType(1).setPos([21,28])),s.bds.set("梓潼",g.getIns().setPop(50).setSize(1).setType(1).setPos([11,37])),s.bds.set("乐陵港",g.getIns().setType(2).setPos([81,85,82,85])),s.bds.set("高唐港",g.getIns().setType(2).setPos([67,79,67,78])),s.bds.set("安德港",g.getIns().setType(2).setPos([74,78,74,77])),s.bds.set("壶关",g.getIns().setType(3).setPos([42,87,42,86])),s.bds.set("临淄港",g.getIns().setType(2).setPos([77,74,77,75])),s.bds.set("东阿港",g.getIns().setType(2).setPos([54,79,54,80])),s.bds.set("广陵港",g.getIns().setType(2).setPos([86,52,86,51])),s.bds.set("平阳港",g.getIns().setType(2).setPos([34,81,33,81])),s.bds.set("官渡港",g.getIns().setType(2).setPos([45,78,45,79])),s.bds.set("虎牢关",g.getIns().setType(3).setPos([42,72,42,73])),s.bds.set("孟津港",g.getIns().setType(2).setPos([35,75,35,76])),s.bds.set("潼关",g.getIns().setType(3).setPos([32,72,32,71])),s.bds.set("武关",g.getIns().setType(3).setPos([32,65,32,64])),s.bds.set("乌江港",g.getIns().setType(2).setPos([78,46,79,46])),s.bds.set("阜宁港",g.getIns().setType(2).setPos([79,35,78,35])),s.bds.set("湖阳港",g.getIns().setType(2).setPos([44,47,44,46])),s.bds.set("隆中港",g.getIns().setType(2).setPos([38,43,38,44])),s.bds.set("汉津港",g.getIns().setType(2).setPos([55,36,55,37])),s.bds.set("对马港",g.getIns().setType(2).setPos([96,71,95,71])),s.bds.set("乌林港",g.getIns().setType(2).setPos([58,24,59,24])),s.bds.set("江津港",g.getIns().setType(2).setPos([51,23,51,22])),s.bds.set("公安港",g.getIns().setType(2).setPos([50,17,50,18])),s.bds.set("夏口港",g.getIns().setType(2).setPos([57,41,57,40])),s.bds.set("上庸港",g.getIns().setType(2).setPos([30,44,30,45])),s.bds.set("安阳港",g.getIns().setType(2).setPos([28,49,28,48])),s.bds.set("巫县港",g.getIns().setType(2).setPos([24,26,24,25])),s.bds.set("阳平关",g.getIns().setType(3).setPos([10,61,11,61])),s.bds.set("霞萌关",g.getIns().setType(3).setPos([10,45,11,45])),s.bds.set("剑阁关",g.getIns().setType(3).setPos([10,40,11,40])),s.bds.set("涪水关",g.getIns().setType(3).setPos([5,28,5,27])),s.bds.set("东莱港",g.getIns().setType(2).setPos([88,78,88,79])),s.bds.set("安平港",g.getIns().setType(2).setPos([89,87,89,86])),s.bds.set("带方港",g.getIns().setType(2).setPos([97,85,96,85])),s.bds.set("东武港",g.getIns().setType(2).setPos([82,71,83,71])),s.bds.set("鄱阳港",g.getIns().setType(2).setPos([77,18,76,18])),s.bds.set("河东港",g.getIns().setType(2).setPos([29,79,30,79])),s.bds.set("白马港",g.getIns().setType(2).setPos([50,84,50,83])),s.bds.set("曲阿港",g.getIns().setType(2).setPos([90,43,90,44])),s.bds.set("章安港",g.getIns().setType(2).setPos([94,28,95,28])),s.bds.set("九江港",g.getIns().setType(2).setPos([71,28,71,29])),s.bds.set("陆口港",g.getIns().setType(2).setPos([64,24,63,24])),s.bds.set("浔阳港",g.getIns().setType(2).setPos([68,36,68,35])),s.cacheRelationship=new Map,s.cacheRelationship.set("刘备关羽",10),s.cacheRelationship.set("张飞关羽",10),s.cacheRelationship.set("刘备张飞",10),s.pps=new Map;var t=null;(t=p.getIns().setTS(80).setWL(76).setZS(72).setNZ(57)).setAge(158),s.pps.set("于禁",t.setXG(3).setBB(2).setGB(2).setQB(4).setSB(0)),(t=p.getIns().setTS(81).setWL(83).setZS(39).setNZ(38).setIsManzu(!0)).setAge(180),s.pps.set("山越大王",t.setXG(2).setBB(4).setGB(1).setQB(0).setSB(3)),(t=p.getIns().setTS(71).setWL(76).setZS(31).setNZ(22).setIsManzu(!0)).setAge(180),s.pps.set("山越武将",t.setXG(1).setBB(3).setGB(1).setQB(0).setSB(2)),(t=p.getIns().setTS(70).setWL(66).setZS(72).setNZ(64)).setAge(154),s.pps.set("公孙度",t.setXG(2).setBB(0).setGB(2).setQB(2).setSB(0)),(t=p.getIns().setTS(39).setWL(20).setZS(67).setNZ(58).setParent("公孙度")).setAge(173),s.pps.set("公孙恭",t.setXG(4).setBB(0).setGB(1).setQB(0).setSB(0)),(t=p.getIns().setTS(71).setWL(64).setZS(71).setNZ(68).setParent("公孙度")).setAge(171),s.pps.set("公孙康",t.setXG(3).setBB(0).setGB(0).setQB(1).setSB(0)),(t=p.getIns().setTS(57).setWL(68).setZS(64).setNZ(45)).setAge(168),s.pps.set("卞喜",t.setXG(1).setBB(0).setGB(1).setQB(0).setSB(0)),(t=p.getIns().setTS(79).setWL(93).setZS(62).setNZ(56)).setAge(165),s.pps.set("太史慈",t.setXG(1).setBB(1).setGB(0).setQB(4).setSB(2)),(t=p.getIns().setTS(23).setWL(7).setZS(71).setNZ(66)).setAge(152),s.pps.set("孔融",t.setXG(4).setBB(0).setGB(0).setQB(0).setSB(0)),(t=p.getIns().setTS(82).setWL(95).setZS(25).setNZ(24)).setAge(160),s.pps.set("文丑",t.setXG(1).setBB(2).setGB(0).setQB(4).setSB(0)),(t=p.getIns().setTS(60).setWL(41).setZS(64).setNZ(86)).setAge(160),s.pps.set("毛介",t.setXG(3).setBB(2).setGB(0).setQB(0).setSB(0)),(t=p.getIns().setTS(59).setWL(36).setZS(77).setNZ(78)).setAge(177),s.pps.set("王甫",t.setXG(1).setBB(0).setGB(0).setQB(0).setSB(0)),(t=p.getIns().setTS(45).setWL(58).setZS(23).setNZ(25)).setAge(151),s.pps.set("王忠",t.setXG(4).setBB(1).setGB(0).setQB(0).setSB(0)),(t=p.getIns().setTS(66).setWL(69).setZS(37).setNZ(36)).setAge(161),s.pps.set("王门",t.setXG(1).setBB(0).setGB(0).setQB(1).setSB(0)),(t=p.getIns().setTS(65).setWL(70).setZS(55).setNZ(49)).setAge(162),s.pps.set("王威",t.setXG(1).setBB(2).setGB(0).setQB(0).setSB(2)),(t=p.getIns().setTS(42).setWL(65).setZS(73).setNZ(78)).setAge(167),s.pps.set("王修",t.setXG(2).setBB(0).setGB(1).setQB(0).setSB(0)),(t=p.getIns().setTS(43).setWL(37).setZS(72).setNZ(85)).setAge(161),s.pps.set("王朗",t.setXG(2).setBB(0).setGB(0).setQB(0).setSB(0)),(t=p.getIns().setTS(29).setWL(31).setZS(79).setNZ(81)).setAge(172),s.pps.set("王累",t.setXG(2).setBB(0).setGB(0).setQB(0).setSB(0)),(t=p.getIns().setTS(7).setWL(3).setZS(83).setNZ(85)).setAge(176),s.pps.set("王粲",t.setXG(4).setBB(0).setGB(0).setQB(0).setSB(0)),(t=p.getIns().setTS(17).setWL(28).setZS(70).setNZ(79)).setAge(170),s.pps.set("司马朗",t.setXG(4).setBB(0).setGB(0).setQB(0).setSB(0)),(t=p.getIns().setTS(87).setWL(94).setZS(78).setNZ(13)).setAge(162),s.pps.set("甘宁",t.setXG(2).setBB(5).setGB(3).setQB(0).setSB(5)),(t=p.getIns().setTS(76).setWL(71).setZS(78).setNZ(74)).setAge(174),s.pps.set("田豫",t.setXG(3).setBB(0).setGB(2).setQB(2).setSB(0)),(t=p.getIns().setTS(58).setWL(39).setZS(98).setNZ(93)).setAge(161),s.pps.set("田丰",t.setXG(2).setBB(0).setGB(2).setQB(0).setSB(0)),(t=p.getIns().setTS(68).setWL(66).setZS(74).setNZ(78)).setAge(168),s.pps.set("田畴",t.setXG(3).setBB(0).setGB(0).setQB(0).setSB(0)),(t=p.getIns().setTS(25).setWL(24).setZS(76).setNZ(87)).setAge(161),s.pps.set("伊籍",t.setXG(3).setBB(0).setGB(0).setQB(0).setSB(1)),(t=p.getIns().setTS(28).setWL(18).setZS(73).setNZ(75)).setAge(166),s.pps.set("向朗",t.setXG(3).setBB(0).setGB(0).setQB(0).setSB(0)),(t=p.getIns().setTS(74).setWL(70).setZS(38).setNZ(56)).setAge(167),s.pps.set("成宜",t.setXG(2).setBB(0).setGB(1).setQB(4).setSB(0)),(t=p.getIns().setTS(70).setWL(58).setZS(73).setNZ(75)).setAge(155),s.pps.set("朱治",t.setXG(3).setBB(1).setGB(0).setQB(0).setSB(3)),(t=p.getIns().setTS(82).setWL(70).setZS(65).setNZ(62).setParent("朱治")).setAge(181),s.pps.set("朱然",t.setXG(2).setBB(2).setGB(1).setQB(0).setSB(5)),(t=p.getIns().setTS(74).setWL(73).setZS(66).setNZ(50)).setAge(169),s.pps.set("朱云",t.setXG(3).setBB(0).setGB(1).setQB(3).setSB(0)),(t=p.getIns().setTS(41).setWL(21).setZS(24).setNZ(59)).setAge(150),s.pps.set("吴巨",t.setXG(4).setBB(1).setGB(0).setQB(0).setSB(0)),(t=p.getIns().setTS(73).setWL(72).setZS(53).setNZ(48)).setAge(170),s.pps.set("吴班",t.setXG(2).setBB(2).setGB(1).setQB(0).setSB(0)),(t=p.getIns().setTS(69).setWL(76).setZS(38).setNZ(34)).setAge(169),s.pps.set("吴澜",t.setXG(1).setBB(2).setGB(1).setQB(2).setSB(0)),(t=p.getIns().setTS(80).setWL(70).setZS(72).setNZ(71)).setAge(165),s.pps.set("吴懿",t.setXG(3).setBB(3).setGB(2).setQB(0).setSB(0)),(t=p.getIns().setTS(64).setWL(66).setZS(32).setNZ(38)).setAge(168),s.pps.set("吕威璜",t.setXG(3).setBB(0).setGB(0).setQB(2).setSB(0)),(t=p.getIns().setTS(45).setWL(72).setZS(62).setNZ(71)).setAge(172),s.pps.set("吕虔",t.setXG(2).setBB(0).setGB(2).setQB(0).setSB(0)),(t=p.getIns().setTS(61).setWL(68).setZS(62).setNZ(71)).setAge(163),s.pps.set("吕翔",t.setXG(4).setBB(0).setGB(0).setQB(1).setSB(0)),(t=p.getIns().setTS(93).setWL(80).setZS(40).setNZ(49)).setAge(177),s.pps.set("吕蒙",t.setXG(2).setBB(4).setGB(4).setQB(2).setSB(5)),(t=p.getIns().setTS(74).setWL(61).setZS(73).setNZ(74)).setAge(168),s.pps.set("吕范",t.setXG(2).setBB(0).setGB(0).setQB(0).setSB(4)),(t=p.getIns().setTS(64).setWL(64).setZS(14).setNZ(28)).setAge(161),s.pps.set("吕旷",t.setXG(1).setBB(0).setGB(0).setQB(1).setSB(0)),(t=p.getIns().setTS(68).setWL(76).setZS(41).setNZ(36)).setAge(156),s.pps.set("宋宪",t.setXG(1).setBB(0).setGB(2).setQB(3).setSB(0)),(t=p.getIns().setTS(66).setWL(75).setZS(47).setNZ(39)).setAge(174),s.pps.set("宋谦",t.setXG(2).setBB(0).setGB(1).setQB(2).setSB(2)),(t=p.getIns().setTS(77).setWL(78).setZS(78).setNZ(71)).setAge(173),s.pps.set("李典",t.setXG(3).setBB(3).setGB(2).setQB(3).setSB(0)),(t=p.getIns().setTS(72).setWL(81).setZS(48).setNZ(54)).setAge(167),s.pps.set("李通",t.setXG(1).setBB(0).setGB(1).setQB(3).setSB(1)),(t=p.getIns().setTS(62).setWL(70).setZS(32).setNZ(38)).setAge(175),s.pps.set("李堪",t.setXG(4).setBB(0).setGB(1).setQB(3).setSB(0)),(t=p.getIns().setTS(32).setWL(23).setZS(80).setNZ(84)).setAge(170),s.pps.set("辛比",t.setXG(3).setBB(0).setGB(0).setQB(0).setSB(0)),(t=p.getIns().setTS(74).setWL(46).setZS(72).setNZ(74)).setAge(164),s.pps.set("辛评",t.setXG(3).setBB(2).setGB(1).setQB(0).setSB(0)),(t=p.getIns().setTS(55).setWL(72).setZS(36).setNZ(27).setParent("典韦")).setAge(180),s.pps.set("典满",t.setXG(1).setBB(1).setGB(0).setQB(1).setSB(0)),(t=p.getIns().setTS(66).setWL(83).setZS(56).setNZ(39)).setAge(163),s.pps.set("周仓",t.setXG(2).setBB(2).setGB(1).setQB(0).setSB(2)),(t=p.getIns().setTS(81).setWL(93).setZS(48).setNZ(33)).setAge(169),s.pps.set("周泰",t.setXG(2).setBB(4).setGB(2).setQB(2).setSB(4)),(t=p.getIns().setTS(98).setWL(71).setZS(97).setNZ(71)).setAge(174),s.pps.set("周瑜",t.setXG(3).setBB(4).setGB(0).setQB(0).setSB(6)),(t=p.getIns().setTS(72).setWL(74).setZS(78).setNZ(65)).setAge(171),s.pps.set("孟达",t.setXG(2).setBB(2).setGB(0).setQB(0).setSB(0)),(t=p.getIns().setTS(81).setWL(48).setZS(96).setNZ(76)).setAge(175),s.pps.set("法正",t.setXG(3).setBB(1).setGB(3).setQB(0).setSB(0)),(t=p.getIns().setTS(79).setWL(31).setZS(96).setNZ(95)).setAge(155),s.pps.set("沮授",t.setXG(3).setBB(0).setGB(2).setQB(0).setSB(0)),(t=p.getIns().setTS(66).setWL(48).setZS(68).setNZ(67).setParent("沮授")).setAge(183),s.pps.set("沮鹄",t.setXG(3).setBB(0).setGB(3).setQB(0).setSB(0)),(t=p.getIns().setTS(82).setWL(70).setZS(36).setNZ(51).setIsManzu(!0)).setAge(179),s.pps.set("羌大王",t.setXG(2).setBB(0).setGB(1).setQB(4).setSB(0)),(t=p.getIns().setTS(79).setWL(71).setZS(33).setNZ(46).setIsManzu(!0)).setAge(179),s.pps.set("羌武将",t.setXG(2).setBB(0).setGB(1).setQB(3).setSB(0)),(t=p.getIns().setTS(44).setWL(65).setZS(22).setNZ(38)).setAge(154),s.pps.set("金旋",t.setXG(1).setBB(0).setGB(0).setQB(1).setSB(0)),(t=p.getIns().setTS(66).setWL(71).setZS(27).setNZ(51)).setAge(174),s.pps.set("侯选",t.setXG(4).setBB(0).setGB(0).setQB(3).setSB(0)),(t=p.getIns().setTS(80).setWL(78).setZS(40).setNZ(43).setIsManzu(!0)).setAge(179),s.pps.set("南蛮大王",t.setXG(2).setBB(4).setGB(1).setQB(0).setSB(0)),(t=p.getIns().setTS(75).setWL(80).setZS(23).setNZ(33).setIsManzu(!0)).setAge(178),s.pps.set("南蛮武将",t.setXG(1).setBB(3).setGB(1).setQB(0).setSB(0)),(t=p.getIns().setTS(31).setWL(76).setZS(56).setNZ(5)).setAge(169),s.pps.set("胡车儿",t.setXG(2).setBB(0).setGB(0).setQB(1).setSB(0)),(t=p.getIns().setTS(76).setWL(79).setZS(40).setNZ(40)).setAge(164),s.pps.set("凌操",t.setXG(1).setBB(3).setGB(2).setQB(2).setSB(3)),(t=p.getIns().setTS(75).setWL(71).setZS(77).setNZ(62)).setAge(184),s.pps.set("夏侯尚",t.setXG(2).setBB(3).setGB(1).setQB(1).setSB(0)),(t=p.getIns().setTS(61).setWL(69).setZS(59).setNZ(51)).setAge(179),s.pps.set("夏侯恩",t.setXG(4).setBB(0).setGB(0).setQB(1).setSB(0)),(t=p.getIns().setTS(90).setWL(92).setZS(64).setNZ(76)).setAge(156),s.pps.set("夏侯敦",t.setXG(1).setBB(5).setGB(0).setQB(3).setSB(0)),(t=p.getIns().setTS(91).setWL(92).setZS(51).setNZ(64)).setAge(162),s.pps.set("夏侯渊",t.setXG(2).setBB(4).setGB(2).setQB(3).setSB(0)),(t=p.getIns().setTS(64).setWL(73).setZS(37).setNZ(44)).setAge(182),s.pps.set("夏侯德",t.setXG(1).setBB(0).setGB(1).setQB(2).setSB(0)),(t=p.getIns().setTS(42).setWL(51).setZS(44).setNZ(64).setParent("孙坚")).setAge(185),s.pps.set("孙匡",t.setXG(4).setBB(0).setGB(0).setQB(0).setSB(3)),(t=p.getIns().setTS(33).setWL(32).setZS(73).setNZ(88)).setAge(164),s.pps.set("孙乾",t.setXG(3).setBB(0).setGB(0).setQB(4).setSB(0)),(t=p.getIns().setTS(105).setWL(95).setZS(75).setNZ(72).setParent("孙坚")).setAge(174),s.pps.set("孙策",t.setXG(2).setBB(6).setGB(2).setQB(0).setSB(5)),(t=p.getIns().setTS(76).setWL(72).setZS(68).setNZ(74).setParent("孙静")).setAge(176),s.pps.set("孙瑜",t.setXG(3).setBB(1).setGB(2).setQB(0).setSB(4)),(t=p.getIns().setTS(62).setWL(42).setZS(70).setNZ(72)).setAge(155),s.pps.set("孙静",t.setXG(3).setBB(1).setGB(0).setQB(0).setSB(3)),(t=p.getIns().setTS(73).setWL(67).setZS(83).setNZ(89).setParent("孙坚")).setAge(181),s.pps.set("孙权",t.setXG(2).setBB(2).setGB(2).setQB(0).setSB(4)),(t=p.getIns().setTS(67).setWL(76).setZS(31).setNZ(24).setParent("孙坚")).setAge(183),s.pps.set("孙翊",t.setXG(1).setBB(3).setGB(1).setQB(2).setSB(3)),(t=p.getIns().setTS(84).setWL(93).setZS(71).setNZ(52)).setAge(168),s.pps.set("徐晃",t.setXG(3).setBB(0).setGB(2).setQB(4).setSB(0)),(t=p.getIns().setTS(84).setWL(78).setZS(38).setNZ(42).setIsManzu(!0)).setAge(177),s.pps.set("乌丸大王",t.setXG(2).setBB(0).setGB(1).setQB(3).setSB(0)),(t=p.getIns().setTS(80).setWL(76).setZS(22).setNZ(39).setIsManzu(!0)).setAge(179),s.pps.set("乌丸武将",t.setXG(1).setBB(0).setGB(1).setQB(2).setSB(0)),(t=p.getIns().setTS(70).setWL(21).setZS(96).setNZ(91)).setAge(156),s.pps.set("荀攸",t.setXG(3).setBB(0).setGB(1).setQB(0).setSB(0)),(t=p.getIns().setTS(20).setWL(24).setZS(79).setNZ(75)).setAge(163),s.pps.set("荀谌",t.setXG(3).setBB(0).setGB(0).setQB(0).setSB(0)),(t=p.getIns().setTS(51).setWL(11).setZS(98).setNZ(101)).setAge(162),s.pps.set("荀或",t.setXG(3).setBB(0).setGB(0).setQB(0).setSB(0)),(t=p.getIns().setTS(62).setWL(73).setZS(44).setNZ(34).setParent("袁绍")).setAge(178),s.pps.set("袁尚",t.setXG(1).setBB(1).setGB(1).setQB(0).setSB(0)),(t=p.getIns().setTS(80).setWL(68).setZS(75).setNZ(77)).setAge(153),s.pps.set("袁绍",t.setXG(2).setBB(3).setGB(4).setQB(0).setSB(0)),(t=p.getIns().setTS(65).setWL(55).setZS(64).setNZ(72).setParent("袁绍")).setAge(175),s.pps.set("袁熙",t.setXG(4).setBB(0).setGB(1).setQB(0).setSB(0)),(t=p.getIns().setTS(58).setWL(70).setZS(27).setNZ(34).setParent("袁绍")).setAge(172),s.pps.set("袁谭",t.setXG(1).setBB(1).setGB(1).setQB(0).setSB(0)),(t=p.getIns().setTS(45).setWL(52).setZS(43).setNZ(54).setParent("袁术")).setAge(176),s.pps.set("袁耀",t.setXG(4).setBB(0).setGB(0).setQB(0).setSB(0)),(t=p.getIns().setTS(70).setWL(71).setZS(43).setNZ(39).setParent("马腾")).setAge(177),s.pps.set("马休",t.setXG(2).setBB(0).setGB(0).setQB(4).setSB(0)),(t=p.getIns().setTS(76).setWL(84).setZS(56).setNZ(52)).setAge(182),s.pps.set("马岱",t.setXG(3).setBB(1).setGB(1).setQB(4).setSB(0)),(t=p.getIns().setTS(63).setWL(73).setZS(21).setNZ(32)).setAge(169),s.pps.set("马玩",t.setXG(1).setBB(0).setGB(0).setQB(3).setSB(0)),(t=p.getIns().setTS(91).setWL(97).setZS(46).setNZ(44).setParent("马腾")).setAge(175),s.pps.set("马超",t.setXG(1).setBB(3).setGB(2).setQB(6).setSB(0)),(t=p.getIns().setTS(81).setWL(80).setZS(49).setNZ(65)).setAge(155),s.pps.set("马腾",t.setXG(2).setBB(3).setGB(1).setQB(5).setSB(0)),(t=p.getIns().setTS(70).setWL(64).setZS(60).setNZ(56).setParent("马腾")).setAge(178),s.pps.set("马铁",t.setXG(3).setBB(0).setGB(0).setQB(4).setSB(0)),(t=p.getIns().setTS(72).setWL(60).setZS(68).setNZ(64)).setAge(169),s.pps.set("高沛",t.setXG(2).setBB(1).setGB(2).setQB(0).setSB(0)),(t=p.getIns().setTS(61).setWL(59).setZS(74).setNZ(81)).setAge(173),s.pps.set("高柔",t.setXG(3).setBB(0).setGB(1).setQB(3).setSB(0)),(t=p.getIns().setTS(71).setWL(65).setZS(55).setNZ(58)).setAge(167),s.pps.set("高干",t.setXG(4).setBB(1).setGB(1).setQB(0).setSB(0)),(t=p.getIns().setTS(73).setWL(78).setZS(65).setNZ(54)).setAge(158),s.pps.set("高览",t.setXG(2).setBB(0).setGB(2).setQB(0).setSB(0)),(t=p.getIns().setTS(23).setWL(59).setZS(70).setNZ(89)).setAge(162),s.pps.set("崔琰",t.setXG(3).setBB(0).setGB(0).setQB(0).setSB(0)),(t=p.getIns().setTS(72).setWL(68).setZS(54).setNZ(64)).setAge(162),s.pps.set("张允",t.setXG(4).setBB(0).setGB(0).setQB(0).setSB(3)),(t=p.getIns().setTS(85).setWL(89).setZS(76).setNZ(62)).setAge(168),s.pps.set("张任",t.setXG(3).setBB(4).setGB(2).setQB(1).setSB(0)),(t=p.getIns().setTS(76).setWL(72).setZS(74).setNZ(77).setParent("张昭")).setAge(177),s.pps.set("张承",t.setXG(2).setBB(2).setGB(0).setQB(4).setSB(0)),(t=p.getIns().setTS(12).setWL(3).setZS(88).setNZ(82)).setAge(169),s.pps.set("张松",t.setXG(4).setBB(0).setGB(0).setQB(0).setSB(0)),(t=p.getIns().setTS(76).setWL(31).setZS(77).setNZ(91)).setAge(169),s.pps.set("张既",t.setXG(3).setBB(0).setGB(0).setQB(0).setSB(0)),(t=p.getIns().setTS(41).setWL(4).setZS(86).setNZ(98)).setAge(155),s.pps.set("张昭",t.setXG(4).setBB(0).setGB(0).setQB(0).setSB(0)),(t=p.getIns().setTS(89).setWL(90).setZS(54).setNZ(53)).setAge(166),s.pps.set("张合",t.setXG(3).setBB(3).setGB(2).setQB(4).setSB(0)),(t=p.getIns().setTS(83).setWL(103).setZS(35).setNZ(22)).setAge(166),s.pps.set("张飞",t.setXG(1).setBB(3).setGB(0).setQB(2).setSB(0)),(t=p.getIns().setTS(68).setWL(65).setZS(42).setNZ(41)).setAge(171),s.pps.set("张卫",t.setXG(2).setBB(1).setGB(1).setQB(0).setSB(0)),(t=p.getIns().setTS(41).setWL(22).setZS(69).setNZ(80)).setAge(162),s.pps.set("张鲁",t.setXG(4).setBB(0).setGB(0).setQB(0).setSB(0)),(t=p.getIns().setTS(72).setWL(71).setZS(46).setNZ(42)).setAge(155),s.pps.set("张勋",t.setXG(2).setBB(2).setGB(1).setQB(0).setSB(1)),(t=p.getIns().setTS(67).setWL(68).setZS(26).setNZ(31)).setAge(177),s.pps.set("张横",t.setXG(1).setBB(0).setGB(1).setQB(3).setSB(0)),(t=p.getIns().setTS(79).setWL(83).setZS(51).setNZ(58)).setAge(152),s.pps.set("张燕",t.setXG(1).setBB(0).setGB(0).setQB(2).setSB(0)),(t=p.getIns().setTS(94).setWL(90).setZS(83).setNZ(72)).setAge(168),s.pps.set("张辽",t.setXG(2).setBB(5).setGB(2).setQB(2).setSB(0)),(t=p.getIns().setTS(82).setWL(72).setZS(62).setNZ(49)).setAge(153),s.pps.set("张绣",t.setXG(2).setBB(0).setGB(2).setQB(5).setSB(0)),(t=p.getIns().setTS(31).setWL(11).setZS(89).setNZ(97)).setAge(152),s.pps.set("张宏",t.setXG(3).setBB(0).setGB(0).setQB(0).setSB(0)),(t=p.getIns().setTS(36).setWL(63).setZS(15).setNZ(1)).setAge(162),s.pps.set("张闻",t.setXG(4).setBB(0).setGB(0).setQB(0).setSB(0)),(t=p.getIns().setTS(86).setWL(88).setZS(42).setNZ(49)).setAge(167),s.pps.set("曹仁",t.setXG(1).setBB(4).setGB(1).setQB(3).setSB(0)),(t=p.getIns().setTS(74).setWL(73).setZS(43).setNZ(42)).setAge(173),s.pps.set("曹休",t.setXG(1).setBB(0).setGB(0).setQB(0).setSB(0)),(t=p.getIns().setTS(80).setWL(81).setZS(40).setNZ(24)).setAge(168),s.pps.set("曹洪",t.setXG(1).setBB(2).setGB(1).setQB(3).setSB(0)),(t=p.getIns().setTS(71).setWL(69).setZS(59).setNZ(49)).setAge(169),s.pps.set("曹纯",t.setXG(2).setBB(2).setGB(0).setQB(3).setSB(0)),(t=p.getIns().setTS(102).setWL(77).setZS(92).setNZ(96)).setAge(154),s.pps.set("曹操",t.setXG(3).setBB(6).setGB(3).setQB(2).setSB(0)),(t=p.getIns().setTS(66).setWL(68).setZS(22).setNZ(26)).setAge(168),s.pps.set("梁兴",t.setXG(1).setBB(0).setGB(0).setQB(3).setSB(0)),(t=p.getIns().setTS(70).setWL(68).setZS(25).setNZ(27)).setAge(145),s.pps.set("淳于琼",t.setXG(4).setBB(0).setGB(0).setQB(1).setSB(0)),(t=p.getIns().setTS(18).setWL(6).setZS(84).setNZ(39)).setAge(154),s.pps.set("许攸",t.setXG(4).setBB(0).setGB(0).setQB(0).setSB(0)),(t=p.getIns().setTS(45).setWL(68).setZS(66).setNZ(64)).setAge(154),s.pps.set("许贡",t.setXG(4).setBB(0).setGB(0).setQB(0).setSB(2)),(t=p.getIns().setTS(13).setWL(13).setZS(74).setNZ(84)).setAge(151),s.pps.set("许靖",t.setXG(4).setBB(0).setGB(0).setQB(0).setSB(0)),(t=p.getIns().setTS(66).setWL(96).setZS(39).setNZ(23)).setAge(169),s.pps.set("许褚",t.setXG(1).setBB(2).setGB(0).setQB(1).setSB(0)),(t=p.getIns().setTS(16).setWL(19).setZS(86).setNZ(72)).setAge(152),s.pps.set("逢纪",t.setXG(4).setBB(0).setGB(0).setQB(0).setSB(0)),(t=p.getIns().setTS(58).setWL(10).setZS(100).setNZ(83)).setAge(169),s.pps.set("郭嘉",t.setXG(3).setBB(0).setGB(2).setQB(0).setSB(0)),(t=p.getIns().setTS(41).setWL(45).setZS(86).setNZ(75)).setAge(154),s.pps.set("郭图",t.setXG(4).setBB(0).setGB(0).setQB(0).setSB(0)),(t=p.getIns().setTS(75).setWL(82).setZS(45).setNZ(37)).setAge(175),s.pps.set("陈武",t.setXG(1).setBB(3).setGB(2).setQB(0).setSB(4)),(t=p.getIns().setTS(21).setWL(5).setZS(84).setNZ(82)).setAge(131),s.pps.set("陈硅",t.setXG(4).setBB(0).setGB(0).setQB(0).setSB(0)),(t=p.getIns().setTS(9).setWL(9).setZS(73).setNZ(82)).setAge(159),s.pps.set("陈琳",t.setXG(3).setBB(0).setGB(0).setQB(0).setSB(0)),(t=p.getIns().setTS(79).setWL(65).setZS(80).setNZ(81).setParent("陈硅")).setAge(168),s.pps.set("陈登",t.setXG(3).setBB(1).setGB(1).setQB(0).setSB(0)),(t=p.getIns().setTS(21).setWL(7).setZS(74).setNZ(97)).setAge(166),s.pps.set("陈群",t.setXG(3).setBB(0).setGB(0).setQB(0).setSB(0)),(t=p.getIns().setTS(46).setWL(48).setZS(70).setNZ(78)).setAge(169),s.pps.set("陈震",t.setXG(3).setBB(0).setGB(0).setQB(0).setSB(0)),(t=p.getIns().setTS(53).setWL(32).setZS(79).setNZ(83)).setAge(174),s.pps.set("陈矫",t.setXG(3).setBB(0).setGB(1).setQB(0).setSB(0)),(t=p.getIns().setTS(67).setWL(72).setZS(56).setNZ(17)).setAge(156),s.pps.set("陈阑",t.setXG(4).setBB(2).setGB(2).setQB(0).setSB(0)),(t=p.getIns().setTS(16).setWL(13).setZS(71).setNZ(72)).setAge(161),s.pps.set("傅异",t.setXG(3).setBB(0).setGB(0).setQB(0).setSB(0)),(t=p.getIns().setTS(70).setWL(55).setZS(94).setNZ(78)).setAge(140),s.pps.set("程昱",t.setXG(2).setBB(1).setGB(0).setQB(0).setSB(0)),(t=p.getIns().setTS(83).setWL(87).setZS(78).setNZ(76)).setAge(150),s.pps.set("程普",t.setXG(2).setBB(3).setGB(1).setQB(2).setSB(4)),(t=p.getIns().setTS(73).setWL(71).setZS(49).setNZ(36)).setAge(168),s.pps.set("程银",t.setXG(1).setBB(0).setGB(0).setQB(3).setSB(0)),(t=p.getIns().setTS(25).setWL(38).setZS(87).setNZ(83)).setAge(156),s.pps.set("华歆",t.setXG(3).setBB(0).setGB(0).setQB(0).setSB(0)),(t=p.getIns().setTS(77).setWL(71).setZS(68).setNZ(70)).setAge(169),s.pps.set("贺齐",t.setXG(2).setBB(3).setGB(3).setQB(0).setSB(4)),(t=p.getIns().setTS(84).setWL(93).setZS(61).setNZ(55)).setAge(147),s.pps.set("黄忠",t.setXG(2).setBB(4).setGB(2).setQB(2).setSB(0)),(t=p.getIns().setTS(70).setWL(68).setZS(50).setNZ(16)).setAge(147),s.pps.set("黄祖",t.setXG(4).setBB(0).setGB(0).setQB(0).setSB(2)),(t=p.getIns().setTS(79).setWL(85).setZS(69).setNZ(65)).setAge(153),s.pps.set("黄盖",t.setXG(2).setBB(2).setGB(1).setQB(0).setSB(4)),(t=p.getIns().setTS(74).setWL(59).setZS(84).setNZ(83)).setAge(166),s.pps.set("黄权",t.setXG(3).setBB(0).setGB(2).setQB(0).setSB(1)),(t=p.getIns().setTS(71).setWL(77).setZS(53).setNZ(45)).setAge(169),s.pps.set("杨任",t.setXG(2).setBB(2).setGB(1).setQB(2).setSB(0)),(t=p.getIns().setTS(66).setWL(70).setZS(34).setNZ(36)).setAge(171),s.pps.set("杨昂",t.setXG(1).setBB(1).setGB(0).setQB(0).setSB(0)),(t=p.getIns().setTS(2).setWL(1).setZS(35).setNZ(32)).setAge(166),s.pps.set("杨松",t.setXG(4).setBB(1).setGB(1).setQB(2).setSB(0)),(t=p.getIns().setTS(38).setWL(46).setZS(12).setNZ(21)).setAge(170),s.pps.set("杨柏",t.setXG(4).setBB(0).setGB(0).setQB(0).setSB(0)),(t=p.getIns().setTS(64).setWL(67).setZS(52).setNZ(63)).setAge(171),s.pps.set("杨秋",t.setXG(4).setBB(0).setGB(1).setQB(3).setSB(0)),(t=p.getIns().setTS(14).setWL(7).setZS(81).setNZ(81)).setAge(174),s.pps.set("杨修",t.setXG(4).setBB(0).setGB(0).setQB(0).setSB(0)),(t=p.getIns().setTS(70).setWL(71).setZS(62).setNZ(57)).setAge(166),s.pps.set("杨怀",t.setXG(2).setBB(2).setGB(2).setQB(0).setSB(0)),(t=p.getIns().setTS(65).setWL(41).setZS(76).setNZ(84)).setAge(167),s.pps.set("董和",t.setXG(3).setBB(0).setGB(0).setQB(0).setSB(0)),(t=p.getIns().setTS(29).setWL(21).setZS(81).setNZ(89)).setAge(155),s.pps.set("董昭",t.setXG(3).setBB(0).setGB(0).setQB(0).setSB(0)),(t=p.getIns().setTS(74).setWL(81).setZS(47).setNZ(39)).setAge(168),s.pps.set("董袭",t.setXG(2).setBB(3).setGB(1).setQB(0).setSB(4)),(t=p.getIns().setTS(37).setWL(48).setZS(85).setNZ(81)).setAge(163),s.pps.set("虞翻",t.setXG(2).setBB(0).setGB(0).setQB(1).setSB(1)),(t=p.getIns().setTS(53).setWL(67).setZS(43).setNZ(32)).setAge(175),s.pps.set("贾华",t.setXG(4).setBB(0).setGB(0).setQB(0).setSB(2)),(t=p.getIns().setTS(81).setWL(34).setZS(98).setNZ(85)).setAge(146),s.pps.set("贾诩",t.setXG(3).setBB(1).setGB(2).setQB(0).setSB(0)),(t=p.getIns().setTS(70).setWL(75).setZS(45).setNZ(42)).setAge(171),s.pps.set("雷铜",t.setXG(2).setBB(2).setGB(1).setQB(2).setSB(0)),(t=p.getIns().setTS(66).setWL(73).setZS(41).setNZ(13)).setAge(159),s.pps.set("雷薄",t.setXG(4).setBB(2).setGB(1).setQB(0).setSB(0)),(t=p.getIns().setTS(79).setWL(53).setZS(80).setNZ(85)).setAge(169),s.pps.set("满宠",t.setXG(1).setBB(3).setGB(2).setQB(1).setSB(0)),(t=p.getIns().setTS(75).setWL(72).setZS(46).setNZ(52)).setAge(164),s.pps.set("臧霸",t.setXG(1).setBB(1).setGB(2).setQB(2).setSB(0)),(t=p.getIns().setTS(56).setWL(67).setZS(26).setNZ(27)).setAge(168),s.pps.set("裴元绍",t.setXG(1).setBB(1).setGB(0).setQB(0).setSB(1)),(t=p.getIns().setTS(88).setWL(96).setZS(78).setNZ(72)).setAge(167),s.pps.set("赵云",t.setXG(2).setBB(3).setGB(1).setQB(5).setSB(0)),(t=p.getIns().setTS(18).setWL(20).setZS(36).setNZ(62)).setAge(167),s.pps.set("赵范",t.setXG(4).setBB(0).setGB(0).setQB(0).setSB(0)),(t=p.getIns().setTS(56).setWL(64).setZS(36).setNZ(68)).setAge(146),s.pps.set("刘岱",t.setXG(4).setBB(0).setGB(1).setQB(2).setSB(0)),(t=p.getIns().setTS(46).setWL(28).setZS(68).setNZ(80)).setAge(141),s.pps.set("刘表",t.setXG(4).setBB(0).setGB(0).setQB(0).setSB(1)),(t=p.getIns().setTS(11).setWL(25).setZS(30).setNZ(48)).setAge(167),s.pps.set("刘度",t.setXG(4).setBB(0).setGB(0).setQB(0).setSB(0)),(t=p.getIns().setTS(75).setWL(77).setZS(73).setNZ(78)).setAge(160),s.pps.set("刘备",t.setXG(2).setBB(3).setGB(2).setQB(1).setSB(0)),(t=p.getIns().setTS(46).setWL(51).setZS(40).setNZ(51).setParent("刘璋")).setAge(183),s.pps.set("刘循",t.setXG(1).setBB(0).setGB(0).setQB(0).setSB(0)),(t=p.getIns().setTS(46).setWL(10).setZS(58).setNZ(74).setParent("刘表")).setAge(173),s.pps.set("刘琦",t.setXG(4).setBB(0).setGB(0).setQB(0).setSB(3)),(t=p.getIns().setTS(73).setWL(70).setZS(43).setNZ(40)).setAge(168),s.pps.set("刘辟",t.setXG(2).setBB(2).setGB(2).setQB(2).setSB(0)),(t=p.getIns().setTS(33).setWL(33).setZS(50).setNZ(53).setParent("刘焉")).setAge(161),s.pps.set("刘璋",t.setXG(4).setBB(0).setGB(0).setQB(0).setSB(0)),(t=p.getIns().setTS(48).setWL(64).setZS(35).setNZ(25)).setAge(162),s.pps.set("刘勋",t.setXG(4).setBB(0).setGB(2).setQB(0).setSB(2)),(t=p.getIns().setTS(36).setWL(68).setZS(89).setNZ(73)).setAge(174),s.pps.set("刘晔",t.setXG(3).setBB(0).setGB(6).setQB(0).setSB(0)),(t=p.getIns().setTS(71).setWL(74).setZS(50).setNZ(43)).setAge(164),s.pps.set("刘贵",t.setXG(2).setBB(2).setGB(0).setQB(0).setSB(0)),(t=p.getIns().setTS(82).setWL(59).setZS(85).setNZ(71)).setAge(155),s.pps.set("审配",t.setXG(3).setBB(3).setGB(2).setQB(0).setSB(0)),(t=p.getIns().setTS(78).setWL(85).setZS(50).setNZ(48)).setAge(158),s.pps.set("乐进",t.setXG(2).setBB(4).setGB(5).setQB(3).setSB(0)),(t=p.getIns().setTS(78).setWL(80).setZS(66).setNZ(21)).setAge(176),s.pps.set("潘璋",t.setXG(2).setBB(3).setGB(2).setQB(2).setSB(4)),(t=p.getIns().setTS(79).setWL(85).setZS(45).setNZ(36)).setAge(167),s.pps.set("蒋钦",t.setXG(1).setBB(3).setGB(0).setQB(2).setSB(4)),(t=p.getIns().setTS(8).setWL(7).setZS(67).setNZ(63)).setAge(174),s.pps.set("蒋干",t.setXG(4).setBB(0).setGB(0).setQB(0).setSB(0)),(t=p.getIns().setTS(66).setWL(64).setZS(52).setNZ(56)).setAge(158),s.pps.set("蒋义渠",t.setXG(2).setBB(0).setGB(0).setQB(0).setSB(0)),(t=p.getIns().setTS(45).setWL(53).setZS(3).setNZ(24)).setAge(167),s.pps.set("蔡中",t.setXG(4).setBB(0).setGB(0).setQB(0).setSB(2)),(t=p.getIns().setTS(42).setWL(50).setZS(3).setNZ(34)).setAge(165),s.pps.set("蔡和",t.setXG(4).setBB(0).setGB(0).setQB(0).setSB(2)),(t=p.getIns().setTS(75).setWL(67).setZS(76).setNZ(77)).setAge(154),s.pps.set("蔡瑁",t.setXG(4).setBB(0).setGB(0).setQB(0).setSB(4)),(t=p.getIns().setTS(90).setWL(57).setZS(93).setNZ(93)).setAge(171),s.pps.set("鲁肃",t.setXG(3).setBB(4).setGB(3).setQB(2).setSB(3)),(t=p.getIns().setTS(32).setWL(27).setZS(83).setNZ(79)).setAge(162),s.pps.set("阎圃",t.setXG(3).setBB(0).setGB(1).setQB(0).setSB(0)),(t=p.getIns().setTS(77).setWL(62).setZS(72).setNZ(68)).setAge(177),s.pps.set("霍峻",t.setXG(3).setBB(2).setGB(3).setQB(0).setSB(0)),(t=p.getIns().setTS(32).setWL(39).setZS(73).setNZ(85)).setAge(164),s.pps.set("糜竺",t.setXG(3).setBB(0).setGB(0).setQB(0).setSB(0)),(t=p.getIns().setTS(55).setWL(56).setZS(31).setNZ(25)).setAge(168),s.pps.set("糜芳",t.setXG(4).setBB(0).setGB(0).setQB(0).setSB(0)),(t=p.getIns().setTS(60).setWL(15).setZS(79).setNZ(97)).setAge(150),s.pps.set("钟繇",t.setXG(3).setBB(0).setGB(0).setQB(0).setSB(0)),(t=p.getIns().setTS(10).setWL(29).setZS(10).setNZ(6)).setAge(162),s.pps.set("韩玄",t.setXG(4).setBB(0).setGB(0).setQB(0).setSB(0)),(t=p.getIns().setTS(62).setWL(71).setZS(69).setNZ(90)).setAge(163),s.pps.set("韩浩",t.setXG(2).setBB(0).setGB(0).setQB(1).setSB(0)),(t=p.getIns().setTS(31).setWL(16).setZS(74).setNZ(76)).setAge(153),s.pps.set("韩嵩",t.setXG(3).setBB(0).setGB(0).setQB(0).setSB(0)),(t=p.getIns().setTS(78).setWL(86).setZS(54).setNZ(56)).setAge(155),s.pps.set("韩当",t.setXG(2).setBB(3).setGB(1).setQB(2).setSB(4)),(t=p.getIns().setTS(84).setWL(70).setZS(73).setNZ(68)).setAge(162),s.pps.set("韩遂",t.setXG(3).setBB(2).setGB(2).setQB(5).setSB(0)),(t=p.getIns().setTS(22).setWL(31).setZS(67).setNZ(74)).setAge(166),s.pps.set("简雍",t.setXG(2).setBB(0).setGB(0).setQB(0).setSB(0)),(t=p.getIns().setTS(83).setWL(95).setZS(45).setNZ(33)).setAge(159),s.pps.set("颜良",t.setXG(1).setBB(2).setGB(0).setQB(4).setSB(0)),(t=p.getIns().setTS(70).setWL(75).setZS(29).setNZ(35)).setAge(155),s.pps.set("魏绩",t.setXG(2).setBB(0).setGB(1).setQB(3).setSB(0)),(t=p.getIns().setTS(75).setWL(94).setZS(72).setNZ(48)).setAge(170),s.pps.set("庞德",t.setXG(2).setBB(2).setGB(2).setQB(4).setSB(1)),(t=p.getIns().setTS(64).setWL(42).setZS(66).setNZ(72)).setAge(152),s.pps.set("庞义",t.setXG(2).setBB(0).setGB(0).setQB(0).setSB(0)),(t=p.getIns().setTS(93).setWL(102).setZS(77).setNZ(64)).setAge(161),s.pps.set("关羽",t.setXG(2).setBB(6).setGB(2).setQB(2).setSB(1)),(t=p.getIns().setTS(77).setWL(82).setZS(69).setNZ(67)).setAge(152),s.pps.set("颜良",t.setXG(2).setBB(3).setGB(2).setQB(0).setSB(0)),(t=p.getIns().setTS(56).setWL(65).setZS(48).setNZ(37)).setAge(163),s.pps.set("苏由",t.setXG(4).setBB(0).setGB(2).setQB(0).setSB(0)),(t=p.getIns().setTS(70).setWL(69).setZS(61).setNZ(58)).setAge(171),s.pps.set("苏飞",t.setXG(3).setBB(0).setGB(0).setQB(4).setSB(0)),(t=p.getIns().setTS(64).setWL(72).setZS(38).setNZ(30)).setAge(163),s.pps.set("龚都",t.setXG(2).setBB(1).setGB(0).setQB(0).setSB(0)),(t=p.getIns().setTS(67).setWL(74).setZS(40).setNZ(7)).setAge(150),s.pps.set("眭固",t.setXG(1).setBB(0).setGB(1).setQB(1).setSB(0)),(t=p.getIns().setTS(69).setWL(36).setZS(90).setNZ(84)).setAge(154),s.pps.set("彭良",t.setXG(3).setBB(0).setGB(2).setQB(0).setSB(2)),(t=p.getIns().setTS(42).setWL(32).setZS(84).setNZ(88)).setAge(156),s.pps.set("彭越",t.setXG(2).setBB(0).setGB(1).setQB(0).setSB(2)),(t=p.getIns().setTS(69).setWL(93).setZS(66).setNZ(19)).setAge(138),s.pps.set("董卓",t.setXG(1).setBB(0).setGB(0).setQB(2).setSB(0)),(t=p.getIns().setTS(106).setWL(94).setZS(77).setNZ(78)).setAge(154),s.pps.set("孙坚",t.setXG(1).setBB(6).setGB(2).setQB(3).setSB(3)),(t=p.getIns().setTS(76).setWL(71).setZS(66).setNZ(40)).setAge(146),s.pps.set("徐荣",t.setXG(1).setBB(0).setGB(1).setQB(3).setSB(0)),(t=p.getIns().setTS(72).setWL(70).setZS(64).setNZ(53)).setAge(154),s.pps.set("祖茂",t.setXG(2).setBB(2).setGB(1).setQB(0).setSB(3)),(t=p.getIns().setTS(61).setWL(43).setZS(71).setNZ(76)).setAge(149),s.pps.set("袁遗",t.setXG(2).setBB(0).setGB(1).setQB(0).setSB(0)),(t=p.getIns().setTS(46).setWL(50).setZS(71).setNZ(74)).setAge(154),s.pps.set("张邈",t.setXG(4).setBB(1).setGB(0).setQB(0).setSB(0)),(t=p.getIns().setTS(72).setWL(60).setZS(65).setNZ(73).setParent("曹操")).setAge(174),s.pps.set("曹昂",t.setXG(2).setBB(2).setGB(0).setQB(1).setSB(0)),(t=p.getIns().setTS(61).setWL(73).setZS(35).setNZ(28)).setAge(150),s.pps.set("曹豹",t.setXG(4).setBB(0).setGB(0).setQB(1).setSB(0)),(t=p.getIns().setTS(63).setWL(74).setZS(18).setNZ(19)).setAge(145),s.pps.set("郭汜",t.setXG(1).setBB(0).setGB(0).setQB(2).setSB(0)),(t=p.getIns().setTS(47).setWL(37).setZS(68).setNZ(57)).setAge(131),s.pps.set("陶谦",t.setXG(4).setBB(0).setGB(0).setQB(0).setSB(0)),(t=p.getIns().setTS(94).setWL(108).setZS(25).setNZ(16)).setAge(155),s.pps.set("吕布",t.setXG(1).setBB(3).setGB(0).setQB(6).setSB(0)),(t=p.getIns().setTS(72).setWL(52).setZS(90).setNZ(82)).setAge(159),s.pps.set("陈宫",t.setXG(3).setBB(1).setGB(2).setQB(0).setSB(0)),(t=p.getIns().setTS(61).setWL(29).setZS(97).setNZ(73)).setAge(149),s.pps.set("李儒",t.setXG(3).setBB(0).setGB(1).setQB(0).setSB(0)),(t=p.getIns().setTS(66).setWL(72).setZS(29).setNZ(3)).setAge(147),s.pps.set("李榷",t.setXG(4).setBB(0).setGB(0).setQB(2).setSB(0)),(t=p.getIns().setTS(24).setWL(7).setZS(75).setNZ(92)).setAge(136),s.pps.set("王允",t.setXG(4).setBB(0).setGB(0).setQB(0).setSB(0)),(t=p.getIns().setTS(32).setWL(60).setZS(20).setNZ(25).setParent("董卓")).setAge(158),s.pps.set("牛辅",t.setXG(4).setBB(0).setGB(0).setQB(1).setSB(0)),(t=p.getIns().setTS(80).setWL(15).setZS(99).setNZ(85)).setAge(176),s.pps.set("庞统",t.setXG(3).setBB(0).setGB(0).setQB(2).setSB(0)),(t=p.getIns().setTS(77).setWL(82).setZS(69).setNZ(56).setParent("关羽")).setAge(186),s.pps.set("关平",t.setXG(3).setBB(3).setGB(1).setQB(3).setSB(0)),(t=p.getIns().setTS(71).setWL(81).setZS(57).setNZ(48).setParent("关羽")).setAge(199),s.pps.set("关索",t.setXG(1).setBB(3).setGB(1).setQB(3).setSB(0)),(t=p.getIns().setTS(76).setWL(86).setZS(60).setNZ(50).setParent("关羽")).setAge(198),s.pps.set("关兴",t.setXG(2).setBB(3).setGB(1).setQB(3).setSB(0)),(t=p.getIns().setTS(39).setWL(48).setZS(33).setNZ(38).setParent("孙坚")).setAge(186),s.pps.set("孙朗",t.setXG(4).setBB(0).setGB(0).setQB(0).setSB(3)),(t=p.getIns().setTS(88).setWL(65).setZS(98).setNZ(32)).setAge(179),s.pps.set("徐庶",t.setXG(3).setBB(4).setGB(2).setQB(1).setSB(1)),(t=p.getIns().setTS(47).setWL(34).setZS(70).setNZ(86)).setAge(170),s.pps.set("徐邈",t.setXG(3).setBB(0).setGB(2).setQB(0).setSB(0)),(t=p.getIns().setTS(85).setWL(79).setZS(84).setNZ(65)).setAge(175),s.pps.set("郝昭",t.setXG(3).setBB(3).setGB(5).setQB(3).setSB(0)),(t=p.getIns().setTS(39).setWL(32).setZS(87).setNZ(93)).setAge(186),s.pps.set("马良",t.setXG(3).setBB(0).setGB(0).setQB(0).setSB(0)),(t=p.getIns().setTS(76).setWL(87).setZS(46).setNZ(49).setParent("张飞")).setAge(197),s.pps.set("张苞",t.setXG(1).setBB(3).setGB(1).setQB(2).setSB(0)),(t=p.getIns().setTS(65).setWL(70).setZS(90).setNZ(93).setParent("曹操")).setAge(186),s.pps.set("曹丕",t.setXG(3).setBB(0).setGB(0).setQB(0).setSB(0)),(t=p.getIns().setTS(88).setWL(91).setZS(44).setNZ(35).setParent("曹操")).setAge(189),s.pps.set("曹彰",t.setXG(1).setBB(1).setGB(2).setQB(5).setSB(0)),(t=p.getIns().setTS(22).setWL(31).setZS(88).setNZ(83).setParent("曹操")).setAge(191),s.pps.set("曹植",t.setXG(3).setBB(0).setGB(0).setQB(0).setSB(0)),(t=p.getIns().setTS(80).setWL(50).setZS(85).setNZ(89).setParent("曹丕")).setAge(204),s.pps.set("曹睿",t.setXG(3).setBB(0).setGB(2).setQB(0).setSB(0)),(t=p.getIns().setTS(83).setWL(71).setZS(67).setNZ(66)).setAge(184),s.pps.set("曹真",t.setXG(2).setBB(3).setGB(1).setQB(3).setSB(0)),(t=p.getIns().setTS(98).setWL(66).setZS(97).setNZ(91)).setAge(182),s.pps.set("陆逊",t.setXG(3).setBB(4).setGB(3).setQB(0).setSB(5)),(t=p.getIns().setTS(75).setWL(76).setZS(67).setNZ(47)).setAge(169),s.pps.set("廖化",t.setXG(1).setBB(3).setGB(2).setQB(2).setSB(0)),(t=p.getIns().setTS(28).setWL(27).setZS(51).setNZ(66)).setAge(188),s.pps.set("诸葛均",t.setXG(3).setBB(0).setGB(0).setQB(0).setSB(0)),(t=p.getIns().setTS(98).setWL(34).setZS(104).setNZ(102)).setAge(180),s.pps.set("诸葛亮",t.setXG(3).setBB(2).setGB(6).setQB(0).setSB(1)),(t=p.getIns().setTS(61).setWL(37).setZS(90).setNZ(78).setParent("诸葛瑾")).setAge(202),s.pps.set("诸葛恪",t.setXG(1).setBB(0).setGB(0).setQB(0).setSB(2)),(t=p.getIns().setTS(74).setWL(33).setZS(81).setNZ(94)).setAge(173),s.pps.set("诸葛瑾",t.setXG(3).setBB(0).setGB(1).setQB(0).setSB(2)),(t=p.getIns().setTS(73).setWL(38).setZS(86).setNZ(95)).setAge(187),s.pps.set("蒋琬",t.setXG(3).setBB(0).setGB(2).setQB(0).setSB(2)),(t=p.getIns().setTS(83).setWL(92).setZS(66).setNZ(35)).setAge(174),s.pps.set("魏延",t.setXG(1).setBB(3).setGB(1).setQB(3).setSB(0)),(t=p.getIns().setTS(77).setWL(82).setZS(69).setNZ(67)).setAge(198),s.pps.set("严颜",t.setXG(2).setBB(3).setGB(2).setQB(0).setSB(0)),(t=p.getIns().setTS(97).setWL(62).setZS(100).setNZ(97)).setAge(178),s.pps.set("司马懿",t.setXG(3).setBB(3).setGB(3).setQB(1).setSB(0)),(t=p.getIns().setTS(67).setWL(23).setZS(78).setNZ(45)).setAge(179).setIsManzu(!0),s.pps.set("倭女王",t.setXG(4).setBB(0).setGB(0).setQB(0).setSB(0)),(t=p.getIns().setTS(56).setWL(79).setZS(56).setNZ(14)).setAge(181).setIsManzu(!0),s.pps.set("倭武将",t.setXG(1).setBB(0).setGB(0).setQB(0).setSB(3));for(var B,G=e(s.pps);!(B=G()).done;){var Z=B.value,n=this.getColorFromName(Z[0]);Z[1].color=new S(n[0],n[1],n[2]),Z[1].name=Z[0]}for(var T,A=0,L=e(s.bds);!(T=L()).done;){var N=T.value;A++,N[1].name=N[0],N[1].setIndex(A)}s.pps.get("曹操").setDeadTime(210).setStroy("曹操,字孟德,小名阿瞒,好人妻..."),s.pps.get("刘备").setDeadTime(210).setStroy("刘备,字玄德,字玄德，涿郡(今河北省涿县)人,汉景帝之子中山靖王刘胜的后代.少年时孤独贫困,与母亲贩鞋子织草席为生,后与关羽张飞于桃园结义为异姓兄弟.剿除黄巾军有功,任安喜县尉.经常寄人篱下,先后投靠过公孙瓒 陶谦 曹操 袁绍 刘表等.建安十二年,徐庶荐举诸葛亮,刘备三顾茅庐请出诸葛亮为军师,率军攻占了荆州 益州 汉中.于公元221年正式称帝,定都成都,国号汉,年号章武,史称蜀汉.在替关羽 张飞报仇时,大举进攻吴国,被东吴陆逊用火攻打败,不久病死于白帝城,享年63岁."),s.pps.get("孙权").setDeadTime(210).setStroy("孙权,字仲谋,孙坚次子,碧眼赤髯,这个长相可能吴国太有故事啊..."),s.pps.get("曹操").color=S.BLUE,s.pps.get("刘备").color=S.GREEN,s.pps.get("孙权").color=S.RED,s.pps.get("孙策").color=s.pps.get("孙权").color,s.pps.get("袁绍").color=S.YELLOW,s.pps.get("刘表").color=S.MAGENTA,s.bds.get("洛阳").des="东汉都城,汉献帝住所,谁掌控此地可以挟天子令诸侯,具体说就是可以借天子名义封爵来通络人心,也会增加人才登用和投奔的概率,可训练兵种:"+this.getBzStrs("洛阳"),s.bds.get("长安").des="隶属于雍州,西北重镇,董卓曾裹挟汉献帝于此,可训练兵种:"+this.getBzStrs("长安"),s.bds.get("许都").des="隶属于豫州,可训练兵种:"+this.getBzStrs("许都"),s.bds.get("宛城").des="隶属于荆州,可训练兵种:"+this.getBzStrs("宛城"),s.bds.get("陈留").des="隶属于兖州,可训练兵种:"+this.getBzStrs("陈留"),s.bds.get("蓟城").des="隶属于幽州,可训练兵种:"+this.getBzStrs("蓟城"),s.bds.get("襄平").des="隶属于幽州,可训练兵种:"+this.getBzStrs("襄平"),s.bds.get("北平").des="隶属于幽州,可训练兵种:"+this.getBzStrs("北平"),s.bds.get("南皮").des="隶属于冀州,可训练兵种:"+this.getBzStrs("南皮"),s.bds.get("晋阳").des="隶属于并州,可训练兵种:"+this.getBzStrs("晋阳"),s.bds.get("平原").des="隶属于冀州,可训练兵种:"+this.getBzStrs("平原"),s.bds.get("上党").des="隶属于并州,可训练兵种:"+this.getBzStrs("上党"),s.bds.get("邺城").des="隶属于冀州,可训练兵种:"+this.getBzStrs("邺城"),s.bds.get("濮阳").des="隶属于兖州,可训练兵种:"+this.getBzStrs("濮阳"),s.bds.get("下邳").des="隶属于徐州,可训练兵种:"+this.getBzStrs("下邳"),s.bds.get("小沛").des="隶属于徐州,可训练兵种:"+this.getBzStrs("小沛"),s.bds.get("北海").des="隶属于青州,可训练兵种:"+this.getBzStrs("北海"),s.bds.get("汝南").des="隶属于豫州,可训练兵种:"+this.getBzStrs("汝南"),s.bds.get("寿春").des="隶属于扬州,可训练兵种:"+this.getBzStrs("寿春"),s.bds.get("南蛮").des="南方边陲蛮族,可训练兵种:"+this.getBzStrs("南蛮"),s.bds.get("乌丸").des="北方草原蛮族,可训练兵种:"+this.getBzStrs("乌丸"),s.bds.get("山越").des="东南沿海蛮族,可训练兵种:"+this.getBzStrs("山越"),s.bds.get("羌戎").des="西部边陲蛮族,可训练兵种:"+this.getBzStrs("羌戎"),s.bds.get("倭国").des="东北海岛蛮族,可训练兵种:"+this.getBzStrs("倭国"),s.bds.get("会稽").des="隶属于扬州,可训练兵种:"+this.getBzStrs("会稽"),s.bds.get("吴郡").des="隶属于扬州,可训练兵种:"+this.getBzStrs("吴郡"),s.bds.get("秣陵").des="隶属于扬州,可训练兵种:"+this.getBzStrs("秣陵"),s.bds.get("柴桑").des="隶属于扬州,可训练兵种:"+this.getBzStrs("柴桑"),s.bds.get("庐江").des="隶属于扬州,可训练兵种:"+this.getBzStrs("庐江"),s.bds.get("襄阳").des="隶属于荆州,可训练兵种:"+this.getBzStrs("襄阳"),s.bds.get("新野").des="隶属于荆州,可训练兵种:"+this.getBzStrs("新野"),s.bds.get("西城").des="隶属于荆州,可训练兵种:"+this.getBzStrs("西城"),s.bds.get("江夏").des="隶属于荆州,可训练兵种:"+this.getBzStrs("江夏"),s.bds.get("江陵").des="隶属于荆州,可训练兵种:"+this.getBzStrs("江陵"),s.bds.get("武威").des="隶属于凉州,可训练兵种:"+this.getBzStrs("武威"),s.bds.get("西平").des="隶属于凉州,可训练兵种:"+this.getBzStrs("西平"),s.bds.get("安定").des="隶属于雍州,可训练兵种:"+this.getBzStrs("安定"),s.bds.get("天水").des="隶属于雍州,可训练兵种:"+this.getBzStrs("天水"),s.bds.get("汉中").des="隶属于益州,可训练兵种:"+this.getBzStrs("汉中"),s.bds.get("交趾").des="隶属于交州,可训练兵种:"+this.getBzStrs("交趾"),s.bds.get("长沙").des="隶属于荆州,可训练兵种:"+this.getBzStrs("长沙"),s.bds.get("零陵").des="隶属于荆州,可训练兵种:"+this.getBzStrs("零陵"),s.bds.get("武陵").des="隶属于荆州,可训练兵种:"+this.getBzStrs("武陵"),s.bds.get("贵阳").des="隶属于荆州,可训练兵种:"+this.getBzStrs("贵阳"),s.bds.get("成都").des="隶属于益州,可训练兵种:"+this.getBzStrs("成都"),s.bds.get("云南").des="隶属于益州,可训练兵种:"+this.getBzStrs("云南"),s.bds.get("建宁").des="隶属于益州,可训练兵种:"+this.getBzStrs("建宁"),s.bds.get("江州").des="隶属于益州,可训练兵种:"+this.getBzStrs("江州"),s.bds.get("永安").des="隶属于益州,可训练兵种:"+this.getBzStrs("永安"),s.bds.get("梓潼").des="隶属于益州,可训练兵种:"+this.getBzStrs("梓潼")},s.getBzStrs=function(s){var e="",t=G.getInstance();return I.checKIsArrayContainsItem(s,t.gongbingBuildings)&&(e+=Z.getArmyType(n.gb)+" "),I.checKIsArrayContainsItem(s,t.qibingBuildings)&&(e+=Z.getArmyType(n.qb)+" "),I.checKIsArrayContainsItem(s,t.shuibingBuildings)&&(e+=Z.getArmyType(n.sb)+" "),""==e&&(e="无"),e},s.getColorFromName=function(s){for(var e=1315423911,t=(s=s.toLowerCase()).length-1;t>=0;t--){e^=(e<<5)+s.charCodeAt(t)+(e>>2)}var B=(e&=2147483647)%123,S=e%345,g=e%234;return B>255&&(B%=256),S>255&&(S%=256),g>255&&(g%=256),[B,S,g]},s}())||T);t._RF.pop()}}}));

System.register("chunks:///_virtual/DynamicHelper.ts",["./rollupPluginModLoBabelHelpers.js","cc","./KingAI.ts","./TeamController.ts","./EventBus.ts","./GameHelper.ts","./DataControler.ts","./EntityHelper.ts","./GameController.ts","./GroupController.ts","./AStarRoadSeeker.ts"],(function(e){"use strict";var n,t,a,o,i,s,r,d,m,g,p,c,l,y,u,v,I,f,b,h,k,B,E;return{setters:[function(e){n=e.createForOfIteratorHelperLoose},function(e){t=e.cclegacy,a=e._decorator,o=e.instantiate,i=e.v3,s=e.find,r=e.Node,d=e.log},function(e){m=e.KingAI},function(e){g=e.TeamController},function(e){p=e.EventBus,c=e.EventType,l=e.EventMsg},function(e){y=e.default},function(e){u=e.DataControler,v=e.EntityType,I=e.ArmyType,f=e.InfomationType},function(e){b=e.EH,h=e.Entity},function(e){k=e.GameController},function(e){B=e.GroupController},function(e){E=e.default}],execute:function(){t._RF.push({},"b1d21q/kIlBs5JWbLFZsBnG","DynamicHelper",void 0);a.ccclass,a.property,e("DynamicHelper",function(){function e(){}return e.addArmyOnGame=function(e,n){var t=k.getInstance(),a=u.getInstance(),s=o(t.groupPrefab);t.node.parent.addChild(s);var r=new h;switch(r.peoples=n.peoples,r.orderType=n.orderType,r.type=v.army,r.armyType=n.armyType,r.troops=n.troops,r.tragetPos=n.pos,r.armyType){case I.bb:e.bubing-=n.troops;break;case I.qb:e.qibing-=n.troops;break;case I.sb:e.shuibing-=n.troops;break;case I.gb:e.gongbing-=n.troops}r.homeId=n.homeId,r.traget=n.tragetId,r.food=n.food,e.food-=n.food,b.deletePeoplesFromHomeEntityByOrder(e,n),r.name=b.getCaptainInEntity(r),t.entities.set(r.name,r),s.name=r.name,s.scale=i(.5,.5,.5);var d=a.bds.get(e.name).pos;s.position=i(d[0]-50.2,0,50.2-d[1]);var m=s.addComponent(B);m.entity=r,m.isMoving=!0;var g=b.getKingdomIdByEntityName(e.name);t.kingdoms.get(g).entities.push(r.name),t.ec.addIcon(r.name,s)},e.addGroupOnLoadGame=function(e,n){var t=k.getInstance();t.node.parent.addChild(e),e.name=n.name,e.scale=i(.5,.5,.5),e.position=i(n.pos[0]-50,0,50-n.pos[1]),e.addComponent(B).entity=n,t.ec.addIcon(n.name,e)},e.joinArmyToBuildingOnGame=function(e,t,a){var o=k.getInstance();switch(e.food+=t.food,t.armyType){case I.bb:e.bubing+=t.troops,e.bbs+=t.ts;break;case I.qb:e.qibing+=t.troops,e.qbs+=t.ts;break;case I.sb:e.shuibing+=t.troops,e.sbs+=t.ts;break;case I.gb:e.gongbing+=t.troops,e.gbs+=t.ts}for(var i,s=n(t.peoples);!(i=s()).done;){var r=i.value;e.peoples.push(r)}for(var d,m=n(t.captives);!(d=m()).done;){var g=d.value;e.captives.push(g)}o.entities.delete(t.name);var p=b.getKingdomIdByEntityName(t.name);y.spliceItemFormArray(t.name,o.kingdoms.get(p).entities),o.ec.removeIcon(t.name),this.deleteNode(a)},e.captureBuildingByArmyOnGame=function(e,t,a){var o=k.getInstance(),i=o.kingdoms.get(b.getKingdomIdByEntityName(e.name)),s=o.kingdoms.get(b.getKingdomIdByEntityName(t.name));switch(i&&y.spliceItemFormArray(e.name,i.entities),s.entities.push(e.name),e.food+=t.food,e.bingyi=0,e.mingxing=0,i&&i.credit>0&&(e.mingxing=Math.round(i.credit/2)),e.mingxing>80&&(e.mingxing=80),e.tasks=new Map,e.type==v.city&&(e.bingyi=0,e.mingxing=o.kingdoms.get(b.getKingdomIdByEntityName(t.name)).credit,e.mingxing>80&&(e.mingxing=80)),t.armyType){case I.bb:e.bubing+=t.troops,e.bbs+=t.ts;break;case I.qb:e.qibing+=t.troops,e.qbs+=t.ts;break;case I.sb:e.shuibing+=t.troops,e.sbs+=t.ts;break;case I.gb:e.gongbing+=t.troops,e.gbs+=t.ts}var r=e.peoples;e.peoples=t.peoples;for(var d,m=n(r);!(d=m()).done;){var g=d.value;e.captives.push(g),this.changeKing(g)}this.deleteNode(a),o.entities.delete(t.name);var u=b.getKingdomIdByEntityName(t.name);y.spliceItemFormArray(t.name,o.kingdoms.get(u).entities),o.ec.removeIcon(t.name),E.getInstance().changeBuildingValue(o.arr,o.kingdoms.get(u).index,e.name),p.getInstance().board(c.change_onwer,(new l).setStr(e.name)),o.playerId==u&&o.cc.showInfomation(b.c2r(e.name)+"被我军攻占",null,f.攻陷设施),this.isAnyKindomMeiWang();var h=0;h=5*o.dc.bds.get(e.name).size,"洛阳"==e.name&&o.hasHanXianDi&&(h=50),s.credit+=h,i&&(i.credit-=h,i.credit<0&&(i.credit=0))},e.deleteArmy=function(e,n){var t=k.getInstance();this.deleteNode(e),t.entities.delete(n.name);var a=b.getKingdomIdByEntityName(n.name);t.kingdoms.get(a)&&y.spliceItemFormArray(n.name,t.kingdoms.get(a).entities),t.ec.removeIcon(n.name)},e.changeArmyToTeam=function(e){var n=k.getInstance();e.setType(v.team),e.setHomeId(b.getClosestMineBuilding(e)),e.setTraget(b.getClosestMineBuilding(e)),e.food>100&&(e.food=100),e.troops>100&&(e.troops=100);var t=s(e.name),a=new r;a.position=t.position,a.parent=t.parent,a.name=t.name,this.deleteNode(t);var o=a.addComponent(g);e.isComplete=!0,o.entity=e,o.gc=n,o.goto(),n.ec.removeIcon(e.name),n.tc.addIcon(e.name,a)},e.deleteTeam=function(e,t,a){void 0===a&&(a=null);var o=k.getInstance();o.entities.delete(e.name),this.deleteNode(t),o.entities.delete(e.name);var i=b.getKingdomIdByEntityName(e.name);if(y.spliceItemFormArray(e.name,o.kingdoms.get(i).entities),o.tc.removeIcon(e.name),a){switch(a.food+=e.food,e.armyType){case I.bb:a.bubing+=e.troops;break;case I.qb:a.qibing+=e.troops;break;case I.sb:a.shuibing+=e.troops;break;case I.gb:a.gongbing+=e.troops}for(var s,r=n(e.peoples);!(s=r()).done;){var d=s.value;a.peoples.push(d)}for(var m,g=n(e.captives);!(m=g()).done;){var p=m.value;a.captives.push(p)}}},e.destroyTeam=function(e){var n=k.getInstance();s(e.name)&&s(e.name).destroy(),n.entities.delete(e.name),n.tc.removeIcon(e.name);var t=b.getKingdomIdByEntityName(e.name);t&&""!=t&&y.spliceItemFormArray(e.name,n.kingdoms.get(t).entities)},e.addTeamOnGame=function(e,n){var t=k.getInstance(),a=u.getInstance(),o=new r;t.node.parent.addChild(o);var s=new h;s.peoples=n.peoples,s.orderType=n.orderType,s.type=v.team,s.armyType=I.bb,s.troops=n.troops,s.tragetPos=n.pos,s.targetPeople=n.tragetPeople,s.food=n.food,e.bubing-=n.troops,s.homeId=n.homeId,s.traget=n.tragetId,b.deletePeoplesFromHomeEntityByOrder(e,n),s.name=b.getCaptainInEntity(s),t.entities.set(s.name,s),o.name=s.name;var d=a.bds.get(e.name).pos;o.position=i(d[0]-50.2,0,50.2-d[1]);var m=o.addComponent(g);m.entity=s,m.gc=t;var p=b.getKingdomIdByEntityName(e.name);t.kingdoms.get(p).entities.push(s.name),t.tc.addIcon(s.name,o)},e.addTeamOnLoad=function(e){var n=k.getInstance(),t=(u.getInstance(),new r);n.node.parent.addChild(t),t.name=e.name,t.position=i(e.pos[0]-50,0,50-e.pos[1]);var a=t.addComponent(g);a.entity=e,a.gc=n,n.tc.addIcon(e.name,t)},e.deleteNode=function(e){var n=k.getInstance();e&&(e.active=!1,n.invoke((function(){e.destroy()}),.1))},e.getCaptive=function(e,n){var t=k.getInstance();if(!e||!n)return d("--bug--双方有一方已经不存在了"),!1;if(e.type!=v.army||n.type!=v.army)return d("--bug--双方必须都是军队"),!1;if(y.getRandom(0,999)>990){var a=n.peoples.length,o=y.getRandom(0,a-1);if(n.peoples[o]){var i=n.peoples[o];return i!=t.playerId&&(this.changeCaptain(n,i),(b.getKingdomIdByEntityName(e.name)&&b.getKingdomIdByEntityName(e.name)==t.playerId||b.getKingdomIdByEntityName(n.name)&&b.getKingdomIdByEntityName(n.name)==t.playerId)&&t.cc.showInfomation(b.c2r(i)+"被俘虏了",null,f.武将死亡),y.spliceItemFormArray(i,n.peoples),this.changeKing(i),e.captives.push(i),!0)}}return!1},e.changeCaptain=function(e,t){var a=k.getInstance(),o=b.getCaptainInEntity(e);if(o==t){for(var i,r=[],d=n(e.peoples);!(i=d()).done;){var m=i.value;m!=t&&r.push(m)}if(r.length>0){o=b.getCaptainInPeoples(r),s(t).name=o,a.ec.removeIcon(t),a.ec.addIcon(o,s(o)),a.entities.delete(t),a.entities.set(o,e);for(var g,p=n(a.kingdoms.values());!(g=p()).done;)for(var c,l=g.value,u=n(l.entities);!(c=u()).done;){var I=c.value;if(I==t)return y.spliceItemFormArray(I,l.entities),void l.entities.push(o)}}else if(s(t)&&a.entities.get(t)){var f=a.entities.get(t);f.type==v.army?this.deleteArmy(s(t),a.entities.get(t)):f.type==v.team&&this.deleteTeam(a.entities.get(t),s(t))}}},e.changeKing=function(e){var t=k.getInstance(),a=t.kingdoms.get(e);if(a){for(var o,i=0,s="",r=n(a.entities);!(o=r()).done;)for(var d,g=o.value,p=t.entities.get(g),c=n(p.peoples);!(d=c()).done;){var l=d.value,y=t.dc.pps.get(l),u=y.zs+y.ts+y.nz;u>i&&(i=u,s=l)}if(""!=s&&s!=e){a.kingId=s,t.kingdoms.delete(e),t.kingdoms.set(s,a),t.kings.delete(e);var v=new m;v.init(s),t.kings.set(s,v),t.playerId==e&&(t.playerId=s);for(var I,f=n(t.cundang.treatys);!(I=f()).done;){var b=I.value;b[0].includes(e)&&b[0].replace(e,s)}}else this.isAnyKindomMeiWang()}},e.isAnyKindomMeiWang=function(){for(var e,t=k.getInstance(),a=null,o=n(t.kingdoms.values());!(e=o()).done;){for(var i,s=e.value,r=!1,d=n(s.entities);!(i=d()).done;){var m=i.value;if(b.getEntityByName(m).isBuilding()){r=!0;break}}if(0==r){a=s;break}}for(var g,y=n(t.kingdoms.values());!(g=y()).done;){for(var u,v=g.value,I=!1,h=n(v.entities);!(u=h()).done;){var B=u.value,E=b.getEntityByName(B);if(E&&E.peoples.length>0){I=!0;break}}if(0==I){a=v;break}}a&&(p.getInstance().board(c.mie_wang,l.GetIns().setStr(a.kingId)),t.kingdoms.delete(a.kingId),t.kings.delete(a.kingId),t.cc.addInfomationsToStack(b.c2r(a.kingId)+"灭亡了",null,f.势力灭亡))},e}());t._RF.pop()}}}));

System.register("chunks:///_virtual/EntityHelper.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameController.ts","./DataControler.ts","./GameHelper.ts"],(function(t){"use strict";var e,n,i,s,r,o,a,u,g,h,c,l;return{setters:[function(t){e=t.createForOfIteratorHelperLoose},function(t){n=t.cclegacy,i=t._decorator,s=t.log,r=t.v3,o=t.find},function(t){a=t.GameController},function(t){u=t.DataControler,g=t.Building,h=t.EntityType,c=t.OrderType},function(t){l=t.default}],execute:function(){n._RF.push({},"09e5cqNrIdLC6ki4hMxZ6l2","EntityHelper",void 0);i.ccclass,i.property;var f=t("EH",function(){function t(){}return t.getArmyLimitByTs=function(n){for(var i,s=2e3,r=0,o=e(n);!(i=o()).done;){var a=i.value;a&&t.getPeopleDataByName(a)&&t.getPeopleDataByName(a).ts>r&&(r=t.getPeopleDataByName(a).ts)}return r>90?s=4e4:r>80?s=2e4:r>70?s=1e4:r>60&&(s=5e3),s},t.getPeopleByName=function(t){for(var n,i=a.getInstance(),s=e(i.peoples.values());!(n=s()).done;){var r=n.value;if(r.name==t)return r}return null},t.getPeopleDataByName=function(t){for(var n,i=u.getInstance(),s=e(i.pps.values());!(n=s()).done;){var r=n.value;if(r.name==t)return r}return null},t.getKindomByPeopleName=function(t){var n=a.getInstance(),i=this.getEntityNameByPeopleName(t);if(i)for(var s,r=e(n.kingdoms.values());!(s=r()).done;)for(var o,u=s.value,g=e(u.entities);!(o=g()).done;){if(o.value==i)return u.kingId}return null},t.getEntityNameByPeopleName=function(t){for(var n,i=a.getInstance(),s=e(i.entities.values());!(n=s()).done;)for(var r,o=n.value,u=e(o.peoples);!(r=u()).done;){if(r.value==t)return o.name}return null},t.getEntityByName=function(t){for(var n,i=a.getInstance(),s=e(i.entities.values());!(n=s()).done;){var r=n.value;if(t==r.name)return r}return null},t.getBuildingDataByName=function(t){for(var n,i=a.getInstance(),s=e(i.dc.bds.values());!(n=s()).done;){var r=n.value;if(r.name==t)return r}return null},t.getEntityByPeopleName=function(t){for(var n,i=a.getInstance(),s=e(i.entities.values());!(n=s()).done;)for(var r,o=n.value,u=e(o.peoples);!(r=u()).done;){if(t==r.value)return o}return null},t.getEntityByCaptiveName=function(t){for(var n,i=a.getInstance(),s=e(i.entities.values());!(n=s()).done;)for(var r,o=n.value,u=e(o.captives);!(r=u()).done;){if(t==r.value)return o}return null},t.getKingdomIdByEntityName=function(t){for(var n,i=a.getInstance(),s=e(i.kingdoms.values());!(n=s()).done;)for(var r,o=n.value,u=e(o.entities);!(r=u()).done;){if(r.value==t)return o.kingId}return""},t.getKingdomIndexByEntityName=function(t){for(var n,i=a.getInstance(),s=e(i.kingdoms.values());!(n=s()).done;)for(var r,o=n.value,u=e(o.entities);!(r=u()).done;){if(r.value==t)return o.index}return 0},t.checkIsPeopleZaiye=function(t){for(var n,i=a.getInstance(),r=e(i.kingdoms.values());!(n=r()).done;)for(var o,u=n.value,g=e(u.entities);!(o=g()).done;){var h=o.value;if(i.entities.get(h)){for(var c,l=e(i.entities.get(h).peoples);!(c=l()).done;){if(t==c.value)return!1}for(var f,v=e(i.entities.get(h).captives);!(f=v()).done;){if(t==f.value)return!1}}else s("---------bug--存在一个不在gc.entities但存在kindom里面的实体----------")}return!0},t.getCaptainInEntity=function(t){if(!t||!t.peoples)return s("---------bug_in_getCaptainInEntity----------"),null;if(0==t.peoples.length)return null;for(var n,i=u.getInstance(),r=t.peoples[0],o=e(t.peoples);!(n=o()).done;){var a=n.value,g=i.pps.get(a);g.nz+g.zs+g.ts>0&&(r=a)}return r},t.getCaptainInPeoples=function(t){if(0==t.length)return null;for(var n,i=u.getInstance(),s=t[0],r=e(t);!(n=r()).done;){var o=n.value,a=i.pps.get(o);a.nz+a.zs+a.ts>0&&(s=o)}return s},t.deletePeoplesFromHomeEntityByOrder=function(t,n){for(var i=t.peoples.length;i>-1;i--)for(var s,r=t.peoples[i],o=e(n.peoples);!(s=o()).done;){r==s.value&&l.spliceItemFormArray(r,t.peoples)}},t.checkIsEntityMine=function(t,e){a.getInstance();var n=this.getKingdomIdByEntityName(t);return!(!n||n!=e)},t.getWorldPosByXY=function(t){return r(t[0]-50,0,50-t[1])},t.getClosestMineBuilding=function(n){for(var i,s=a.getInstance(),r=t.getKingdomIdByEntityName(n.name),u=1e4,g=null,c=e(s.kingdoms.get(r).entities);!(i=c()).done;){var f=i.value;if(o(f)&&o(f).active&&s.entities.get(f)&&s.entities.get(f).type!=h.army&&s.entities.get(f).type!=h.team){var v=l.getDistance(o(n.name).position,o(f).position);v<u&&(u=v,g=f)}}return g},t.checkIsEntityContainsKing=function(t){for(var n,i=a.getInstance(),s=i.entities.get(t).peoples,r=e(s);!(n=r()).done;){var o=n.value;if(i.kingdoms.get(o))return o}return""},t.checkIsEntityBeContainedByAnyKing=function(t){for(var n,i=a.getInstance(),s=e(i.kingdoms.values());!(n=s()).done;)for(var r,o=n.value,u=e(o.entities);!(r=u()).done;){if(r.value==t)return!0}return!1},t.getRelationship=function(t,e){var n=a.getInstance().cundang.relationships.get(l.getKey(t,e));return n||(n=0),n},t.setRelationship=function(e,n,i){var s=a.getInstance(),r=t.getRelationship(e,n);r||(r=0);var o="一般";i>5?o="亲密":i>0?o="友好":i<-5?o="仇恨":i<0&&(o="厌恶"),i!=r&&(i>5||i<-5)&&s.cc.addLog(t.c2r(e)+"与"+t.c2r(n)+"关系转为:"+o),s.cundang.relationships.set(l.getKey(e,n),i)},t.getMyLovelyKing=function(n){for(var i,s=a.getInstance(),r=-1,o=null,u=e(s.kingdoms.values());!(i=u()).done;){var g=i.value,h=t.getRelationship(n,g.kingId);h>r&&h>0&&(r=h,o=g.kingId)}return o},t.c2r=function(t,e,n){return void 0===e&&(e="red"),void 0===n&&(n=0),0==n?"<color="+e+">"+t+"</color>":"<size="+n+"><color="+e+">"+t+"</color></size>"},t.changeMapValue=function(t){for(var n,i=a.getInstance(),s=u.getInstance(),r=e(s.bds.values());!(n=r()).done;){for(var o,g=n.value,h=g.index,c=0,l=g.name,f=g.type,v=e(i.kingdoms.values());!(o=v()).done;)for(var p,d=o.value,y=e(d.entities.values());!(p=y()).done;){l==p.value&&(c=d.index)}var m=g.pos;1==f?(t[m[0]][m[1]]=1e4*c+10*h+f+5,t[m[0]-1][m[1]]=1e4*c+10*h+f+5,t[m[0]+1][m[1]]=1e4*c+10*h+f+5,t[m[0]][m[1]-1]=1e4*c+10*h+f+5,t[m[0]][m[1]+1]=1e4*c+10*h+f+5,t[m[0]-1][m[1]-1]=3333333,t[m[0]+1][m[1]+1]=3333333,t[m[0]-1][m[1]+1]=3333333,t[m[0]+1][m[1]-1]=3333333):2!=f&&3!=f||(t[m[0]][m[1]]=1e4*c+10*h+f+5,t[m[2]][m[3]]=1e4*c+10*h+f+5)}},t.checkIsEntityCanTrain=function(t){var e=!1,n=u.getInstance();return(l.checKIsArrayContainsItem(t,n.gongbingBuildings)||l.checKIsArrayContainsItem(t,n.qibingBuildings)||l.checKIsArrayContainsItem(t,n.shuibingBuildings))&&(e=!0),e},t.checkIsPosNearBuilding=function(t,e){for(var n=a.getInstance().arr,i=-2;i<3;i++)for(var s=-2;s<3;s++)if(n[t+i]&&n[t+i][e+s]>100)return!0;return!1},t.checkIsAnyOurGroupSameTargetPos=function(n,i,s){for(var r,o=a.getInstance(),u=t.getKingdomIdByEntityName(n.name),g=o.kingdoms.get(u),l=e(g.entities);!(r=l()).done;){var f=r.value,v=t.getEntityByName(f);if(v&&v.type==h.army&&v.orderType==c.stay&&v.tragetPos[0]==i&&v.tragetPos[1]==s)return!0}for(var p,d=e(o.entities.values());!(p=d()).done;){var y=p.value;if(y&&y.type==h.team&&y.orderType==c.stay&&t.checkIsTwoEntityFrineds(n,y)&&y.tragetPos[0]==i&&y.tragetPos[1]==s)return!0}return!1},t.checkIsAnyTeamSameTargetPos=function(t,n){for(var i,s=a.getInstance(),r=e(s.entities.values());!(i=r()).done;){var o=i.value;if(o&&o.type==h.team&&o.orderType==c.maifu&&o.tragetPos[0]==t&&o.tragetPos[1]==n)return!0}return!1},t.checkIsTwoEntityFrineds=function(t,e){a.getInstance();var n=!1;if(!t||!e)return n;var i=this.getKingdomIdByEntityName(t.name),s=this.getKingdomIdByEntityName(e.name);return i&&i.length>0&&s&&s.length>0&&(n=this.checkTwoKindomFriend(i,s)),n},t.checkTwoKindomFriend=function(t,e){var n=a.getInstance(),i=!1,s=l.getKey(t,e);n.cundang.treatys.has(s)&&(36*n.year+3*n.month+n.xun-n.cundang.treatys.get(s)<30&&(i=!0));return i},t}());t("Entity",function(){function t(){this.name="",this.food=0,this.shiqi=80,this.peoples=[],this.captives=[],this.type=0,this.health=100,this.bingyi=0,this.shouyi=1,this.shuishou=1,this.tasks=new Map,this.bubing=0,this.shuibing=0,this.qibing=0,this.gongbing=0,this.mingxing=0,this.isInWar=!1,this.hasBusiness=!1,this.orderType=0,this.armyType=0,this.traget="",this.homeId="",this.tragetPos=[],this.pos=[],this.troops=0,this.isInRiver=!1,this.targetPeople="",this.isComplete=!1,this.maifuTime=1e3,this.gbs=0,this.sbs=0,this.bbs=0,this.qbs=0,this.ts=0}t.getIns=function(){return new t};var e=t.prototype;return e.setName=function(t){return this.name=t,this},e.setHomeId=function(t){return this.homeId=t,this},e.setFood=function(t){return this.food=t,this},e.setTroops=function(t){return this.troops=t,this},e.setBubing=function(t){return this.bubing=t,this},e.setShuibing=function(t){return this.shuibing=t,this},e.setQibing=function(t){return this.qibing=t,this},e.setGongbing=function(t){return this.gongbing=t,this},e.setShiqi=function(t){return this.shiqi=t,this},e.setPeoples=function(t){return this.peoples=t,this},e.setCaptives=function(t){return this.captives=t,this},e.setType=function(t){return this.type=t,this},e.setHealth=function(t){return this.health=t,this},e.setBingyi=function(t){return this.bingyi=t,this},e.setShouyi=function(t){return this.shouyi=t,this},e.setShuishou=function(t){return this.shuishou=t,this},e.setTasks=function(t){return this.tasks=t,this},e.setOrderType=function(t){return this.orderType=t,this},e.setArmyType=function(t){return this.armyType=t,this},e.setTraget=function(t){return this.traget=t,this},e.setTragetPos=function(t){return this.tragetPos=t,this},e.setPos=function(t){return this.pos=t,this},e.setIsInRiver=function(t){return this.isInRiver=t,this},e.setMingxing=function(t){return this.mingxing=t,this},e.setTargetPeople=function(t){return this.targetPeople=t,this},e.setIsComplete=function(t){return this.isComplete=t,this},e.getData=function(){return u.getInstance().bds.get(this.name)?u.getInstance().bds.get(this.name):new g},e.getBili=function(){return this.type==h.army||this.type==h.team?this.troops:this.bubing+this.shuibing+this.qibing+this.gongbing},e.getShangyuan=function(){return this.type==h.army||this.type==h.team?this.ts:this.bbs+this.sbs+this.qbs+this.gbs},e.isBuilding=function(){return this.type!=h.army&&this.type!=h.team},e.getName=function(){return this.type==h.team||this.type==h.army?this.name+"队":this.name},e.getCaptain=function(){return f.getCaptainInEntity(this)},e.changeMinxing=function(t){t>0?(this.mingxing+=t,this.mingxing>100&&(this.mingxing=100)):(this.mingxing+=t,this.mingxing<0&&(this.mingxing=0))},e.changeShiqi=function(t){t>0?(this.shiqi+=t,this.shiqi>100&&(this.shiqi=100)):(this.shiqi+=t,this.shiqi<0&&(this.shiqi=0))},e.changeBingyi=function(t){t>0?this.bingyi+=t:(this.bingyi+=t,this.bingyi<0&&(this.bingyi=0))},e.changeFood=function(t){t>0?this.food+=t:(this.food+=t,this.food<0&&(this.food=0))},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/EntityIconController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EntityHelper.ts","./DataControler.ts","./BasePannelController.ts","./GameController.ts","./GameHelper.ts"],(function(e){"use strict";var t,i,n,a,o,r,c,s,g,l,h,d,y,m,p,v,u,C,f;return{setters:[function(e){t=e.inheritsLoose,i=e.createForOfIteratorHelperLoose},function(e){n=e.cclegacy,a=e._decorator,o=e.find,r=e.Camera,c=e.instantiate,s=e.Label,g=e.Sprite,l=e.UITransform,h=e.v3,d=e.tween,y=e.Color},function(e){m=e.EH},function(e){p=e.EntityType,v=e.OrderType},function(e){u=e.BasePannelController},function(e){C=e.GameController},function(e){f=e.default}],execute:function(){var B;n._RF.push({},"b157a9SKJlJP6uKxu4WaAO/","EntityIconController",void 0);var N=a.ccclass;a.property,e("EntityIconController",N("EntityIconController")(B=function(e){function n(){for(var t,i=arguments.length,n=new Array(i),a=0;a<i;a++)n[a]=arguments[a];return(t=e.call.apply(e,[this].concat(n))||this).iconMap=new Map,t.index=0,t.numTweenMap=new Map,t}t(n,e);var a=n.prototype;return a.start=function(){this.camera=o("Camera").getComponent(r),this.entityIcons=this.node.getChildByName("EntityIcons"),this.gc=C.getInstance()},a.lateUpdate=function(){for(var e,t=i(this.iconMap);!(e=t()).done;){var n=e.value;this.gc.entities.get(n[0])&&(n[1].get("icon").position=this.camera.convertToUINode(n[1].get("node").position,this.entityIcons))}this.index++,this.index%50==0&&this.updateIcon()},a.addIcon=function(e,t){var i=f.prefabs.get("EntityIcon"),n=c(i);n.name="entity_icon_"+e,n.getChildByName("EntityName").getComponent(s).string="",this.entityIcons||(this.entityIcons=this.node.getChildByName("EntityIcons")),this.entityIcons.addChild(n);var a=new Map;a.set("icon",n),a.set("node",t),this.iconMap.set(e,a)},a.setEntitySelect=function(e){for(var t,n=i(this.iconMap);!(t=n()).done;){var a=t.value,o=this.gc.entities.get(a[0]);if(o&&o.name==e)a[1].get("icon").getChildByName("Select").active=!0}},a.hideAllSelect=function(){for(var e,t=i(this.iconMap);!(e=t()).done;){e.value[1].get("icon").getChildByName("Select").active=!1}},a.updateIcon=function(){for(var e,t=i(this.iconMap);!(e=t()).done;){var n=e.value,a=n[1].get("icon"),o=a.getChildByName("KingBg").getChildByName("KingName").getComponent(s),r=a.getChildByName("KingBg").getComponent(g),c=m.getKingdomIdByEntityName(n[0]);o.string="";var h=C.getInstance().entities.get(n[0]);if(c){a.getChildByName("EntityName").active=!1,a.getChildByName("FoodBg").active=!0,a.getChildByName("ArmyBg").active=!0,a.getChildByName("KingBg").active=!0,a.getChildByName("PeopleInfo").active=!0,o.string=c.substr(0,1),r.color=this.gc.dc.pps.get(c).color;var d=0,y=0;(y=h.food/100)>60&&(y=60),y<0&&(y=0);var v="",u=0;h.peoples&&(u=h.peoples.length),h.type==p.city||h.type==p.gate||h.type==p.port?(d=(h.shuibing+h.bubing+h.gongbing+h.qibing)/100,v=h.name+" "+u):(d=h.troops/100,v=h.name+"队 "+u),d>60&&(d=60),d<0&&(d=0),a.getChildByName("FoodBg").getChildByName("Food").getComponent(l).setContentSize(y,3),a.getChildByName("ArmyBg").getChildByName("Army").getComponent(l).setContentSize(d,3),a.getChildByName("PeopleInfo").getComponent(s).string=v,this.refreshNameColor(a,c)}else a.getChildByName("EntityName").active=!0,a.getChildByName("EntityName").getComponent(s).string=h.name,a.getChildByName("FoodBg").active=!1,a.getChildByName("ArmyBg").active=!1,a.getChildByName("KingBg").active=!1,a.getChildByName("PeopleInfo").active=!1}},a.removeIcon=function(e){this.iconMap.get(e)&&(this.iconMap.get(e).get("icon").destroy(),this.iconMap.delete(e))},a.showCutNumber=function(e,t){if(this.iconMap.get(t)){var i=this.iconMap.get(t).get("icon");if(null!=i&&null!=i){this.numTweenMap.get(t)&&(this.numTweenMap.get(t).stop(),this.numTweenMap.delete(t));var n=i.getChildByName("NumberLabel");n.getComponent(s).string="-"+e,n.position=h(0,20,0),n.active=!0;var a=d(n).to(2,{position:h(0,-20,0)}).call((function(){n.active=!1})).start();this.numTweenMap.set(t,a)}}},a.refreshNameColor=function(e,t){var i=e.getChildByName("PeopleInfo").getComponent(s);t&&t==this.gc.playerId?i.color=y.GREEN:t&&m.checkTwoKindomFriend(t,this.gc.playerId)?i.color=y.CYAN:i.color=y.YELLOW},a.showArrows=function(e,t,n){switch(e){case v.attack:for(var a,o=i(this.iconMap);!(a=o()).done;){var r=a.value,c=this.gc.entities.get(r[0]);if(c&&!m.checkIsEntityMine(c.name,n)){var s=r[1].get("icon");s.getChildByName("Arrow").active=!0,this.addTween(s)}}break;case v.find:for(var g,l=i(this.iconMap);!(g=l()).done;){var h=g.value,d=this.gc.entities.get(h[0]);if(d&&d.type==p.city&&d.name!=t){var y=h[1].get("icon");y.getChildByName("Arrow").active=!0,this.addTween(y)}}break;case v.join:case v.yidong:for(var u,C=i(this.iconMap);!(u=C()).done;){var f=u.value,B=this.gc.entities.get(f[0]);if(B&&B.isBuilding()&&m.checkIsEntityMine(B.name,n)&&B.name!=t){var N=f[1].get("icon");N.getChildByName("Arrow").active=!0,this.addTween(N)}}break;case v.lijian:for(var I,w=i(this.iconMap);!(I=w()).done;){var M=I.value,E=this.gc.entities.get(M[0]);if(E&&E.isBuilding()&&!E.isInWar&&!m.checkIsEntityMine(E.name,n)&&E.peoples.length>0){var A=M[1].get("icon");A.getChildByName("Arrow").active=!0,this.addTween(A)}}break;case v.liuyan:for(var b,k=i(this.iconMap);!(b=k()).done;){var T=b.value,K=this.gc.entities.get(T[0]);if(K&&K.type==p.city&&!K.isInWar&&m.checkIsEntityBeContainedByAnyKing(K.name)&&!m.checkIsEntityMine(K.name,n)){var F=T[1].get("icon");F.getChildByName("Arrow").active=!0,this.addTween(F)}}break;case v.xirao:for(var S,P=i(this.iconMap);!(S=P()).done;){var L=S.value,x=this.gc.entities.get(L[0]);if(x&&x.isBuilding()&&!x.isInWar&&m.checkIsEntityBeContainedByAnyKing(x.name)&&!m.checkIsEntityMine(x.name,n)){var W=L[1].get("icon");W.getChildByName("Arrow").active=!0,this.addTween(W)}}break;case v.yihe:for(var _,H=i(this.iconMap);!(_=H()).done;){var G=_.value,O=this.gc.entities.get(G[0]);if(O&&O.isBuilding()&&!O.isInWar&&!m.checkIsEntityMine(O.name,n)&&m.checkIsEntityContainsKing(O.name)){var j=G[1].get("icon");j.getChildByName("Arrow").active=!0,this.addTween(j)}}}},a.addTween=function(e){var t=e.getChildByName("Arrow");d(t).to(.5,{position:h(0,100,0)}).to(.5,{position:h(0,110,0)}).union().repeatForever().start()},a.hideAllArrows=function(){for(var e,t=i(this.iconMap);!(e=t()).done;){var n=e.value[1].get("icon");n.getChildByName("Arrow").active=!1,d(n.getChildByName("Arrow")).stop()}},n}(u))||B);n._RF.pop()}}}));

System.register("chunks:///_virtual/EntityInfoController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./DataControler.ts","./EntityHelper.ts","./GameController.ts","./BasePannelController.ts","./PeopleInfoController.ts"],(function(t){"use strict";var n,e,i,a,s,o,h,y,r,l,g,p,f,D,u;return{setters:[function(t){n=t.inheritsLoose,e=t.createForOfIteratorHelperLoose},function(t){i=t.cclegacy,a=t._decorator,s=t.find,o=t.Node,h=t.Label},function(t){y=t.EntityType,r=t.TypeGeter,l=t.OrderType,g=t.ArmyType},function(t){p=t.EH},function(t){f=t.GameController},function(t){D=t.BasePannelController},function(t){u=t.PeopleInfoController}],execute:function(){var C;i._RF.push({},"5dea3wwHd1GWqnGFgUZeypu","EntityInfoController",void 0);var c=a.ccclass;a.property,t("EntityInfoController",c("EntityInfoController")(C=function(t){function i(){return t.apply(this,arguments)||this}n(i,t);var a=i.prototype;return a.start=function(){this.gc=f.getInstance(),s("Canvas/EntityInfoPannel/Bg").off(o.EventType.TOUCH_END),s("Canvas/EntityInfoPannel/Bg").on(o.EventType.TOUCH_END,this.hide,this)},a.show=function(t){t?(this.entity=t,this.entity.isBuilding()&&(this.building=this.gc.dc.bds.get(this.entity.name)),this.showFrame(s("Canvas/EntityInfoPannel"),s("Canvas/EntityInfoPannel").getChildByName("Pannel")),this.renderData()):this.log("BUG-实体不存在")},a.hide=function(){this.hideFrame(s("Canvas/EntityInfoPannel"),s("Canvas/EntityInfoPannel").getChildByName("Pannel"))},a.renderData=function(){var t=this;this.hideAllData();var n="无";if(""!=p.getKingdomIdByEntityName(this.entity.name)&&(n=p.getKingdomIdByEntityName(this.entity.name)),s("Canvas/EntityInfoPannel/Pannel/Datas/Name/Label").getComponent(h).string=this.entity.name,this.showData("所属",n,1),this.entity.type==y.army){if(this.showData("兵力",this.entity.troops+"",2),this.showData("兵种",r.getArmyType(this.entity.armyType),3),this.showData("粮草",this.entity.food+"",4),this.showData("士气",this.entity.shiqi+"",5),this.entity.orderType==l.stay)this.showData("目的地",this.entity.tragetPos[0]+"-"+this.entity.tragetPos[1],6);else if(this.entity.orderType==l.attack){var i=this.gc.entities.get(this.entity.traget);i&&i.type==y.army?this.showData("目标",this.entity.traget+"队",6):this.showData("目标",this.entity.traget,6)}else this.entity.orderType==l.join&&this.showData("目标","无",6);this.showData("命令",r.getOrderType(this.entity.orderType),7),this.showData("返回",this.entity.homeId+"",8),this.showData("交战中",1==this.entity.isInWar?"是":"否",9),this.showData("主将",null!=this.entity.getCaptain()?this.entity.getCaptain():"无",10),this.showData("伤员",this.entity.getShangyuan()+"",11)}else{if(this.showData(r.getArmyType(g.bb),this.entity.bubing+"",2),this.showData(r.getArmyType(g.qb),this.entity.qibing+"",3),this.showData(r.getArmyType(g.sb),this.entity.shuibing+"",4),this.showData(r.getArmyType(g.gb),this.entity.gongbing+"",5),this.showData("粮草",this.entity.food+"",6),this.showData("士气",this.entity.shiqi+"",7),this.showData("耐久",this.entity.health+"",8),this.showData("主将",null!=this.entity.getCaptain()?this.entity.getCaptain():"无",9),this.showData("伤员",this.entity.getShangyuan()+"",10),this.entity.type==y.city){this.showData("收益",this.entity.shouyi+"",11),this.showData("税收",this.entity.shuishou+"",12),this.showData("兵役",this.entity.bingyi+"",13),this.showData("民心",this.entity.mingxing+"",14);var a="小";3==this.building.size?a="大":2==this.building.size&&(a="中"),this.showData("规模",a,15)}s("Canvas/EntityInfoPannel/Pannel/Datas/StoryFrame/Label").getComponent(h).string=this.building.des}for(var f,D=0,C=function(){var n=f.value,e=s("Canvas/EntityInfoPannel/Pannel/Datas/Peoples/People"+D);e&&(e.active=!0,e.getChildByName("Value").getComponent(h).string=n,e.off(o.EventType.TOUCH_END),e.on(o.EventType.TOUCH_END,(function(){t.hide(),t.node.getComponent(u).show(n)}),t)),D++},c=e(this.entity.peoples);!(f=c()).done;)C();if(0==this.entity.peoples.length){var d=s("Canvas/EntityInfoPannel/Pannel/Datas/Peoples/People0");d.active=!0,d.off(o.EventType.TOUCH_END),d.getChildByName("Value").getComponent(h).string="无"}},a.showData=function(t,n,e){var i=s("Canvas/EntityInfoPannel/Pannel/Datas/Data"+e);i.active=!0,i.getChildByName("Key").getComponent(h).string=t,i.getChildByName("Value").getComponent(h).string=n},a.hideAllData=function(){for(var t=1;t<16;t++){s("Canvas/EntityInfoPannel/Pannel/Datas/Data"+t).active=!1}for(var n=0;n<12;n++){s("Canvas/EntityInfoPannel/Pannel/Datas/Peoples/People"+n).active=!1}s("Canvas/EntityInfoPannel/Pannel/Datas/StoryFrame/Label").getComponent(h).string=""},i}(D))||C);i._RF.pop()}}}));

System.register("chunks:///_virtual/EventBus.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var n,e,s,o;return{setters:[function(t){n=t.createForOfIteratorHelperLoose},function(t){e=t.cclegacy,s=t._decorator,o=t.log}],execute:function(){var r;t("EventType",void 0),e._RF.push({},"cb88cz2S6FPSKKOCgNyjiuK","EventBus",void 0);var i,u=s.ccclass;s.property,t("EventBus",u("EveneBus")(r=function(){function t(){this.funsMap=new Map}t.getInstance=function(){return null==this.instance&&(this.instance=new t),this.instance};var e=t.prototype;return e.sub=function(t,n,e){var s=this.getId(),o={fun:t,type:n,comp:e,id:s};return this.funsMap.set(s,o),s},e.removeAll=function(){this.funsMap.clear()},e.unSub=function(t){this.funsMap.has(t)?this.funsMap.delete(t):o("容器里不存在此消息,无法删除-"+t)},e.board=function(t,e){for(var s,o=n(this.funsMap);!(s=o()).done;){var r=s.value;if(r[1]){var i=r[1];i.fun&&i.comp&&i.type==t&&i.fun.bind(i.comp)(e,i.id)}}},e.getId=function(){for(var t=[],n="0123456789abcdef",e=0;e<36;e++)t[e]=n.substr(Math.floor(16*Math.random()),1);return t[14]="4",t[19]=n.substr(3&t[19]|8,1),t[8]=t[13]=t[18]=t[23]="-",t.join("")},t}())||r);!function(t){t[t.go=0]="go",t[t.stop=1]="stop",t[t.pause=2]="pause",t[t.recovery=3]="recovery",t[t.click_entity=4]="click_entity",t[t.click_land=5]="click_land",t[t.post_order=6]="post_order",t[t.change_onwer=7]="change_onwer",t[t.post_task=8]="post_task",t[t.post_act=9]="post_act",t[t.mie_wang=10]="mie_wang"}(i||(i=t("EventType",{})));t("EventMsg",function(){function t(){}t.GetIns=function(){return new t};var n=t.prototype;return n.setStr=function(t){return this.str=t,this},n.setCode=function(t){return this.code=t,this},n.setNode=function(t){return this.node=t,this},n.setObject=function(t){return this.object=t,this},n.setId=function(t){return this.id=t,this},n.setComponent=function(t){return this.component=t,this},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/FarmLandController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseComponent.ts"],(function(r){"use strict";var t,n,e,o,i;return{setters:[function(r){t=r.inheritsLoose},function(r){n=r.cclegacy,e=r._decorator,o=r.Collider},function(r){i=r.default}],execute:function(){var a;n._RF.push({},"ae00dbEkHhIdo2zpohXsZb9","FarmLandController",void 0);var s=e.ccclass;e.property,r("FarmLandController",s("FarmLandController")(a=function(r){function n(){return r.apply(this,arguments)||this}t(n,r);var e=n.prototype;return e.start=function(){this.getComponent(o).on("onTriggerEnter",this.onTriggerEnter,this)},e.onTriggerEnter=function(r){this.log(this.node.parent.name+"碰到"+r.otherCollider.node.parent.name+"--------------")},n}(i))||a);n._RF.pop()}}}));

System.register("chunks:///_virtual/GameController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CameraController.ts","./BetrayHelper.ts","./DynamicHelper.ts","./KingAI.ts","./EntityIconController.ts","./CunDangHelper.ts","./BuildingController.ts","./DataControler.ts","./AStarRoadSeeker.ts","./BaseComponent.ts","./EntityHelper.ts","./CanvasController.ts","./EventBus.ts","./GameHelper.ts","./BgSoundController.ts","./TeamIconController.ts","./SelectSceneController.ts","./SelectPosPannelController.ts","./RenderHelper.ts"],(function(t){"use strict";var e,n,s,a,i,o,r,c,d,l,u,h,g,p,v,f,m,y,C,b,I,S,G,k,B,D,H,w,E,A,P,M,O,T,_,R,x,F;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,s=t.initializerDefineProperty,a=t.assertThisInitialized,i=t.createForOfIteratorHelperLoose},function(t){o=t.cclegacy,r=t._decorator,c=t.Asset,d=t.find,l=t.log,u=t.director,h=t.instantiate,g=t.v3},function(t){p=t.CameraController},function(t){v=t.BetrayHelper},function(t){f=t.DynamicHelper},function(t){m=t.KingAI},function(t){y=t.EntityIconController},function(t){C=t.CunDangHelper},function(t){b=t.BuildingController},function(t){I=t.GameStatus,S=t.DataControler,G=t.EntityType,k=t.People},function(t){B=t.default},function(t){D=t.default},function(t){H=t.EH,w=t.Entity},function(t){E=t.CanvasController},function(t){A=t.EventBus,P=t.EventType,M=t.EventMsg},function(t){O=t.default},function(t){T=t.BgSoundController},function(t){_=t.TeamIconController},function(t){R=t.SelectSceneController},function(t){x=t.SelectPosPannelController},function(t){F=t.RenderHelper}],execute:function(){var q,z,K,L,j,N;o._RF.push({},"fed27PBaCBIWIfb0JlAX9K3","GameController",void 0);var J=r.ccclass,X=r.property;t("GameController",(q=J("GameController"),z=X(c),q(((N=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i))||this,s(e,"mapData",j,a(e)),e.entities=new Map,e.kingdoms=new Map,e.peoples=new Map,e.kings=new Map,e.gameStatus=I.stop,e}n(e,t),e.getInstance=function(){return this.instance};var o=e.prototype;return o.onLoad=function(){e.instance=this,F.init(),this.aStar=B.getInstance(),this.dc=S.getInstance(),this.cc=d("Canvas").getComponent(E),this.ec=d("Canvas").getComponent(y),this.bc=d("Canvas").getComponent(T),this.tc=d("Canvas").getComponent(_),this.cs=d("Camera").getComponent(p)},o.onDestroy=function(){e.instance=null},o.update=function(t){this.gameStatus==I.go&&(this.second-=100*t,this.cc.setPrecent(this.second/1e3),v.update(),v.updateTouben(),v.updateDisaster()),this.second<=0&&(l("----回合结束----"),this.gameStatus=I.stop,this.cundang.index++,this.second=1e3,this.cc.showGoIcon(),A.getInstance().board(P.stop,M.GetIns()),this.cc.addInfomationsToStack(H.c2r("主公请下令","white")),this.cc.showInformationsFromStack(),O.playMusic(this.node,"回合开始",!1,1))},o.checkChongfu=function(){if(!e.isGameProduct){for(var t,n=new Map,s=i(this.peoples.keys());!(t=s()).done;){var a=t.value;n.set(a,a)}for(var o,r=i(this.kingdoms.values());!(o=r()).done;)for(var c,d=o.value,l=i(d.entities);!(c=l()).done;)for(var u,h=c.value,g=i(this.entities.get(h).peoples);!(u=g()).done;){var p=u.value;n.get(p)&&n.delete(p)}}},o.go=function(){if(this.gameStatus==I.stop){this.cundang.index%18==0&&0!=this.cundang.index&&this.log("===============模拟播放广告,嘻嘻================="),l("--AI发布命令--"),this.gameStatus=I.ai;for(var t,e=i(this.kings.values());!(t=e()).done;){t.value.make()}this.invoke(this.reallyGo,1),O.playMusic(this.node,"游戏开始",!1,1)}else l("---无法切换当前状态1--")},o.reallyGo=function(){this.gameStatus==I.ai?(l("--回合开始--"),this.gameStatus=I.go,this.second=1e3,A.getInstance().board(P.go,M.GetIns()),d("Canvas").getComponent(y).hideAllSelect(),this.checkChongfu()):l("---无法切换当前状态4--")},o.pause=function(){this.gameStatus==I.go?(l("--回合暂停--"),this.gameStatus=I.pause,A.getInstance().board(P.pause,M.GetIns())):l("--无法切换当前状态2--")},o.recovery=function(){this.gameStatus==I.pause?(l("--回合恢复--"),this.gameStatus=I.go,A.getInstance().board(P.recovery,M.GetIns())):l("---无法切换当前状态3--")},o.start=function(){this.cc.showCoverAndTipsOrHide(!0),this.arr=[];var t=JSON.parse(this.mapData._nativeAsset);if(t&&100==t.length?this.arr=t:this.log("地图数据加载错误"),this.cundang=C.getInstance().makeCunDangOne(),this.getString("select_scene")){var e=this.getString("select_scene");if("juqing"==e){this.cundang=R.selectJuQing;for(var n,s=i(this.cundang.entities);!(n=s()).done;){var a=n.value;a.shiqi=80,a.mingxing=60;var o;o=this.dc.bds.get(a.name).size,a.type==G.city?(a.bingyi=500*o,a.shouyi=20*o,a.shuishou=10*(o-1),a.shuishou<0&&(a.shuishou=0),a.bubing=2e3*o,a.food=1e3*o,O.checKIsArrayContainsItem(a.name,this.dc.qibingBuildings)&&(a.qibing=500),O.checKIsArrayContainsItem(a.name,this.dc.gongbingBuildings)&&(a.gongbing=500),O.checKIsArrayContainsItem(a.name,this.dc.shuibingBuildings)&&(a.shuibing=500)):a.type!=G.gate&&a.type!=G.port||(a.bubing=2e3,a.food=1e3)}for(var r,c=i(this.cundang.kingdoms);!(r=c()).done;){for(var d,p=r.value,v=2e3,y=i(p.entities);!(d=y()).done;){for(var b,I=d.value,S=null,B=i(this.cundang.entities);!(b=B()).done;){var D=b.value;D.name==I&&(S=D)}if(S&&S.type==G.city)v+=1e3*this.dc.bds.get(S.name).size}p.money=v}}else{if(!e.includes("cache_")||!this.getString(e))return l("BUG--没有相关剧情或存档"),A.getInstance().removeAll(),void u.loadScene("SelectScene");this.cundang=C.getInstance().getData(e)}}this.cundang.relationships||(this.cundang.relationships=new Map),this.cundang.treatys||(this.cundang.treatys=new Map),this.year=this.cundang.year,this.month=this.cundang.month,this.xun=this.cundang.xun,this.playerId=this.cundang.playerId,this.hasHanXianDi=this.cundang.hasHanXianDi,this.cc.logs=this.cundang.logs;for(var E,P=i(this.dc.bds.keys());!(E=P()).done;){var M=E.value,T=new w;T.name=M,T.type=this.dc.bds.get(M).type,this.entities.set(M,T)}for(var _,F=i(this.dc.pps.keys());!(_=F()).done;){var q=_.value,z=new k;z.name=q,this.peoples.set(q,z)}for(var K,L=i(this.cundang.entities);!(K=L()).done;){var j=K.value;this.entities.set(j.name,j)}for(var N,J=0,X=i(this.cundang.kingdoms);!(N=X()).done;){var Q=N.value;if(this.kingdoms.set(Q.kingId,Q),J++,Q.setIndex(J),Q.kingId!=this.playerId){var U=new m;U.init(Q.kingId),this.kings.set(Q.kingId,U)}}H.changeMapValue(this.arr),this.aStar.init(this.arr),x.buildImageOnGameStart(!0,this),x.buildImageOnGameStart(!1,this);for(var V,W=i(this.cundang.peoples);!(V=W()).done;){var Y=V.value;this.peoples.set(Y.name,Y)}for(var Z=O.prefabs.get("Tree"),$=0;$<this.arr.length;$++)for(var tt=0;tt<this.arr[$].length;tt++){if(5==this.arr[$][tt]){var et=h(Z),nt=g($-50,0,50-tt);this.node.addChild(et),et.position=nt}}for(var st=O.prefabs.get("Marsh"),at=0;at<this.arr.length;at++)for(var it=0;it<this.arr[at].length;it++){if(9==this.arr[at][it]){var ot=h(st),rt=g(at-50,-.01,50-it);this.node.addChild(ot),ot.position=rt}}for(var ct,dt=i(this.entities.values());!(ct=dt()).done;){var lt=ct.value;""==H.getKingdomIdByEntityName(lt.name)&&(lt.bubing=0,lt.shuibing=0,lt.gongbing=0,lt.qibing=0,lt.troops=0,lt.food=0,lt.bingyi=0,lt.mingxing=0,lt.shiqi=0,lt.gbs=0,lt.bbs=0,lt.sbs=0,lt.qbs=0)}for(var ut,ht=O.prefabs.get("Port"),gt=i(this.dc.bds.values());!(ut=gt()).done;){var pt=ut.value;if(2==pt.type){var vt=h(ht);this.addPort(vt,pt)}}for(var ft,mt=O.prefabs.get("City"),yt=i(this.dc.bds.values());!(ft=yt()).done;){var Ct=ft.value;if(1==Ct.type){var bt=h(mt);this.addCity(bt,Ct)}}for(var It,St=O.prefabs.get("Gate"),Gt=i(this.dc.bds.values());!(It=Gt()).done;){var kt=It.value;if(3==kt.type){var Bt=h(St);this.addGate(Bt,kt)}}var Dt=O.prefabs.get("Group");this.groupPrefab=Dt;for(var Ht,wt=i(this.entities.values());!(Ht=wt()).done;){var Et=Ht.value;if(Et.type==G.army){var At=h(Dt);f.addGroupOnLoadGame(At,Et)}}for(var Pt,Mt=i(this.entities.values());!(Pt=Mt()).done;){var Ot=Pt.value;Ot.type==G.team&&f.addTeamOnLoad(Ot)}},o.addCity=function(t,e){this.node.parent.addChild(t),t.name=e.name;var n=0;1==e.size?(t.scale=g(.45,.5,.45),n=4):3==e.size?(t.scale=g(.55,.5,.55),n=13):(t.scale=g(.5,.5,.5),n=8);for(var s=0;s<n;s++)t.getChildByName("Houses").getChildByName("Cube"+s).active=!0;t.position=g(e.pos[0]-50,.1,50-e.pos[1]),t.addComponent(b).entity=this.entities.get(e.name),this.ec.addIcon(e.name,t)},o.addPort=function(t,e){this.node.parent.addChild(t),t.name=e.name,t.scale=g(.5,.5,.5),e.pos[0]==e.pos[2]?(t.position=g(e.pos[0]-50,0,50-(e.pos[1]+e.pos[3])/2),e.pos[1]>e.pos[3]?t.setRotationFromEuler(0,0,0):t.setRotationFromEuler(0,180,0)):e.pos[1]==e.pos[3]?(t.position=g((e.pos[0]+e.pos[2])/2-50,0,50-e.pos[1]),e.pos[0]>e.pos[2]?t.setRotationFromEuler(0,270,0):t.setRotationFromEuler(0,90,0)):this.log("港口固定数据错误"),t.addComponent(b).entity=this.entities.get(e.name),this.ec.addIcon(e.name,t)},o.addGate=function(t,e){this.node.parent.addChild(t),t.name=e.name,t.scale=g(.5,.5,.5),e.pos[0]==e.pos[2]?(t.position=g(e.pos[0]-50,0,50-(e.pos[1]+e.pos[3])/2),t.setRotationFromEuler(0,90,0)):e.pos[1]==e.pos[3]?t.position=g((e.pos[0]+e.pos[2])/2-50,0,50-e.pos[1]):this.log("关隘固定数据错误"),t.addComponent(b).entity=this.entities.get(e.name),this.ec.addIcon(e.name,t)},o.postOrder=function(t){A.getInstance().board(P.post_order,M.GetIns().setObject(t))},o.postTask=function(t){A.getInstance().board(P.post_task,M.GetIns().setObject(t))},o.postAct=function(t){A.getInstance().board(P.post_act,M.GetIns().setObject(t))},e}(D)).isGameProduct=!1,j=e((L=N).prototype,"mapData",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=L))||K));o._RF.pop()}}}));

System.register("chunks:///_virtual/GameHelper.ts",["./rollupPluginModLoBabelHelpers.js","cc","./DataControler.ts"],(function(t){"use strict";var e,n,o,r,i,a,s,u,c;return{setters:[function(t){e=t.createForOfIteratorHelperLoose},function(t){n=t.cclegacy,o=t._decorator,r=t.AudioSource,i=t.log,a=t.v3,s=t.Vec3,u=t.error},function(t){c=t.DataControler}],execute:function(){var l,g;n._RF.push({},"d8fc0nie0NM5JHGDOvmlz0o","GameHelper",void 0);var d=o.ccclass;o.property,t("default",d(((g=function(){function t(){}return t.playMusic=function(t,n,o,a){if(0!=this.isPlayMusic)if(t)if(this.audios.get(n)){for(var s,u=null,c=e(t.getComponents(r));!(s=c()).done;){var l=s.value;if(l&&l.state==r.AudioState.STOPPED){u=l;break}}u&&u.state!=r.AudioState.PLAYING||(u=t.addComponent(r)),u.loop=o,u.volume=a,u.playOneShot(this.audios.get(n))}else i("------BUG---有音频资源未预加载:"+n);else i("------BUG---播放音效的节点不存在-------")},t.getRandom=function(t,e){var n=e-t+1;return Math.floor(Math.random()*n+t)},t.getId=function(){return this.getRandom(1e7,99999999)},t.getWorldPos=function(t){return t.getWorldPosition(t.position)},t.getNodePos=function(t,e){return t.getPosition(a(e.x,e.y,e.z))},t.changeParent=function(t,e){var n=this.getWorldPos(t);t.parent=e,t.position=e.getPosition(n)},t.getTimeBySpeed=function(t,e,n){return null!=t?this.getDistance(t.position,e)/n:0},t.getTime=function(t,e){return this.getTimeBySpeed(t,e,200)},t.getDistance=function(t,e){return Math.abs(s.distance(t,e))},t.checKIsArrayContainsItem=function(t,n){for(var o,r=e(n);!(o=r()).done;){if(o.value==t)return!0}return!1},t.spliceItemFormArray=function(t,e){for(var n=0;n<e.length;n++)if(e[n]==t)return void e.splice(n,1);i("---------有BUG-要删除的字符串不存在---------")},t.getGirdPos=function(t){return[Math.round(t.x)+50,50-Math.round(t.z)]},t.getWorldPosByGird=function(t){return a(t[0]-50,0,50-t[1])},t.getKey=function(t,e){if(!t||0==t.length||!e||0==e.length)throw u("---getKey-bug---");for(var n=0,o=0;o<t.length;o++)n+=t.charCodeAt(o);for(var r=0,i=0;i<e.length;i++)r+=e.charCodeAt(i);return n>r?t+"-"+e:n<r?e+"-"+t:t.charCodeAt(0)>e.charCodeAt(0)?t+"-"+e:e+"-"+t},t.lookat=function(t,e){t.lookAt(a(e.x,t.position.y,e.z))},t.getTip=function(){var t="没有提示";return c.getInstance().tips.length-1<c.getInstance().tipIndex&&(c.getInstance().tipIndex=0),c.getInstance().tips[c.getInstance().tipIndex]&&(t="提示: "+c.getInstance().tips[c.getInstance().tipIndex]),c.getInstance().tipIndex++,t},t}()).isPlayMusic=!0,l=g))||l);n._RF.pop()}}}));

System.register("chunks:///_virtual/GameValueHelper.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameController.ts","./DataControler.ts","./EntityHelper.ts","./GameHelper.ts"],(function(e){"use strict";var t,n,a,i,y,r,g,o,s,p;return{setters:[function(e){t=e.createForOfIteratorHelperLoose},function(e){n=e.cclegacy,a=e._decorator,i=e.log},function(e){y=e.GameController},function(e){r=e.DataControler,g=e.EntityType,o=e.ArmyType},function(e){s=e.EH},function(e){p=e.default}],execute:function(){n._RF.push({},"1b0f0BjAPhF9qqKfMNHWfnf","GameValueHelper",void 0);a.ccclass,a.property,e("GameValueHelper",function(){function e(){}return e.cutFoodAndShiqi=function(t){if(e.checkIsEntityBelongManzu(t.name)&&0==t.isBuilding()){var n=y.getInstance().kingdoms.get(s.getKingdomIdByEntityName(t.name));p.getRandom(0,10)>8&&(n.money--,n.money<10&&(n.money=10,e.cutShiqiOnGame(t)))}else{var a=Math.round((t.getBili()+2*t.getShangyuan())/400);a<2&&(a=2),t.food-=a,t.food<0?(t.food=0,e.cutShiqiOnGame(t)):t.food>t.getBili()&&p.getRandom(0,99)>95&&t.shiqi<50&&t.shiqi++}},e.checkIsEntityBelongManzu=function(e){var t=!1,n=s.getKingdomIdByEntityName(e),a=r.getInstance();""!=n&&(a.pps.get(n).isManzu&&(t=!0));return t},e.cutShiqiOnGame=function(e){if(e.shiqi--,e.shiqi<0&&(e.shiqi=0),e.shiqi<30)if(e.type==g.army){var t=Math.floor(e.troops/1e3);t<10&&(t=10),e.troops>110&&(e.troops-=t)}else if(e.type==g.city||e.type==g.gate||e.type==g.port)if(e.bubing>110){var n=Math.floor(e.bubing/1e3);n<10&&(n=10),e.bubing-=n}else if(e.shuibing>105){var a=Math.floor(e.shuibing/1e3);a<5&&(a=5),e.shuibing-=a}else if(e.gongbing>105){var i=Math.floor(e.gongbing/1e3);i<5&&(i=5),e.gongbing-=i}else if(e.qibing>105){var y=Math.floor(e.qibing/1e3);y<5&&(y=5),e.qibing-=y}},e.huifu=function(e){if(e.bbs>10){var t=Math.round(e.bbs/5);t<=e.bbs&&(e.bbs-=t,e.bubing+=t)}else e.bbs=0;if(e.qbs>10){var n=Math.round(e.qbs/5);n<=e.qbs&&(e.qbs-=n,e.qibing+=n)}else e.qbs=0;if(e.sbs>10){var a=Math.round(e.sbs/5);a<=e.sbs&&(e.sbs-=a,e.shuibing+=a)}else e.sbs=0;if(e.gbs>10){var i=Math.round(e.gbs/5);i<=e.gbs&&(e.gbs-=i,e.gongbing+=i)}else e.gbs=0},e.getHurt=function(e,n){var a=r.getInstance(),i=0,y=1;e.type==g.city?y+=a.bds.get(e.name).size*e.health*.005:e.type==g.gate?y=.02*e.health:e.type==g.port&&(y=.01*e.health);for(var s,p=t(n.values());!(s=p()).done;){for(var b,u=s.value,m=this.getPermeter(u,e),c=u.getBili(),d=50,l=t(u.peoples);!(b=l()).done;){var h=b.value;u.type==g.army?u.armyType==o.bb?a.pps.get(h).bb>d&&(d=5*a.pps.get(h).bb+50):u.armyType==o.qb?a.pps.get(h).qb>d&&(d=5*a.pps.get(h).qb+50):u.armyType==o.sb?a.pps.get(h).sb>d&&(d=5*a.pps.get(h).sb+50):u.armyType==o.gb&&a.pps.get(h).gb>d&&(d=5*a.pps.get(h).gb+50):a.pps.get(h).ts>d&&(d=a.pps.get(h).ts)}i+=m*c*d}var f=Math.round(i/(1e3*y));e.type==g.army?e.troops>f?(e.troops-=f,e.ts+=Math.round(f/2)):e.troops=0:(e.bubing>0?(e.bubing-=f,e.bbs+=Math.round(f/2)):e.shuibing>0?(e.shuibing-=f,e.sbs+=Math.round(f/2)):e.gongbing>0?(e.gongbing-=f,e.gbs+=Math.round(f/2)):e.qibing>0&&(e.qibing-=f,e.qbs+=Math.round(f/2)),e.bubing<0?e.bubing=0:e.shuibing<0?e.shuibing=0:e.gongbing<0?e.gongbing=0:e.qibing<0&&(e.qibing=0))},e.cutShouyi=function(e,n){if(!(p.getRandom(0,99)>2)){for(var a,i=0,y=t(n.values());!(a=y()).done;){i+=a.value.getBili()}e.shouyi-=Math.round(i/100),e.shouyi<0&&(e.shouyi=0)}},e.getPermeter=function(e,t){var n=o.bb,a=o.sb,i=o.gb,y=o.qb,r=0;return e.type==g.city||e.type==g.gate?t.type!=g.army||t.armyType!=n&&t.armyType!=a?t.type==g.army&&t.armyType==y?r=.2:t.type==g.army&&t.armyType==i&&(r=.8*.2):r=.2:e.type==g.port?t.type!=g.army||t.armyType!=n&&t.armyType!=a?t.type==g.army&&t.armyType==y?r=.24:t.type==g.army&&t.armyType==i&&(r=.2):r=.24:e.type!=g.army||e.armyType!=n&&e.armyType!=a?e.type==g.army&&e.armyType==y?t.type==g.city||t.type==g.gate?r=.5:t.type==g.port?r=.8:t.type!=g.army||t.armyType!=n&&t.armyType!=a?t.type==g.army&&t.armyType==y?r=.8:t.type==g.army&&t.armyType==i&&(r=1.2):r=1:e.type==g.army&&e.armyType==i?t.type==g.city||t.type==g.gate?r=1.2:t.type==g.port?r=1.6:t.type!=g.army||t.armyType!=n&&t.armyType!=a?t.type==g.army&&t.armyType==y?r=.8:t.type==g.army&&t.armyType==i&&(r=.9):r=.9:r=0:t.type==g.city||t.type==g.gate||t.type==g.port?r=.8:t.type!=g.army||t.armyType!=n&&t.armyType!=a?t.type==g.army&&t.armyType==y?r=.8:t.type==g.army&&t.armyType==i&&(r=1.2):r=1,e.type==g.army&&e.armyType==o.sb&&e.isInRiver&&(r*=1.5),r},e.getSpeedPermeter=function(e){var t=r.getInstance().pps.get(s.getCaptainInEntity(e));return t.ts>50?(t.ts-50)/200+1:1},e.checkBaoji=function(e,n){for(var a,i=r.getInstance(),b=y.getInstance(),u=0,m="",c=t(e.peoples);!(a=c()).done;){var d=a.value,l=-1;e.armyType==o.bb?l=i.pps.get(d).bb:e.armyType==o.qb?l=i.pps.get(d).qb:e.armyType==o.sb?l=i.pps.get(d).sb:e.armyType==o.gb&&(l=i.pps.get(d).gb),l>u&&(u=l,m=d)}if(""!=m){var h=i.pps.get(m).xg,f=p.getRandom(0,100);if(!(f<80&&0==h||f<85&&1==h||f<90&&2==h||f<95&&3==h)){for(var v,T=null,q=t(n.values());!(v=q()).done;){T=v.value}if(T){var I=0;I=e.type==g.army?e.troops:e.bubing+e.shuibing+e.gongbing+e.qibing;var M=Math.round(I*u*(p.getRandom(100,110)/100)*.01);T.type==g.army?T.troops>M?T.troops-=M:T.troops=0:(T.bubing>0?T.bubing-=M:T.shuibing>0?T.shuibing-=M:T.gongbing>0?T.gongbing-=M:T.qibing>0&&(T.qibing-=M),T.bubing<0?T.bubing=0:T.shuibing<0?T.shuibing=0:T.gongbing<0?T.gongbing=0:T.qibing<0&&(T.qibing=0)),b.ec.showCutNumber(M,T.name);var B=!1;if((s.getKingdomIdByEntityName(e.name)==b.playerId||s.getKingdomIdByEntityName(T.name)==b.playerId)&&(B=!0),B&&T.peoples.length>0&&e.peoples.length>0){var E=[];E.push({id:e.getCaptain(),msg:s.c2r(T.getCaptain())+",杀你个片甲不留!"}),M>200?(E.push({id:T.getCaptain(),msg:"损兵折将啊,我竟然大意了,损兵折将啊!"}),E.push({id:e.getCaptain(),msg:"哈哈,我军士气大振,大家一鼓作气继续乘胜追击!"})):(E.push({id:T.getCaptain(),msg:"还好我早有防备,"+s.c2r(e.getCaptain())+",这一切都是徒劳!"}),E.push({id:e.getCaptain(),msg:"可恶,"+s.c2r(T.getCaptain())+",勿要小人得志,看谁笑到最后!"})),b.cc.showDialogs(E)}}}}},e.showArmyAudioEffect=function(e,t){var n=y.getInstance();e.isInWar?e.armyType==o.bb||e.armyType==o.sb?n.bc.changeSound(t,"射箭"):e.armyType==o.gb?n.bc.changeSound(t,"投石"):e.armyType==o.qb&&n.bc.changeSound(t,"射箭"):e.isInRiver?n.bc.changeSound(t,"行船"):e.armyType==o.bb||e.armyType==o.sb?n.bc.changeSound(t,"步兵行军"):e.armyType==o.gb?n.bc.changeSound(t,"工兵行军"):e.armyType==o.qb&&n.bc.changeSound(t,"轻骑兵")},e.addAllKindomMoney=function(){i("计算季度商业税收");for(var n,a=y.getInstance(),r=t(a.kingdoms.values());!(n=r()).done;){for(var o,s=n.value,p=0,b=t(a.kingdoms.get(s.kingId).entities);!(o=b()).done;){var u=o.value,m=a.entities.get(u);m.type==g.city&&(e.checkIsEntityBelongManzu(u)?p+=5*m.shuishou:p+=10*m.shuishou)}s.money+=p}},e.addAllEntityFood=function(){i("计算秋季农业收益");for(var n,a=y.getInstance(),r=t(a.entities.values());!(n=r()).done;){var o=n.value;if(o.type==g.city&&""!=s.getKingdomIdByEntityName(o.name)){a.dc.bds.get(o.name);e.checkIsEntityBelongManzu(o.name)||(o.food+=10*o.shouyi)}}},e.addAllEntityBingyi=function(){i("计算春季兵役人数");for(var e,n=y.getInstance(),a=t(n.entities.values());!(e=a()).done;){var r=e.value,o=n.kingdoms.get(s.getKingdomIdByEntityName(r.name));r.type==g.city&&""!=s.getKingdomIdByEntityName(r.name)&&(r.bingyi+=(r.mingxing+o.credit)*n.dc.bds.get(r.name).size)}},e.cutAllEntitySalary=function(){i("计算每个月薪水");for(var e,n=y.getInstance(),a=t(n.entities.values());!(e=a()).done;){var r=e.value,g=n.kingdoms.get(s.getKingdomIdByEntityName(r.name));if(g)for(var o,p=t(r.peoples);!(o=p()).done;){var b=o.value,u=n.peoples.get(b);g.money>5*u.juewei+5?g.money-=5*u.juewei+5:(g.credit>1&&g.credit--,u.loyal>1&&u.loyal--)}}},e}());n._RF.pop()}}}));

System.register("chunks:///_virtual/GroupController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameValueHelper.ts","./GameController.ts","./EventBus.ts","./DataControler.ts","./EntityHelper.ts","./AStarRoadSeeker.ts","./PathFindingComponent.ts","./DynamicHelper.ts","./GameHelper.ts","./RenderHelper.ts","./EntityIconController.ts"],(function(t){"use strict";var i,e,n,s,o,h,r,a,g,y,d,c,u,l,m,p,v,I,f,E,T;return{setters:[function(t){i=t.inheritsLoose,e=t.createForOfIteratorHelperLoose},function(t){n=t.cclegacy,s=t._decorator,o=t.find,h=t.Collider},function(t){r=t.GameValueHelper},function(t){a=t.GameController},function(t){g=t.EventBus,y=t.EventType},function(t){d=t.GameStatus,c=t.DataControler,u=t.OrderType,l=t.EntityType},function(t){m=t.EH},function(t){p=t.default},function(t){v=t.default},function(t){I=t.DynamicHelper},function(t){f=t.default},function(t){E=t.RenderHelper},function(t){T=t.EntityIconController}],execute:function(){var S;n._RF.push({},"8e5c3EjLixC+axDW54ExnA+","GroupController",void 0);var B=s.ccclass;s.property,t("GroupController",B("GroupController")(S=function(t){function n(){for(var i,e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];return(i=t.call.apply(t,[this].concat(n))||this).isMoving=!1,i.lastArmyCount=-1,i.lastArmyType=-1,i.updateIndex=0,i.colliderEntities=new Map,i.stayIndex=0,i}i(n,t);var s=n.prototype;return s.onStart=function(t,i){this.doAction()},s.onStop=function(t,i){this.stopGotoPos()},s.onPause=function(t,i){this.pause()},s.onRecovery=function(t,i){this.recover()},s.onChange=function(t,i){this.doAction()},s.onMieWang=function(t,i){m.getKingdomIdByEntityName(this.entity.name)!=t.str&&""!=m.getKingdomIdByEntityName(this.entity.name)||I.deleteArmy(this.node,this.entity)},s.onOrder=function(t,i){var e=t.object;e.id==this.entity.name&&(this.entity.tragetPos=e.pos,this.entity.traget=e.tragetId,this.entity.orderType=e.orderType,o("Canvas").getComponent(T).setEntitySelect(this.entity.name))},s.update=function(){this.updateIndex++,this.updateIndex%20==0&&this.gc.gameStatus==d.go&&this.render(),this.updateIndex%100==0&&this.gc.gameStatus==d.go&&(r.cutFoodAndShiqi(this.entity),r.showArmyAudioEffect(this.entity,this.node),this.checkWudi())},s.checkWudi=function(){(this.entity.food<=100||this.entity.troops<=100)&&(this.entity.troops>100&&(this.entity.troops=100),I.changeArmyToTeam(this.entity))},s.start=function(){this.armyType=this.entity.armyType,this.isTeam=!1,this.setCallback(this.onRiver.bind(this),this.onLand.bind(this),this.onNoWay.bind(this)),this.gc=a.getInstance(),this.dc=c.getInstance(),this.onStartEventId=g.getInstance().sub(this.onStart,y.go,this),this.onStopEventId=g.getInstance().sub(this.onStop,y.stop,this),this.onPauseEventId=g.getInstance().sub(this.onPause,y.pause,this),this.onRecoveryEventId=g.getInstance().sub(this.onRecovery,y.recovery,this),this.onOrderEventId=g.getInstance().sub(this.onOrder,y.post_order,this),this.onChangeEventId=g.getInstance().sub(this.onChange,y.change_onwer,this),this.onMieWangEventId=g.getInstance().sub(this.onMieWang,y.mie_wang,this);var t=this.getComponent(h);t.on("onTriggerStay",this.onTriggerStay,this),t.on("onTriggerExit",this.onTriggerExit,this),t.on("onTriggerEnter",this.onTriggerEnter,this),this.render(),this.gc.bc.addBgSound(this.node,"步兵行军")},s.onDisable=function(){this.stopGotoPos(),g.getInstance().unSub(this.onStartEventId),g.getInstance().unSub(this.onOrderEventId),g.getInstance().unSub(this.onRecoveryEventId),g.getInstance().unSub(this.onPauseEventId),g.getInstance().unSub(this.onStopEventId),g.getInstance().unSub(this.onChangeEventId),g.getInstance().unSub(this.onMieWangEventId),this.gc.bc.removeBgSound(this.node)},s.onRiver=function(){this.entity.isInRiver=!0,this.render()},s.onLand=function(){this.entity.isInRiver=!1,this.render()},s.onNoWay=function(){this.log(this.entity.name+"==做一次onNoWay回调判断==",this.entity),a.isGameProduct,m.checkIsEntityMine(this.entity.homeId,m.getKingdomIdByEntityName(this.entity.name))?(this.entity.orderType=u.join,this.entity.traget=this.entity.homeId,this.doAction()):(this.entity.orderType=u.attack,this.entity.traget=this.entity.homeId,this.doAction())},s.render=function(){E.renderArmy(this)},s.onArrived=function(){this.log("--------onArrived--"+this.entity.name+"---------"),this.stopGotoPos(),this.isMoving=!1,this.doAction(!0)},s.onTriggerEnter=function(t){var i=t.otherCollider.node.name;if(!m.checkIsTwoEntityFrineds(this.entity,m.getEntityByName(i))&&!this.colliderEntities.has(i)&&this.gc.entities.has(i)&&this.gc.entities.get(i).type!=l.team){var e=m.getKingdomIdByEntityName(i),n=m.getKingdomIdByEntityName(this.entity.name);(i==this.entity.traget||""!=e&&e!=n)&&(this.colliderEntities.set(i,this.gc.entities.get(i)),this.entity.isInWar=!0,this.doAction())}},s.onTriggerStay=function(t){if(this.gc.gameStatus==d.go&&(this.stayIndex++,this.stayIndex%100==0)){if(this.colliderEntities.size>0){if(r.getHurt(this.entity,this.colliderEntities),0==this.entity.peoples.length)return void I.deleteArmy(this.node,this.entity);for(var i,n=e(this.colliderEntities.values());!(i=n()).done;){var s=i.value,o=s.peoples,h=this.entity.peoples,a=1;s.isBuilding()&&(a=2);for(var g,y=e(o);!(g=y()).done;)for(var c,p=g.value,v=e(h);!(c=v()).done;){var E=c.value;if(f.getRandom(0,99)>95){var T=m.getRelationship(p,E);T-=a,m.setRelationship(p,E,T)}}}r.checkBaoji(this.entity,this.colliderEntities)}for(var S,B=e(this.colliderEntities.values());!(S=B()).done;){var A=S.value;if(A.name==this.entity.traget){var C=this.gc.entities.get(A.name);if(C.type==l.city||C.type==l.port||C.type==l.gate)C.bubing+C.qibing+C.shuibing+C.gongbing<=100&&(r.checkIsEntityBelongManzu(this.entity.name)?(this.entity.orderType=u.join,this.entity.traget=this.entity.homeId,this.doAction()):I.captureBuildingByArmyOnGame(C,this.entity,this.node))}}this.render(),this.checkWudi();for(var G,k=e(this.colliderEntities.values());!(G=k()).done;){var M=G.value;if(M.type==l.army)if(I.getCaptive(this.entity,M))return}}},s.onTriggerExit=function(t){var i=t.otherCollider.node.name;this.colliderEntities.has(i)&&(this.colliderEntities.delete(i),0==this.colliderEntities.size&&(this.entity.isInWar=!1),this.doAction())},s.doAction=function(t){if(void 0===t&&(t=!1),0!=this.node.active&&this.gc.gameStatus==d.go)if(this.stopGotoPos(),this.entity.orderType==u.attack)this.gc.entities.get(this.entity.traget)?this.gc.entities.get(this.entity.traget).type==l.army?this.attackGroup():this.gc.entities.get(this.entity.traget).type==l.team?this.changeGroupToJoinType(this.entity.homeId):this.attackBuilding():this.changeGroupToJoinType(this.entity.homeId);else if(this.entity.orderType==u.join)this.joinBuilding(t);else if(this.entity.orderType==u.stay){if(this.colliderEntities.size>0)for(var i,n=e(this.colliderEntities.values());!(i=n()).done;){var s=i.value;if(s.type==l.army)return void this.attackMeetGroup(s)}this.stayPostion()}},s.checkIsTargetInCollider=function(){return!!this.colliderEntities.get(this.entity.traget)},s.checkIsEnemyInCollider=function(){for(var t,i=e(this.colliderEntities.keys());!(t=i()).done;){var n=t.value;if(m.getKingdomIdByEntityName(n)!=m.getKingdomIdByEntityName(this.entity.name))return!0}return!1},s.checkIsEntityMine=function(t){var i=m.getKingdomIdByEntityName(this.entity.name);if(""==i)return!1;for(var n,s=e(this.gc.kingdoms.get(i).entities);!(n=s()).done;){if(n.value==t)return!0}return!1},s.changeGroupToJoinType=function(t){this.entity.orderType=u.join,this.entity.traget=t,this.joinBuilding()},s.attackGroup=function(){this.gc.entities.get(this.entity.traget)&&o(this.entity.traget)?(this.entity.tragetPos=this.getOtherGridPos(this.entity.traget),this.changeMySpeedNow(),this.isMoving=!0,this.gotoLand(this.gc.entities.get(this.entity.homeId),this.entity.tragetPos[0],this.entity.tragetPos[1],m.getKingdomIndexByEntityName(this.entity.name),this.onArrived,!1,this.checkIsTargetInCollider())):this.changeGroupToJoinType(this.entity.homeId)},s.attackMeetGroup=function(t){var i=this.getOtherGridPos(t.name);this.changeMySpeedNow(),this.isMoving=!0,this.gotoLand(this.gc.entities.get(this.entity.homeId),i[0],i[1],m.getKingdomIndexByEntityName(this.entity.name),this.onArrived,!1,!0)},s.attackBuilding=function(){0==this.checkIsEntityMine(this.entity.traget)?this.checkIsTargetInCollider()?(this.isMoving=!0,this.goAroundBuildingForGroup(this.gc.entities.get(this.entity.name),this.gc.entities.get(this.entity.traget),this.onArrived,m.getKingdomIndexByEntityName(this.entity.name),null)):(this.changeMySpeedNow(),this.isMoving=!0,this.gotoEntityForGroup(this.gc.entities.get(this.entity.homeId),this.gc.entities.get(this.entity.traget),this.onArrived,m.getKingdomIndexByEntityName(this.entity.name))):this.changeGroupToJoinType(this.entity.traget)},s.joinBuilding=function(t){void 0===t&&(t=!1),this.checkIsEntityMine(this.entity.traget)?t||this.checkIsTargetInCollider()?I.joinArmyToBuildingOnGame(this.gc.entities.get(this.entity.traget),this.entity,this.node):(this.changeMySpeedNow(),this.isMoving=!0,this.gotoEntityForGroup(this.gc.entities.get(this.entity.homeId),this.gc.entities.get(this.entity.traget),this.onArrived,m.getKingdomIndexByEntityName(this.entity.name))):null!=m.getClosestMineBuilding(this.entity)?(this.entity.traget=m.getClosestMineBuilding(this.entity),this.joinBuilding()):(this.log("势力没有任何建筑设施-已经灭亡了"),I.deleteArmy(this.node,this.entity))},s.stayPostion=function(){var t=this.gc.kingdoms.get(m.getKingdomIdByEntityName(this.entity.name)).index,i=p.getInstance().findPath(this.entity.name,this.getGirdPos()[0],this.getGirdPos()[1],this.entity.tragetPos[0],this.entity.tragetPos[1],t,this.gc.entities.get(this.entity.homeId).getData().index,0);null==i||0==i.length||1==i.length?this.isMoving=!1:(this.log(this.entity.name+"-朝目标赶路-------"),this.isMoving=!0,this.changeMySpeedNow(),this.gotoLand(this.gc.entities.get(this.entity.homeId),this.entity.tragetPos[0],this.entity.tragetPos[1],m.getKingdomIndexByEntityName(this.entity.name),this.onArrived))},s.changeMySpeedNow=function(){var t=1;this.checkIsEnemyInCollider()&&(t*=4),this.entity.ts>0&&this.entity.troops>0?this.entity.ts/this.entity.troops>.5?this.changeSpeed=.5*t:this.changeSpeed=t*(1-this.entity.ts/this.entity.troops):this.changeSpeed=t},n}(v))||S);n._RF.pop()}}}));

System.register("chunks:///_virtual/INavigationEngine.ts",["cc"],(function(){"use strict";var t;return{setters:[function(n){t=n.cclegacy}],execute:function(){t._RF.push({},"3fa952OEF1GlJkHIbCoB4f9","INavigationEngine",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/InfoShowPannelController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./DataControler.ts","./CameraController.ts","./EntityHelper.ts","./GameController.ts","./BasePannelController.ts","./GameHelper.ts"],(function(e){"use strict";var t,n,o,a,i,r,l,s,g,p,h,y,m,c,C,d,f,u,N,v;return{setters:[function(e){t=e.inheritsLoose,n=e.createForOfIteratorHelperLoose},function(e){o=e.cclegacy,a=e._decorator,i=e.find,r=e.instantiate,l=e.Sprite,s=e.Label,g=e.UITransform,p=e.v3,h=e.Node},function(e){y=e.DataControler,m=e.TypeGeter,c=e.ArmyType,C=e.EntityType},function(e){d=e.CameraController},function(e){f=e.EH},function(e){u=e.GameController},function(e){N=e.BasePannelController},function(e){v=e.default}],execute:function(){var B;o._RF.push({},"2dd73lMiApGSK3B1AWboSez","InfoShowPannelController",void 0);var I=a.ccclass;a.property,e("InfoShowPannelController",I("InfoShowPannelController")(B=function(e){function o(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return(t=e.call.apply(e,[this].concat(o))||this).peopleItemMap=new Map,t.isCompleteInit=!1,t}t(o,e);var a=o.prototype;return a.start=function(){this.pannel=this.node.getChildByName("InfoShowPannel"),this.cameraController=i("Camera").getComponent(d),this.gc=u.getInstance(),this.initPrefabs()},a.initPrefabs=function(){for(var e,t=v.prefabs.get("PeopleInfoItem"),o=this.gc.peoples,a=o.size,i=n(o.keys());!(e=i()).done;){var g=e.value,p=r(t);p.getChildByName("Head").getComponent(l).spriteFrame=y.getInstance().heads.get(g),p.getChildByName("Name").getComponent(s).string=g,this.peopleItemMap.set(g,p),0==--a&&(this.isCompleteInit=!0)}},a.showAllPeoples=function(){var e=this;if(!this.gc.cc.checkIsShowingSelectEntityOrPos())if(0!=this.isCompleteInit){var t=this.pannel.getChildByName("Pannel").getChildByName("ScrollView").getChildByName("Mask").getChildByName("Content");t.removeAllChildren();for(var o,a=0,i=this.gc.peoples,r=function(){var n=o.value;if(e.gc.playerId!=f.getKindomByPeopleName(n))return"continue";var i=e.peopleItemMap.get(n);i.position=a%2==0?p(0,150*Math.floor(a/2),0):p(500,150*Math.floor(a/2+1),0),a--;var r=e.gc.peoples.get(n),l=e.gc.dc.pps.get(n),g=e.gc.year-l.age,y="统帅:"+l.ts+" 智力:"+l.zs+" 内政:"+l.nz+" 武力:"+l.wl;y+=" "+m.getArmyType(c.bb)+":"+l.bb+" "+m.getArmyType(c.sb)+":"+l.sb+" "+m.getArmyType(c.qb)+":"+l.qb+" "+m.getArmyType(c.gb)+":"+l.gb,y+=" 忠诚:"+r.loyal+" 健康:"+r.health+" 爵位:"+r.juewei+" 年龄:"+g,i.getChildByName("Data").getComponent(s).string=y,f.getEntityByPeopleName(n)?i.getChildByName("Location").getComponent(s).string="位置:"+f.getEntityByPeopleName(n).getName():i.getChildByName("Location").getComponent(s).string="",t.addChild(i),i.off(h.EventType.TOUCH_END),i.on(h.EventType.TOUCH_END,(function(){f.getEntityByPeopleName(n)?(e.hide(),e.cameraController.moveToEntity(f.getEntityByPeopleName(n).name)):e.toast("该武将在野")}),e)},l=n(i.keys());!(o=l()).done;)r();t.getComponent(g).height=150*-Math.floor(a/2),this.showFrame(this.pannel,this.pannel.getChildByName("Pannel"))}else this.toast("数据尚未初始化完毕")},a.hide=function(){this.pannel&&this.hideFrame(this.pannel,this.pannel.getChildByName("Pannel"))},a.showAllEntities=function(){var e=this;if(!this.gc.cc.checkIsShowingSelectEntityOrPos()){var t=this.pannel.getChildByName("Pannel").getChildByName("ScrollView").getChildByName("Mask").getChildByName("Content");t.removeAllChildren();for(var o,a=v.prefabs.get("EntityInfoItem"),i=0,l=this.gc.entities,y=function(){var n=o.value;if(f.getKingdomIdByEntityName(n)!=e.gc.playerId)return"continue";var l=r(a);l.position=i%2==0?p(0,150*Math.floor(i/2),0):p(500,150*Math.floor(i/2+1),0),i--;var g=e.gc.entities.get(n);l.getChildByName("Name").getComponent(s).string=g.getName();var y="";""!=f.getKingdomIdByEntityName(n)&&(y+="归属:"+f.getKingdomIdByEntityName(n),f.getCaptainInEntity(g)&&(y+=" 主将:"+f.getCaptainInEntity(g))),l.getChildByName("Onwer").getComponent(s).string=y;var d="";g.type==C.army?(d+="兵种:"+m.getArmyType(g.armyType),d+=" 兵力:"+g.troops,d+=" 粮草:"+g.food):g.type==C.team?d+=" 任务:"+m.getOrderType(g.orderType):(d+=m.getArmyType(c.bb)+":"+g.bubing,d+=" "+m.getArmyType(c.sb)+":"+g.shuibing,d+=" "+m.getArmyType(c.qb)+":"+g.qibing,d+=" "+m.getArmyType(c.gb)+":"+g.gongbing,d+=" 粮草:"+g.food,d+=" 耐久度:"+g.health),l.getChildByName("Data").getComponent(s).string=d,t.addChild(l),l.on(h.EventType.TOUCH_END,(function(){e.hide(),e.cameraController.moveToEntity(n)}),e)},d=n(l.keys());!(o=d()).done;)y();t.getComponent(g).height=150*-Math.floor(i/2),this.showFrame(this.pannel,this.pannel.getChildByName("Pannel"))}},o}(N))||B);o._RF.pop()}}}));

System.register("chunks:///_virtual/KindomPannelController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./DataControler.ts","./EntityHelper.ts","./CameraController.ts","./GameController.ts","./BasePannelController.ts","./GameHelper.ts"],(function(e){"use strict";var n,t,o,i,a,r,l,s,c,C,u,m,d,g,h,v,p;return{setters:[function(e){n=e.inheritsLoose,t=e.createForOfIteratorHelperLoose},function(e){o=e.cclegacy,i=e._decorator,a=e.find,r=e.Node,l=e.UITransform,s=e.instantiate,c=e.v3,C=e.Label,u=e.Sprite},function(e){m=e.EntityType},function(e){d=e.EH},function(e){g=e.CameraController},function(e){h=e.GameController},function(e){v=e.BasePannelController},function(e){p=e.default}],execute:function(){var f;o._RF.push({},"6f236v0G05GB7naLocyJIPj","KindomPannelController",void 0);var y=i.ccclass;i.property,e("KindomPannelController",y("KindomPannelController")(f=function(e){function o(){return e.apply(this,arguments)||this}n(o,e);var i=o.prototype;return i.start=function(){this.gc=h.getInstance(),this.camera=a("Camera").getComponent(g),this.content=a("Canvas/KindomPannel/Pannel/ScrollView/View/Content"),a("Canvas/KindomPannel/Bg").off(r.EventType.TOUCH_END),a("Canvas/KindomPannel/Bg").on(r.EventType.TOUCH_END,this.hide,this)},i.show=function(){var e=this;if(!this.gc.cc.checkIsShowingSelectEntityOrPos()){this.showFrame(a("Canvas/KindomPannel"),a("Canvas/KindomPannel").getChildByName("Pannel")),this.content.removeAllChildren();var n=0;this.content.getComponent(l).height=150*this.gc.kingdoms.size;for(var o,i=p.prefabs.get("KindomItem"),m=[],h=t(this.gc.kingdoms.values());!(o=h()).done;){var v=o.value;m.push(v)}m.sort((function(n,t){var o=n.money/100+4*e.getCityCount(n)+e.getPeopleCount(n)+n.credit;return t.money/100+4*e.getCityCount(t)+e.getPeopleCount(t)+t.credit-o}));for(var f=function(){var t=P[y],o=s(i);e.content.addChild(o),o.position=c(-500,-75-150*n,0);var a=e.getCityCount(t),l=e.getPeopleCount(t),m="君主:"+t.kingId;m+=" 金钱:"+t.money,m+=" 信望:"+t.credit,m+=" 城池:"+a+"座",m+=" 武将:"+l+"位",o.getChildByName("Label").getComponent(C).string=m,o.getChildByName("Head").getComponent(u).spriteFrame=e.gc.dc.heads.get(t.kingId),n++,o.on(r.EventType.TOUCH_END,(function(){var n=d.getEntityByPeopleName(t.kingId);n&&e.camera.getComponent(g).moveToEntity(n.name),e.hide()}),e)},y=0,P=m;y<P.length;y++)f()}},i.hide=function(){this.hideFrame(a("Canvas/KindomPannel"),a("Canvas/KindomPannel").getChildByName("Pannel"))},i.getCityCount=function(e){for(var n,o=0,i=t(e.entities);!(n=i()).done;){var a=n.value,r=d.getEntityByName(a);r&&r.type==m.city&&o++}return o},i.getPeopleCount=function(e){for(var n,o=0,i=t(e.entities);!(n=i()).done;){var a=n.value,r=d.getEntityByName(a);r&&(o+=r.peoples.length)}return o},o}(v))||f);o._RF.pop()}}}));

System.register("chunks:///_virtual/KingAI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameController.ts","./DataControler.ts","./EntityHelper.ts","./GameHelper.ts","./BuildingController.ts","./AStarRoadSeeker.ts"],(function(t){"use strict";var e,i,n,s,o,a,h,g,r,d,c,u,l,m,p,y,f,v;return{setters:[function(t){e=t.createForOfIteratorHelperLoose},function(t){i=t.cclegacy,n=t._decorator,s=t.find,o=t.log},function(t){a=t.GameController},function(t){h=t.OrderType,g=t.EntityType,r=t.Task,d=t.TaskType,c=t.ActType,u=t.ArmyType,l=t.Order,m=t.Act},function(t){p=t.EH},function(t){y=t.default},function(t){f=t.BuildingController},function(t){v=t.default}],execute:function(){i._RF.push({},"9bdf0yjeVNIkaQXxreiBIvD","KingAI",void 0);n.ccclass,n.property,t("KingAI",function(){function t(){this.count=0,this.isShowLog=!0}var i=t.prototype;return i.init=function(t){this.id=t,this.gc=a.getInstance()},i.make=function(){var t=this.gc.dc.pps.get(this.id).zs,e=this.gc.dc.pps.get(this.id).nz,i=this.gc.dc.pps.get(this.id).wl,n=this.gc.dc.pps.get(this.id).ts,s=this.gc.dc.pps.get(this.id).xg;this.count=Math.round((t+e+n+i)/20),this.gc.dc.pps.get(this.id).isManzu?(y.getRandom(0,9)>3&&this.checkTuiBing(),y.getRandom(0,9)>1&&this.checkNearbyArmy(),y.getRandom(0,9)>2&&this.checkDefance(),y.getRandom(0,9)>2&&this.checkArmy(),y.getRandom(0,9)>2&&this.checkPeopleLoyal(),y.getRandom(0,9)>6&&this.xiushan(),y.getRandom(0,9)>4&&this.caolian(),y.getRandom(0,9)>5&&this.zhuzha(),y.getRandom(0,9)>2&&this.xirao(),y.getRandom(0,9)>2&&this.xunshi(),y.getRandom(0,9)>7&&this.maifu(),y.getRandom(0,9)>5&&this.attack()):4==s?(y.getRandom(0,9)>1&&this.checkTuiBing(),y.getRandom(0,9)>1&&this.checkBuildingFood(),y.getRandom(0,9)>1&&this.checkDefance(),y.getRandom(0,9)>1&&this.checkNearbyArmy(),y.getRandom(0,9)>1&&this.checkArmy(),y.getRandom(0,9)>1&&this.checkPeopleLoyal(),y.getRandom(0,9)>6&&this.attack(),y.getRandom(0,9)>3&&this.tansuo(),y.getRandom(0,9)>2&&this.xiushan(),y.getRandom(0,9)>2&&this.caolian(),y.getRandom(0,9)>2&&this.zhuzha(),y.getRandom(0,9)>5&&this.xirao(),y.getRandom(0,9)>4&&this.liuyan(),y.getRandom(0,9)>2&&this.xunshi(),y.getRandom(0,9)>2&&this.kaikeng(),y.getRandom(0,9)>6&&this.maifu()):3==s?(y.getRandom(0,9)>1&&this.checkTuiBing(),y.getRandom(0,9)>2&&this.checkBuildingFood(),y.getRandom(0,9)>1&&this.checkNearbyArmy(),y.getRandom(0,9)>2&&this.checkDefance(),y.getRandom(0,9)>2&&this.checkArmy(),y.getRandom(0,9)>4&&this.attack(),y.getRandom(0,9)>1&&this.checkPeopleLoyal(),y.getRandom(0,9)>4&&this.tansuo(),y.getRandom(0,9)>2&&this.xiushan(),y.getRandom(0,9)>3&&this.caolian(),y.getRandom(0,9)>3&&this.zhuzha(),y.getRandom(0,9)>2&&this.xirao(),y.getRandom(0,9)>2&&this.liuyan(),y.getRandom(0,9)>2&&this.xunshi(),y.getRandom(0,9)>3&&this.maifu(),y.getRandom(0,9)>2&&this.kaikeng()):2==s?(y.getRandom(0,9)>2&&this.checkTuiBing(),y.getRandom(0,9)>1&&this.checkNearbyArmy(),y.getRandom(0,9)>3&&this.checkBuildingFood(),y.getRandom(0,9)>2&&this.checkDefance(),y.getRandom(0,9)>4&&this.attack(),y.getRandom(0,9)>2&&this.checkArmy(),y.getRandom(0,9)>2&&this.checkPeopleLoyal(),y.getRandom(0,9)>6&&this.tansuo(),y.getRandom(0,9)>2&&this.xiushan(),y.getRandom(0,9)>2&&this.caolian(),y.getRandom(0,9)>2&&this.zhuzha(),y.getRandom(0,9)>2&&this.xirao(),y.getRandom(0,9)>2&&this.maifu(),y.getRandom(0,9)>2&&this.liuyan(),y.getRandom(0,9)>2&&this.xunshi(),y.getRandom(0,9)>2&&this.kaikeng()):1==s&&(y.getRandom(0,9)>1&&this.checkNearbyArmy(),y.getRandom(0,9)>4&&this.checkTuiBing(),y.getRandom(0,9)>3&&this.checkBuildingFood(),y.getRandom(0,9)>1&&this.attack(),y.getRandom(0,9)>4&&this.checkDefance(),y.getRandom(0,9)>4&&this.checkArmy(),y.getRandom(0,9)>5&&this.checkPeopleLoyal(),y.getRandom(0,9)>1&&this.maifu(),y.getRandom(0,9)>7&&this.tansuo(),y.getRandom(0,9)>3&&this.xiushan(),y.getRandom(0,9)>2&&this.caolian(),y.getRandom(0,9)>1&&this.zhuzha(),y.getRandom(0,9)>1&&this.xirao(),y.getRandom(0,9)>7&&this.liuyan(),y.getRandom(0,9)>4&&this.xunshi(),y.getRandom(0,9)>6&&this.kaikeng())},i.isAcceptPeople=function(){return y.getRandom(0,99)>50},i.isAcceptMengyue=function(){return y.getRandom(0,9)>5},i.isAcceptDisaster=function(){return y.getRandom(0,9)>5},i.checkTuiBing=function(){if(!(this.count<=0))for(var t,i=e(this.gc.entities.values());!(t=i()).done;){var n=t.value;if(this.count<=0)return;if(0!=n.isInWar&&(""!=p.getKingdomIdByEntityName(n.name)&&0!=n.isBuilding())){var o=s(n.name);if(o){var a=o.getComponent(f);if(a){var g=this.gc.kingdoms.get(n[0]);if(g)for(var r,d=e(a.colliderEntities);!(r=d()).done;){var c=r.value,u=p.getKingdomIdByEntityName(c[0]);if(p.getRelationship(g.kingId,u)&&u==this.id){var m=new l;m.orderType=h.join,m.homeId=this.getCloestMineBuilding(c[1]).name,m.id=c[0],this.count--,this.gc.postOrder(m),this.log(this.id+"AI发布退兵命令",m)}}}}}}},i.checkBuildingFood=function(){if(!(this.count<=0))for(var t,i=this.getMyBuildings(),n=e(i);!(t=n()).done;){var s=t.value;if(s.type!=g.army&&s.type!=g.team&&this.count>0&&0==s.isInWar){var o=s.getBili()/1e3*7*9,a=this.getMyMoney();if(o>s.food&&s.hasBusiness&&""!=this.getEmptyPeople(s.name)&&a>100){var h=new r;h.homeId=s.name,h.type=d.buy,h.num=100,h.people=this.getEmptyPeople(s.name),this.gc.postTask(h),this.count--,this.log(this.id+"AI发布买粮命令",h)}}}},i.checkArmy=function(){if(!(this.count<=0))for(var t,i=this.getMyEntities(),n=e(i);!(t=n()).done;){var s=t.value;if(s.type==g.army&&(s.troops<200||s.food<100)&&this.count>0){var o=new l;o.orderType=h.join,o.homeId=s.homeId,o.id=s.name,this.gc.postOrder(o),this.count--,this.log(this.id+"AI发布撤回命令",o)}}},i.attack=function(){if(!(this.count<=0)){var t=this.getMyBuildings(),i=2e3;this.checkIsKingManzu()&&(i=5e4);for(var n,s=e(t);!(n=s()).done;){var o=n.value;if(0!=o.isBuilding()&&!(o.peoples.length<=1)){var a=this.getCloestOtherBuilding(o);if(2*a.getBili()<o.getBili()&&o.getBili()>i&&this.getAllEmptyPeoples(o.name).length>1&&this.count>0){if(this.checkOrderHasWayToArmy(o,a))continue;if(!this.isTargetFriendAndAttack(o,a))continue;var g=new l;return g.orderType=h.attack,g.peoples=[this.getEmptyPeople(o.name)],g.food=Math.round(o.food/2),g.troops=this.getMaxTroopsBuildArmyInBuilding(o,g,.5),g.tragetId=a.name,g.homeId=o.name,g.id=o.name,this.gc.postOrder(g),this.count-=2,void this.log(this.id+"AI发布攻击命令",g)}}}}},i.checkNearbyArmy=function(){if(!(this.count<=0))for(var t,i=this.getMyBuildings(),n=e(i);!(t=n()).done;){var s=t.value;if(0!=s.isBuilding()&&!(s.peoples.length<=1)){var o=this.getNearbyArmy(s);if(o&&this.getPowerfulPeople(s.name)&&this.count>0&&2*o.bubing<s.getBili()){if(this.checkOrderHasWayToArmy(s,o))continue;if(!this.isTargetFriendAndAttack(s,o))continue;var a=new l;a.orderType=h.attack,a.food=Math.round(s.food/2),a.peoples=[this.getPowerfulPeople(s.name)],a.troops=this.getMaxTroopsBuildArmyInBuilding(s,a,.5),a.tragetId=o.name,a.homeId=s.name,a.id=s.name,this.gc.postOrder(a),this.count-=2,this.log(this.id+"AI发布防御型攻击命令",a)}}}},i.checkDefance=function(){if(!(this.count<=0))for(var t,i=this.getMyBuildings(),n=e(i);!(t=n()).done;){var s=t.value,o=this.getCloestMineBuilding(s);if(s.type==g.city&&s.getBili()<3e3&&""!=this.getEmptyPeople(s.name)&&this.count>0&&this.getMyMoney()>100&&s.isBuilding()&&s.bingyi<500&&0==s.isInWar){var a=new r;a.people=this.getEmptyPeople(s.name),a.homeId=s.name,a.type=d.zhengbing,a.num=100,this.gc.postTask(a),this.count--,this.log(this.id+"AI发布征兵命令",a)}else if(o&&o.isBuilding()&&o.peoples.length>1&&""!=this.getEmptyPeople(o.name)&&this.count>0&&o.bubing>1e4&&s.getBili()<3e3){var c=new l;c.orderType=h.join,c.food=Math.round(o.food/2),c.peoples=[this.getEmptyPeople(o.name)],c.troops=this.getMaxTroopsBuildArmyInBuilding(s,c,.5),c.tragetId=s.name,c.homeId=o.name,c.id=o.name,this.gc.postOrder(c),this.count-=2,this.log(this.id+"AI发布调兵命令",c)}else if(o&&o.type==g.army&&o.orderType==h.stay&&this.count>0&&s.getBili()<1e3){var u=new l;u.orderType=h.join,u.food=o.food/2,u.peoples=o.peoples,u.troops=this.getMaxTroopsBuildArmyInBuilding(s,u,.5),u.tragetId=s.name,u.homeId=s.name,u.id=o.name,this.gc.postOrder(u),this.count-=2,this.log(this.id+"AI发布撤回命令",u)}}},i.checkPeopleLoyal=function(){if(!(this.count<=0))for(var t,i=this.getMyBuildings(),n=e(i);!(t=n()).done;){var s=t.value;if(0!=s.isBuilding()&&(s.type!=g.army&&s.type!=g.team&&this.count>0&&0==s.isInWar))for(var o,a=e(s.peoples);!(o=a()).done;){var h=o.value,r=this.getMyMoney();if(this.gc.peoples.get(h).loyal<90&&this.count>0&&r>50){var d=new m;d.type=c.jiang_shang,d.num=50,d.people=h,this.gc.postAct(d),this.count--,this.log(this.id+"AI发布奖赏命令",d)}}}},i.tansuo=function(){if(!(this.count<=0))for(var t,i=this.getMyBuildings(),n=e(i);!(t=n()).done;){var s=t.value;if(s.type==g.city&&(!(s.peoples.length<=1)&&""!=this.getEmptyPeople(s.name)&&this.count>0&&this.getMyMoney()>100&&0==s.isInWar)){var o=new l;return o.orderType=h.find,o.food=0,o.troops=0,o.peoples=[this.getEmptyPeople(s.name)],o.tragetId=this.getRadomBuilding(s.name).name,o.homeId=s.name,o.id=s.name,this.gc.postOrder(o),this.count=0,void this.log(this.id+"AI发布探索命令",o)}}},i.xiushan=function(){if(!(this.count<=0))for(var t,i=this.getMyBuildings(),n=e(i);!(t=n()).done;){var s=t.value;if(0!=s.isBuilding()&&(""!=this.getEmptyPeople(s.name)&&this.count>0&&this.getMyMoney()>100&&s.health<40&&0==s.isInWar)){var o=new r;return o.homeId=s.name,o.type=d.repair,o.num=100,o.people=this.getEmptyPeople(s.name),this.gc.postTask(o),this.count--,void this.log(this.id+"AI发布修缮命令",o)}}},i.kaikeng=function(){if(!(this.count<=0||this.gc.month<9))for(var t,i=this.getMyBuildings(!0),n=e(i);!(t=n()).done;){var s=t.value;if(""!=this.getEmptyPeople(s.name)&&this.count>0&&this.getMyMoney()>100&&s.type==g.city&&s.shouyi<90&&0==this.gc.dc.bds.get(s.name).isManzu&&0==s.isInWar){var o=new r;return o.homeId=s.name,o.type=d.kaikeng,o.num=100,o.people=this.getEmptyPeople(s.name),this.gc.postTask(o),this.count--,void this.log(this.id+"AI发布开垦命令",o)}}},i.caolian=function(){if(!(this.count<=0))for(var t,i=this.getMyBuildings(),n=e(i);!(t=n()).done;){var s=t.value;if(""!=this.getEmptyPeople(s.name)&&this.count>0&&this.getMyMoney()>100&&s.isBuilding()&&s.shiqi<80&&0==s.isInWar){var o=new r;return o.homeId=s.name,o.type=d.caolian,o.num=100,o.people=this.getEmptyPeople(s.name),this.gc.postTask(o),this.count--,void this.log(this.id+"AI发布操练命令",o)}}},i.xunshi=function(){if(!(this.count<=0))for(var t,i=this.getMyBuildings(!0),n=e(i);!(t=n()).done;){var s=t.value;if(""!=this.getEmptyPeople(s.name)&&this.count>0&&this.getMyMoney()>100&&s.mingxing<90&&s.type==g.city&&0==s.isInWar){var o=new r;return o.homeId=s.name,o.type=d.patrol,o.num=100,o.people=this.getEmptyPeople(s.name),this.gc.postTask(o),this.count--,void this.log(this.id+"AI发布巡视命令",o)}}},i.jangshang=function(){if(!(this.count<=0))for(var t,i=this.getMyBuildings(),n=e(i);!(t=n()).done;){var s=t.value;if(this.count>0&&this.getMyMoney()>100&&s.isBuilding()&&0==s.isInWar){for(var o,a=100,h=null,g=e(s.peoples);!(o=g()).done;){var r=o.value,d=this.gc.peoples.get(r);d.loyal<a&&(a=d.loyal,h=d.name)}if(a<80&&h){var u=new m;return u.homeId=s.name,u.people=h,u.type=c.jiang_shang,u.num=100,this.gc.postAct(u),this.count--,void this.log(this.id+"AI发布奖赏命令",u)}}}},i.lijian=function(){if(!(this.count<=0))for(var t,i=this.getMyBuildings(),n=e(i);!(t=n()).done;){var s=t.value;if(!(s.peoples.length<=1)&&(this.count>0&&this.getMyMoney()>100&&s.isBuilding()&&s.peoples.length>1&&0==s.isInWar))for(var o,a=e(this.gc.entities.values());!(o=a()).done;){var g=o.value;if(this.count>0&&g.isBuilding()&&g.peoples.length>1&&0==g.isInWar&&0==p.checkIsEntityMine(g.name,this.id)&&this.getTwoBuildingDistance(s,g)<30&&this.checkIsEntityCanGo(s,g)){for(var r,d=100,c=null,u=e(g.peoples);!(r=u()).done;){var m=r.value,y=this.gc.peoples.get(m);y.loyal<d&&(d=y.loyal,c=y.name)}var f=new l;return f.orderType=h.lijian,f.peoples=[this.getEmptyPeople(s.name)],f.homeId=s.name,f.id=c,this.gc.postOrder(f),this.count-=2,void this.log(this.id+"AI发布离间命令",f)}}}},i.liuyan=function(){if(!(this.count<=0))for(var t,i=this.getMyBuildings(),n=e(i);!(t=n()).done;){var s=t.value;if(!(s.peoples.length<=1)&&(this.count>0&&this.getMyMoney()>100&&s.type==g.city&&p.checkIsEntityBeContainedByAnyKing(s.name)&&s.peoples.length>1&&0==s.isInWar))for(var o,a=e(this.gc.entities.values());!(o=a()).done;){var r=o.value;if(this.count>0&&r.isBuilding()&&0==r.isInWar&&0==p.checkIsEntityMine(r.name,this.id)&&this.getTwoBuildingDistance(s,r)<30&&this.checkIsEntityCanGo(s,r)){var d=new l;return d.orderType=h.liuyan,d.peoples=[this.getEmptyPeople(s.name)],d.homeId=s.name,d.id=r.name,this.gc.postOrder(d),this.count--,void this.log(this.id+"AI发布流言命令",d)}}}},i.xirao=function(){if(!(this.count<=0))for(var t,i=this.getMyBuildings(),n=e(i);!(t=n()).done;){var s=t.value;if(!(s.peoples.length<=1)&&(this.count>0&&this.getMyMoney()>100&&s.isBuilding()&&p.checkIsEntityBeContainedByAnyKing(s.name)&&s.peoples.length>1&&0==s.isInWar))for(var o,a=e(this.gc.entities.values());!(o=a()).done;){var g=o.value;if(this.count>0&&g.isBuilding()&&0==g.isInWar&&0==p.checkIsEntityMine(g.name,this.id)&&this.getTwoBuildingDistance(s,g)<30&&this.checkIsEntityCanGo(s,g)){var r=new l;return r.orderType=h.xirao,r.peoples=[this.getEmptyPeople(s.name)],r.homeId=s.name,r.id=g.name,this.gc.postOrder(r),this.count--,void this.log(this.id+"AI发布袭扰命令",r)}}}},i.maifu=function(){if(!(this.count<=0))for(var t,i=this.getMyBuildings(),n=e(i);!(t=n()).done;){var s=t.value;if(!(s.peoples.length<=1)&&(this.count>0&&this.getMyMoney()>100&&s.isBuilding()&&s.peoples.length>1&&s.getBili()>500&&0==s.isInWar)){var o=new l;return o.orderType=h.maifu,o.peoples=[this.getEmptyPeople(s.name)],o.homeId=s.name,o.pos=this.getDangerousPos(s,!1),this.gc.postOrder(o),this.count--,void this.log(this.id+"AI发布埋伏命令",o)}}},i.zhuzha=function(){if(!(this.count<=0||this.checkIsKingManzu()))for(var t,i=this.getMyBuildings(),n=e(i);!(t=n()).done;){var s=t.value;if(!(s.peoples.length<=1)&&(y.getRandom(0,99)>50&&s.isBuilding()&&s.getBili()>2e3&&this.getAllEmptyPeoples(s.name).length>1&&this.count>0)){var o=this.getDangerousPos(s);if(!o)continue;var a=new l;return a.orderType=h.stay,a.food=Math.round(s.food/2),a.peoples=[this.getEmptyPeople(s.name)],a.troops=this.getMaxTroopsBuildArmyInBuilding(s,a,.5),a.pos=o,a.homeId=s.name,a.id=s.name,this.gc.postOrder(a),this.count-=2,void this.log(this.id+"AI发布驻扎命令",a)}}},i.getCloestOtherBuilding=function(t){for(var i,n=1e5,o=null,a=e(this.gc.entities.values());!(i=a()).done;){var h=i.value;if(p.getKingdomIdByEntityName(h.name)!=this.id&&h.type!=g.army&&h.type!=g.team){var r=y.getDistance(s(t.name).position,s(h.name).position);r<n&&(n=r,o=h)}}return o},i.getNearbyArmy=function(t){for(var i,n=1e5,o=null,a=e(this.gc.entities.values());!(i=a()).done;){var h=i.value;if(p.getKingdomIdByEntityName(h.name)!=this.id&&h.type==g.army){var r=y.getDistance(s(t.name).position,s(h.name).position);r<n&&(n=r,o=h)}}return n<10?o:null},i.getCloestMineBuilding=function(t){for(var i,n=1e5,o=null,a=e(this.gc.entities.values());!(i=a()).done;){var h=i.value;if(p.getKingdomIdByEntityName(h.name)==this.id&&h.name!=t.name&&h.type!=g.army&&h.type!=g.team){var r=y.getDistance(s(t.name).position,s(h.name).position);r<n&&(n=r,o=h)}}return o},i.getEmptyPeople=function(t){var i=this.gc.entities.get(t),n=i.peoples;if(n.length>0)for(var s,o=i.tasks,a=e(n);!(s=a()).done;){var h=s.value;if(null==o.get(h)||null==o.get(h))return h}return""},i.getPowerfulPeople=function(t){var i=this.gc.entities.get(t),n=i.peoples,s=100,o=null;if(n.length>0)for(var a,h=i.tasks,g=e(n);!(a=g()).done;){var r=a.value;null!=h.get(r)&&null!=h.get(r)||this.gc.dc.pps.get(r).wl+this.gc.dc.pps.get(r).ts>s&&(o=r,s=this.gc.dc.pps.get(r).wl+this.gc.dc.pps.get(r).ts)}return o},i.getAllEmptyPeoples=function(t){var i=this.gc.entities.get(t),n=i.peoples,s=[];if(n.length>0)for(var o,a=i.tasks,h=e(n);!(o=h()).done;){var g=o.value;null!=a.get(g)&&null!=a.get(g)||s.push(g)}return s},i.getMyBuildings=function(t){void 0===t&&(t=!1);for(var i,n=this.gc.kingdoms.get(this.id),s=[],o=e(n.entities);!(i=o()).done;){var a=i.value;if(this.gc.entities.get(a)){var h=this.gc.entities.get(a);h.type!=g.army&&h.type!=g.team&&(t&&h.type==g.city?s.push(h):t||s.push(h))}}return s},i.getMyEntities=function(){for(var t,i=this.gc.kingdoms.get(this.id),n=[],s=e(i.entities);!(t=s()).done;){var o=t.value;if(this.gc.entities.get(o)){var a=this.gc.entities.get(o);a.type!=g.team&&n.push(a)}}return n},i.getMyMoney=function(){return this.gc.kingdoms.get(this.id).money},i.getRadomBuilding=function(t){for(var i,n=y.getRandom(0,this.gc.entities.size-1),s=0,o=e(this.gc.entities.values());!(i=o()).done;){var a=i.value;if(s==n&&a.name!=t&&a.type==g.city)return a;s++}return this.getRadomBuilding(t)},i.log=function(t,e){this.isShowLog&&o(t,e)},i.checkIsKingManzu=function(){return this.gc.dc.pps.get(this.id).isManzu},i.getDangerousPos=function(t,e){if(void 0===e&&(e=!0),0!=t.isBuilding()){for(var i=this.gc.dc.bds.get(t.name).pos,n=[],s=-10;s<11;s++)for(var a=-10;a<11;a++){var h=[i[0]+s,i[1]+a];h[0]>=0&&h[0]<=99&&h[1]>=0&&h[1]<=99&&0==this.gc.arr[h[0]][h[1]]&&(e&&0==this.gc.arr[h[0]][h[1]]?n.push(h):e||5!=this.gc.arr[h[0]][h[1]]||n.push(h))}for(var g=[],r=0,d=n;r<d.length;r++){for(var c=d[r],u=0,l=-2;l<3;l++)for(var m=-2;m<3;m++){var y=[c[0]+l,c[1]+m];if(y[0]>=0&&y[0]<=99&&y[1]>=0&&y[1]<=99&&0!=this.gc.arr[y[0]][y[1]]){var f=this.gc.arr[y[0]][y[1]];1==f?u+=5:5==f&&(u+=2)}}g.push([c[0],c[1],u])}g.sort((function(t,e){return e[2]-t[2]}));for(var v=0,I=g;v<I.length;v++){var k=I[v];if(0==this.checkIsPosMyEntityTargetOrTooClose(k)&&0==p.checkIsPosNearBuilding(k[0],k[1])&&0==p.checkIsAnyOurGroupSameTargetPos(t,k[0],k[1]))return k}return null}o("--AI有BUG--")},i.checkIsPosMyEntityTargetOrTooClose=function(t){for(var i,n=e(this.getMyEntities());!(i=n()).done;){var s=i.value;if(s.tragetPos[0]==t[0]&&s.tragetPos[1]==t[1])return!0;if(Math.abs(s.tragetPos[0]-t[0])<5&&Math.abs(s.tragetPos[1]-t[1])<5)return!0}return!1},i.checkIsEntityCanGo=function(t,e){var i=t.pos[0],n=t.pos[1],s=e.pos[0],o=e.pos[1],a=this.gc.kingdoms.get(p.getKingdomIdByEntityName(t.homeId)).index,h=this.gc.dc.bds.get(t.homeId).index,g=this.gc.dc.bds.get(e.homeId).index,r=v.getInstance().findPath(t.name+"ai_test",i,n,s,o,a,h,g);return!(!r||0==r.length||r.length>30)},i.checkIsPosCanGo=function(t,e){var i=e[0],n=e[1],s=t.pos[0],o=t.pos[1],a=this.gc.kingdoms.get(p.getKingdomIdByEntityName(t.homeId)).index,h=this.gc.dc.bds.get(t.homeId).index,g=v.getInstance().findPath(t.name+"ai_test",i,n,s,o,a,h,0);return!(!g||0==g.length||g.length>30)},i.getTwoBuildingDistance=function(t,e){return t&&e&&t.isBuilding()&&e.isBuilding()?Math.abs(t.pos[0]-e.pos[0])+Math.abs(t.pos[1]-e.pos[1]):1e3},i.checkIsAnyArmyComming=function(){if(!this.gc.kingdoms.get(this.id)||0==this.gc.kingdoms.get(this.id).entities.length)return null;for(var t,i=e(this.gc.kingdoms.get(this.id).entities);!(t=i()).done;){var n=t.value;if(0!=this.gc.entities.get(n).isBuilding()&&p.getKingdomIdByEntityName(n)==this.id)for(var o,a=e(this.gc.entities.values());!(o=a()).done;){var h=o.value;if(h.type==g.army&&p.getKingdomIdByEntityName(h.name)!=this.id)if(s(h.name)&&s(n))if(y.getDistance(s(h.name).position,s(n).position)<10)return h}}return null},i.checkOrderHasWayToArmy=function(t,e){var i=s(t.name).position,n=s(e.name).position,a=y.getGirdPos(i),h=y.getGirdPos(n),g=this.gc.kingdoms.get(p.getKingdomIdByEntityName(t.name)).index,r=this.gc.dc.bds.get(t.name).index,d=0;this.gc.dc.bds.get(e.name)&&(d=this.gc.dc.bds.get(e.name).index);var c=v.getInstance().findPath(t.name+"--onAISelectEntity",a[0],a[1],h[0],h[1],g,r,d);return null!=c&&0!=c.length||(o("-----------AI没有找到攻击命令的可达路径-------------"),!1)},i.getMaxTroopsBuildArmyInBuilding=function(t,e,i){var n=t.bubing;e.armyType==u.gb?n=t.gongbing:e.armyType==u.qb?n=t.qibing:e.armyType==u.sb&&(n=t.shuibing);var s=p.getArmyLimitByTs(e.peoples),o=2e3;return(o=s<n?s:n)>t.getBili()*i?Math.floor(t.getBili()*i):o},i.isTargetFriendAndAttack=function(t,e){var i=!1;if(p.checkIsTwoEntityFrineds(t,e)){var n=this.gc.dc.pps.get(this.id);n&&y.getRandom(0,10*n.xg)<5&&(i=!0)}else i=!0;return i},t}());i._RF.pop()}}}));

System.register("chunks:///_virtual/LoginSceneController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameHelper.ts","./DataControler.ts","./BasePannelController.ts"],(function(e){"use strict";var n,t,o,r,a,s,i,c,l,d,u,p,f,g;return{setters:[function(e){n=e.inheritsLoose,t=e.createForOfIteratorHelperLoose},function(e){o=e.cclegacy,r=e._decorator,a=e.find,s=e.Label,i=e.loader,c=e.SpriteFrame,l=e.director,d=e.AudioClip,u=e.Prefab},function(e){p=e.default},function(e){f=e.DataControler},function(e){g=e.BasePannelController}],execute:function(){var h;o._RF.push({},"e214aM8NXFCLq5yZlCZt+Wh","LoginSceneController",void 0);var v=r.ccclass;r.property,e("LoginSceneController",v("LoginSceneController")(h=function(e){function o(){return e.apply(this,arguments)||this}n(o,e);var r=o.prototype;return r.start=function(){var e=this;this.dc=f.getInstance();var n=this.dc.pps.size+this.dc.sounds.length+this.dc.prefabs.length;this.dc.heads=new Map;for(var o,r=function(){var t=o.value;i.loadRes("textures/heads/"+t+"/spriteFrame",c,(function(o,r){e.dc.heads.set(t,r),n--,e.renderLoading(n),0==n&&l.loadScene("SelectScene")}))},a=t(this.dc.pps.keys());!(o=a()).done;)r();p.audios=new Map;for(var s,g=function(){var t=s.value;i.loadRes("audios/"+t,d,(function(o,r){p.audios.set(t,r),n--,e.renderLoading(n),0==n&&l.loadScene("SelectScene")}))},h=t(this.dc.sounds);!(s=h()).done;)g();p.prefabs=new Map;for(var v,L=function(){var t=v.value;i.loadRes("prefabs/"+t,u,(function(o,r){p.prefabs.set(t,r),n--,e.renderLoading(n),0==n&&l.loadScene("SelectScene")}))},C=t(this.dc.prefabs);!(v=C()).done;)L()},r.renderLoading=function(e){e%30==0?a("Canvas/LoadingLabel").getComponent(s).string="正在载入...":e%30==10?a("Canvas/LoadingLabel").getComponent(s).string="正在载入..":e%30==20&&(a("Canvas/LoadingLabel").getComponent(s).string="正在载入.")},o}(g))||h);o._RF.pop()}}}));

System.register("chunks:///_virtual/LogPannelController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameController.ts","./BasePannelController.ts"],(function(n){"use strict";var e,t,a,o,l,s,g,i,r,c;return{setters:[function(n){e=n.inheritsLoose},function(n){t=n.cclegacy,a=n._decorator,o=n.find,l=n.Node,s=n.Label,g=n.RichText,i=n.Button},function(n){r=n.GameController},function(n){c=n.BasePannelController}],execute:function(){var h;t._RF.push({},"d4547TMjx9Jz4q5XMOHQkvb","LogPannelController",void 0);var p=a.ccclass;a.property,n("LogPannelController",p("LogPannelController")(h=function(n){function t(){for(var e,t=arguments.length,a=new Array(t),o=0;o<t;o++)a[o]=arguments[o];return(e=n.call.apply(n,[this].concat(a))||this).page=0,e.pageNow=0,e}e(t,n);var a=t.prototype;return a.start=function(){this.gc=r.getInstance(),this.content=o("Canvas/LogPannel/Pannel/ScrollView/View/Content"),o("Canvas/LogPannel/Bg").off(l.EventType.TOUCH_END),o("Canvas/LogPannel/Bg").on(l.EventType.TOUCH_END,this.hide,this)},a.show=function(){this.gc.cc.checkIsShowingSelectEntityOrPos()||(this.showFrame(o("Canvas/LogPannel"),o("Canvas/LogPannel").getChildByName("Pannel")),0==this.gc.cc.logs.length?o("Canvas/LogPannel/Pannel/Label").getComponent(s).string="尚未产生任何情报记录":o("Canvas/LogPannel/Pannel/Label").getComponent(s).string="",this.gc.cc.logs.length%5==0?this.page=Math.floor(this.gc.cc.logs.length/5):this.page=Math.floor(this.gc.cc.logs.length/5)+1,this.page>0?this.pageNow=1:this.pageNow=0,this.render(0))},a.render=function(n){this.pageNow+=n;for(var e=1;e<=5;e++){var t=o("Canvas/LogPannel/Pannel/Items/LogItem"+e),a=this.gc.cc.logs.length,l=this.gc.cc.logs[a-(5*(this.pageNow-1)+e-1)-1];l?(t.active=!0,t.getChildByName("Frame").getChildByName("Label").getComponent(g).string=l):t.active=!1}this.pageNow>1?o("Canvas/LogPannel/Pannel/Up").getComponent(i).interactable=!0:o("Canvas/LogPannel/Pannel/Up").getComponent(i).interactable=!1,this.pageNow<this.page?o("Canvas/LogPannel/Pannel/Down").getComponent(i).interactable=!0:o("Canvas/LogPannel/Pannel/Down").getComponent(i).interactable=!1,o("Canvas/LogPannel/Pannel/Page").getComponent(s).string=this.pageNow+"/"+this.page},a.up=function(){this.render(-1)},a.down=function(){this.render(1)},a.hide=function(){this.hideFrame(o("Canvas/LogPannel"),o("Canvas/LogPannel").getChildByName("Pannel"))},t}(c))||h);t._RF.pop()}}}));

System.register("chunks:///_virtual/LongClickComponent.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var i,n,c,o,e,s;return{setters:[function(t){i=t.inheritsLoose},function(t){n=t.cclegacy,c=t._decorator,o=t.Button,e=t.Node,s=t.Component}],execute:function(){var a;n._RF.push({},"5dbdbN8a8hFNYCmfGG25SMP","LongClickComponent",void 0);var l=c.ccclass;c.property,t("LongClickComponent",l("LongClickComponent")(a=function(t){function n(){for(var i,n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(i=t.call.apply(t,[this].concat(c))||this).time=0,i.isClickStart=!1,i}i(n,t);var c=n.prototype;return c.start=function(){this.node.getComponent(o)&&(this.button=this.node.getComponent(o)),this.node.on(e.EventType.TOUCH_START,this.clickStart,this),this.node.on(e.EventType.TOUCH_END,this.clickEnd,this)},c.clickStart=function(){this.isClickStart=!0,this.time=0},c.clickEnd=function(){this.callback,this.isClickStart&&(this.button?this.button.interactable&&this.callback(!1):this.callback(!1)),this.isClickStart=!1,this.time=0},c.update=function(t){0!=this.node.active?this.isClickStart&&(this.time+=t,this.time>1&&(this.time=0,this.isClickStart=!1,this.callback&&this.callback(!0))):this.time=0},n}(s))||a);n._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./AStar.ts","./AStarRoadSeeker.ts","./BaseComponent.ts","./CameraScript.ts","./EventBus.ts","./GameHelper.ts","./LongClickComponent.ts","./MapRoadUtils.ts","./MathValueHelper.ts","./NativeAndHttpHelper.ts","./PathFindingComponent.ts","./PinYinHelper.ts","./INavigationEngine.ts","./recastJsPlugin.ts","./BetrayHelper.ts","./BgSoundController.ts","./BuildingController.ts","./CameraController.ts","./CunDangHelper.ts","./CunDangMaker.ts","./DataControler.ts","./DynamicHelper.ts","./EntityHelper.ts","./FarmLandController.ts","./GameController.ts","./GroupController.ts","./KingAI.ts","./LoginSceneController.ts","./MapScript.ts","./TeamController.ts","./TestScript.ts","./UpdateEventHelper.ts","./BasePannelController.ts","./BuyAndSellPannelController.ts","./CanvasController.ts","./CundangSoltController.ts","./EntityIconController.ts","./EntityInfoController.ts","./InfoShowPannelController.ts","./KindomPannelController.ts","./LogPannelController.ts","./MapPannelController.ts","./OrderConfirmController.ts","./PeopleInfoController.ts","./SelectArmyPannelController.ts","./SelectEntityPannelController.ts","./SelectOrderPannelController.ts","./SelectPeoplePannelController.ts","./SelectPosPannelController.ts","./SelectSceneController.ts","./TeamIconController.ts","./TrainArmyPannelController.ts","./DataIniter.ts","./GameValueHelper.ts","./PatrolEventController.ts","./RenderHelper.ts","./UiHelper.ts"],(function(){"use strict";return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/MapPannelController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameHelper.ts","./BuildingController.ts","./CameraController.ts","./DataControler.ts","./EntityHelper.ts","./GameController.ts","./GroupController.ts","./BasePannelController.ts"],(function(e){"use strict";var t,n,o,i,a,s,r,l,p,c,d,g,h,m,u,f,v,C,y;return{setters:[function(e){t=e.inheritsLoose,n=e.createForOfIteratorHelperLoose},function(e){o=e.cclegacy,i=e._decorator,a=e.find,s=e.v3,r=e.Sprite,l=e.Color,p=e.instantiate,c=e.UITransform,d=e.Node},function(e){g=e.default},function(e){h=e.BuildingController},function(e){m=e.CameraController},function(e){u=e.EntityType},function(e){f=e.EH},function(e){v=e.GameController},function(e){C=e.GroupController},function(e){y=e.BasePannelController}],execute:function(){var P;o._RF.push({},"4e9096uXFFNuJEvIOJ7y0ad","MapPannelController",void 0);var I=i.ccclass;i.property,e("MapPannelController",I("MapPannelController")(P=function(e){function o(){for(var t,n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(t=e.call.apply(e,[this].concat(o))||this).index=0,t}t(o,e);var i=o.prototype;return i.start=function(){this.pannel=this.node.getChildByName("MapPannel"),this.content=a("Canvas/MapPannel/Pannel/Gray"),this.gc=v.getInstance(),this.camera=a("Camera").getComponent(m)},i.hide=function(){this.pannel&&this.hideFrame(this.pannel,this.pannel.getChildByName("Pannel"))},i.update=function(){if(this.index++,this.index%30==0&&this.pannel.active&&this.content.children.length>0)for(var e,t=n(this.content.children);!(e=t()).done;){var o=e.value,i=a(o.name);if(i){var p=null;if(i.getComponent(C)?p=i.getComponent(C).entity:i.getComponent(h)&&(p=i.getComponent(h).entity),p){o.active=!0;var c=s(5,5,0);p.type==u.army&&this.setPos(p,o,8,c);var d=f.getKingdomIdByEntityName(o.name);if(""!=d){var g=this.gc.kingdoms.get(d);o.getComponent(r).color=this.gc.dc.pps.get(g.kingId).color}else o.getComponent(r).color=l.WHITE}else o.active=!1,o.destroy()}else o.active=!1,o.destroy()}},i.show=function(){var e=this;if(!this.gc.cc.checkIsShowingSelectEntityOrPos()){this.content.removeAllChildren(),this.showFrame(this.pannel,this.pannel.getChildByName("Pannel"));for(var t,o=g.prefabs.get("MapItem"),i=function(){var n=t.value,i=p(o);e.content.addChild(i),i.getComponent(r).color=l.WHITE,i.name=n.name;var a=s(5,5,0),g=f.getKingdomIdByEntityName(n.name);if(""!=g){var h=e.gc.kingdoms.get(g);i.getComponent(r).color=e.gc.dc.pps.get(h.kingId).color}var v=p(o);v.name="Icon",v.parent=i,v.position=s(0,0,0);var C=v.addComponent(c);C.getComponent(r).color=new l(0,0,0,0),n.type==u.city?(C.width=30,C.height=30):(C.width=60,C.height=60),v.on(d.EventType.TOUCH_END,(function(t){e.camera.getComponent(m).moveToEntity(n.name)}),e),e.setPos(n,i,8,a)},a=n(this.gc.entities.values());!(t=a()).done;)i()}},i.setPos=function(e,t,n,o){if(e.type==u.army&&a(e.name)){var i=a(e.name);t.scale=s(1,1,1),t.eulerAngles=s(0,0,45);var r=[i.position.x+50,50-i.position.z];t.position=s(r[0]*n,r[1]*n,0).add(o)}else if(e.type==u.port){var l=this.gc.dc.bds.get(e.name);t.scale=s(1,1,1),l.pos[0]==l.pos[2]?t.position=s(l.pos[0]*n,(l.pos[1]+l.pos[3])/2*n,0).add(o):l.pos[1]==l.pos[3]&&(t.position=s((l.pos[0]+l.pos[2])/2*n,l.pos[1]*n,0).add(o))}else if(e.type==u.city){var p=this.gc.dc.bds.get(e.name);t.scale=s(2,2,2),t.position=s(p.pos[0]*n,p.pos[1]*n,0).add(o)}else if(e.type==u.gate){var c=this.gc.dc.bds.get(e.name);t.scale=s(1,1,1),c.pos[0]==c.pos[2]?t.position=s(c.pos[0]*n,(c.pos[1]+c.pos[3])/2*n,0).add(o):c.pos[1]==c.pos[3]&&(t.position=s((c.pos[0]+c.pos[2])/2*n,c.pos[1]*n,0).add(o))}else t.active=!1},o}(y))||P);o._RF.pop()}}}));

System.register("chunks:///_virtual/MapRoadUtils.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AStarRoadSeeker.ts"],(function(t){"use strict";var e,i,o;return{setters:[function(t){e=t.createClass},function(t){i=t.cclegacy},function(t){o=t.RoadNode}],execute:function(){var n;t("MapType",void 0),i._RF.push({},"4b51eMLNYdOoY9hYr26mef5","MapRoadUtils",void 0),function(t){t[t.angle45=0]="angle45",t[t.angle90=1]="angle90",t[t.honeycomb=2]="honeycomb"}(n||(n=t("MapType",{})));var h=t("Point",(function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=0,this.y=0,this.x=t,this.y=e})),r=(t("default",function(){function t(){}var i=t.prototype;return i.updateMapInfo=function(t,e,i,o,h){switch(this._mapWidth=t,this._mapHeight=e,this._nodeWidth=i,this._nodeHeight=o,this._halfNodeWidth=Math.floor(this._nodeWidth/2),this._halfNodeHeight=Math.floor(this._nodeHeight/2),this._col=Math.ceil(t/this._nodeWidth),this._row=Math.ceil(e/this._nodeHeight),this._mapType=h,this._mapType){case n.angle45:this._mapRoad=new r(this._row,this._col,this._nodeWidth,this._nodeHeight,this._halfNodeWidth,this._halfNodeHeight);break;case n.angle90:this._mapRoad=new d(this._row,this._col,this._nodeWidth,this._nodeHeight,this._halfNodeWidth,this._halfNodeHeight);break;case n.honeycomb:this._col=2*Math.ceil((this._mapWidth-this._nodeWidth/4)/(this._nodeWidth/4*6)),this._row=Math.ceil((this._mapHeight-this._nodeHeight/2)/this._nodeHeight),this._mapRoad=new s(this._row,this._col,this._nodeWidth,this._nodeHeight,this._halfNodeWidth,this._halfNodeHeight)}},i.getNodeByPixel=function(t,e){return this._mapRoad?this._mapRoad.getNodeByPixel(t,e):new o},i.getNodeByDerect=function(t,e){return this._mapRoad?this._mapRoad.getNodeByDerect(t,e):new o},i.getNodeByWorldPoint=function(t,e){return this._mapRoad?this._mapRoad.getNodeByWorldPoint(t,e):new o},i.getWorldPointByPixel=function(t,e){return this._mapRoad?this._mapRoad.getWorldPointByPixel(t,e):new h},i.getPixelByWorldPoint=function(t,e){return this._mapRoad?this._mapRoad.getPixelByWorldPoint(t,e):new h},i.getDerectByPixel=function(t,e){return this._mapRoad?this._mapRoad.getDerectByPixel(t,e):new h},i.getDerectByWorldPoint=function(t,e){return this._mapRoad?this._mapRoad.getDerectByWorldPoint(t,e):new h},i.getPixelByDerect=function(t,e){return this._mapRoad?this._mapRoad.getPixelByDerect(t,e):new h},e(t,[{key:"mapWidth",get:function(){return this._mapWidth}},{key:"mapHeight",get:function(){return this._mapHeight}},{key:"nodeWidth",get:function(){return this._nodeWidth}},{key:"nodeHeight",get:function(){return this._nodeHeight}},{key:"row",get:function(){return this._row}},{key:"col",get:function(){return this._col}},{key:"halfNodeWidth",get:function(){return this._halfNodeWidth}},{key:"halfNodeHeight",get:function(){return this._halfNodeHeight}},{key:"mapType",get:function(){return this._mapType}}],[{key:"instance",get:function(){return null==this._instance&&(this._instance=new t),this._instance}}]),t}()),function(){function t(t,e,i,o,n,h){this._row=t,this._col=e,this._nodeWidth=i,this._nodeHeight=o,this._halfNodeWidth=n,this._halfNodeHeight=h}var e=t.prototype;return e.getNodeByPixel=function(t,e){var i=this.getWorldPointByPixel(t,e),n=this.getPixelByWorldPoint(i.x,i.y),h=this.getDerectByPixel(t,e),r=new o;return r.cx=i.x,r.cy=i.y,r.px=n.x,r.py=n.y,r.dx=h.x,r.dy=h.y,r},e.getNodeByDerect=function(t,e){var i=this.getPixelByDerect(t,e),n=this.getWorldPointByPixel(i.x,i.y),h=new o;return h.cx=n.x,h.cy=n.y,h.px=i.x,h.py=i.y,h.dx=t,h.dy=e,h},e.getNodeByWorldPoint=function(t,e){var i=this.getPixelByWorldPoint(t,e);return this.getNodeByPixel(i.x,i.y)},e.getWorldPointByPixel=function(t,e){var i=Math.ceil(t/this._nodeWidth-.5+e/this._nodeHeight)-1,o=this._col-1-Math.ceil(t/this._nodeWidth-.5-e/this._nodeHeight);return new h(i,o)},e.getPixelByWorldPoint=function(t,e){var i=Math.floor((t+1-(e-(this._col-1)))*this._halfNodeWidth),o=Math.floor((t+1+(e-(this._col-1)))*this._halfNodeHeight);return new h(i,o)},e.getDerectByPixel=function(t,e){var i=this.getWorldPointByPixel(t,e),o=this.getPixelByWorldPoint(i.x,i.y),n=Math.floor(o.x/this._nodeWidth)-(o.x%this._nodeWidth==0?1:0),r=Math.floor(o.y/this._halfNodeHeight)-1;return new h(n,r)},e.getDerectByWorldPoint=function(t,e){var i=Math.floor((t-(e-(this._col-1)))/2),o=t+(e-(this._col-1));return new h(i,o)},e.getPixelByDerect=function(t,e){var i=Math.floor((t+e%2)*this._nodeWidth+(1-e%2)*this._halfNodeWidth),o=Math.floor((e+1)*this._halfNodeHeight);return new h(i,o)},t}()),d=function(){function t(t,e,i,o,n,h){this._row=t,this._col=e,this._nodeWidth=i,this._nodeHeight=o,this._halfNodeWidth=n,this._halfNodeHeight=h}var e=t.prototype;return e.getNodeByPixel=function(t,e){var i=this.getWorldPointByPixel(t,e),n=this.getPixelByWorldPoint(i.x,i.y),h=this.getDerectByPixel(t,e),r=new o;return r.cx=i.x,r.cy=i.y,r.px=n.x,r.py=n.y,r.dx=h.x,r.dy=h.y,r},e.getNodeByDerect=function(t,e){var i=this.getPixelByDerect(t,e),n=this.getWorldPointByPixel(i.x,i.y),h=new o;return h.cx=n.x,h.cy=n.y,h.px=i.x,h.py=i.y,h.dx=t,h.dy=e,h},e.getNodeByWorldPoint=function(t,e){var i=this.getPixelByWorldPoint(t,e);return this.getNodeByPixel(i.x,i.y)},e.getWorldPointByPixel=function(t,e){var i=Math.floor(t/this._nodeWidth),o=Math.floor(e/this._nodeHeight);return new h(i,o)},e.getPixelByWorldPoint=function(t,e){var i=Math.floor((t+1)*this._nodeWidth-this._halfNodeWidth),o=Math.floor((e+1)*this._nodeHeight-this._halfNodeHeight);return new h(i,o)},e.getDerectByPixel=function(t,e){var i=Math.floor(t/this._nodeWidth),o=Math.floor(e/this._nodeHeight);return new h(i,o)},e.getDerectByWorldPoint=function(t,e){return new h(t,e)},e.getPixelByDerect=function(t,e){var i=Math.floor((t+1)*this._nodeWidth-this._halfNodeWidth),o=Math.floor((e+1)*this._nodeHeight-this._halfNodeHeight);return new h(i,o)},t}(),s=function(){function t(t,e,i,o,n,h){this._proportion=1.732,this._row=t,this._col=e,this._nodeWidth=i,this._nodeHeight=o,this._halfNodeWidth=n,this._halfNodeHeight=h,this._nwDiv4=this._nodeWidth/4,this._radius=4*this._nwDiv4,this._proportion=2*this._nodeHeight/this._nodeWidth}var e=t.prototype;return e.getNodeByPixel=function(t,e){var i=this.getWorldPointByPixel(t,e),n=this.getPixelByWorldPoint(i.x,i.y),h=new o;return h.cx=i.x,h.cy=i.y,h.px=n.x,h.py=n.y,h.dx=i.x,h.dy=i.y,h},e.getNodeByDerect=function(t,e){var i=this.getPixelByDerect(t,e),n=new o;return n.cx=t,n.cy=e,n.px=i.x,n.py=i.y,n.dx=t,n.dy=e,n},e.getNodeByWorldPoint=function(t,e){var i=this.getPixelByWorldPoint(t,e);return this.getNodeByPixel(i.x,i.y)},e.getWorldPointByPixel=function(t,e){var i,o,n,r=Math.floor(t/this._nwDiv4),d=Math.floor(r/3);return(r-1)%6==0||(r-2)%6==0?(o=d,n=i=Math.floor(e/this._nodeHeight)):(r-4)%6==0||(r-5)%6==0?(o=d,n=i=e<this._nodeHeight/2?-1:Math.floor((e-this._nodeHeight/2)/this._nodeHeight)):d%2==0?(i=Math.floor(e/this._nodeHeight),this.testPointInHoneycomb(d,i,t,e)?(o=d,n=i):this.testPointInHoneycomb(d-1,i-1,t,e)?(o=d-1,n=i-1):(o=d-1,n=i)):(i=e<this._nodeHeight/2?-1:Math.floor((e-this._nodeHeight/2)/this._nodeHeight),this.testPointInHoneycomb(d,i,t,e)?(o=d,n=i):this.testPointInHoneycomb(d-1,i,t,e)?(o=d-1,n=i):(o=d-1,n=i+1)),new h(o,n)},e.testPointInHoneycomb=function(t,e,i,o){var n=2*this._nwDiv4,h=this.getPixelByWorldPoint(t,e);return n-Math.abs(i-h.x)>=Math.abs(o-h.y)/this._proportion},e.getPixelByWorldPoint=function(t,e){var i=Math.floor((2+3*t)/4*this._nodeWidth),o=Math.floor((e+.5*(1+t%2))*this._nodeHeight);return new h(i,o)},e.getDerectByPixel=function(t,e){return this.getWorldPointByPixel(t,e)},e.getDerectByWorldPoint=function(t,e){return new h(t,e)},e.getPixelByDerect=function(t,e){var i=(2+3*t)/4*this._nodeWidth,o=(e+.5*(1+t%2))*this._nodeHeight;return new h(i,o)},t}();i._RF.pop()}}}));

System.register("chunks:///_virtual/MapScript.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AStarRoadSeeker.ts","./GameHelper.ts"],(function(t){"use strict";var e,i,n,r,o,s,a,p,l,c,h,g,u,y,f,C,v,m,E,b;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){o=t.cclegacy,s=t._decorator,a=t.Asset,p=t.find,l=t.Label,c=t.log,h=t.loader,g=t.Prefab,u=t.Sprite,y=t.Color,f=t.Component,C=t.instantiate,v=t.v3,m=t.Node},function(t){E=t.default},function(t){b=t.default}],execute:function(){var D,d,S,L,R;o._RF.push({},"2bd32cRoBxDGaw/LjtcUVVe","MapScript",void 0);var k=s.ccclass,M=s.property;t("MapScript",(D=k("MapScript"),d=M(a),D((R=e((L=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))||this).type=0,n(e,"mapData",R,r(e)),e.isClick=!1,e.isDrag=!0,e}i(e,t);var o=e.prototype;return o.setDrag=function(){this.isDrag=!this.isDrag,this.isDrag?p("Canvas/Drag/Label").getComponent(l).string="拖拽":p("Canvas/Drag/Label").getComponent(l).string="点击"},o.go=function(){E.getInstance().init(this.arr)},o.gooo=function(){E.getInstance().go(1,1,b.getRandom(20,80),b.getRandom(20,80))},o.start=function(){var t=this;this.arr=[],this.label=p("Canvas/Label").getComponent(l);var e=JSON.parse(this.mapData._nativeAsset);if(e&&e.length>20)this.arr=e,c("----载入数据----");else for(var i=0;i<100;i++){for(var n=[],r=0;r<100;r++)n.push(0);this.arr.push(n)}h.loadRes("prefabs/MapItem",g,(function(e,i){for(var n=function(e){for(var n=function(n){var r=C(i);r.parent=p("Canvas/Node"),r.position=v(10*e+5,10*n+5,0),1==t.arr[e][n]?r.getComponent(u).color=y.GREEN:2==t.arr[e][n]?r.getComponent(u).color=y.RED:3==t.arr[e][n]?r.getComponent(u).color=y.BLUE:0==t.arr[e][n]?r.getComponent(u).color=y.WHITE:4==t.arr[e][n]?r.getComponent(u).color=y.GRAY:5==t.arr[e][n]?r.getComponent(u).color=y.YELLOW:9==t.arr[e][n]&&(r.getComponent(u).color=y.CYAN),r.on(m.EventType.MOUSE_MOVE,(function(){t.isDrag&&t.onEvent(r,e,n)}),t),r.on(m.EventType.MOUSE_UP,(function(){c(e+"--"+n)}),t),r.on(m.EventType.MOUSE_UP,(function(){0==t.isDrag&&t.onEvent(r,e,n)}),t),r.on(m.EventType.MOUSE_DOWN,(function(){t.isClick=!0}),t),r.on(m.EventType.MOUSE_UP,(function(){t.isClick=!1}),t)},r=0;r<100;r++)n(r)},r=0;r<100;r++)n(r)}))},o.onEvent=function(t,e,i){1==this.type&&this.isClick?(t.getComponent(u).color=y.GREEN,this.arr[e][i]=this.type):2==this.type&&this.isClick?(t.getComponent(u).color=y.RED,this.arr[e][i]=this.type):3==this.type&&this.isClick?(t.getComponent(u).color=y.BLUE,this.arr[e][i]=this.type):0==this.type&&this.isClick?(t.getComponent(u).color=y.WHITE,this.arr[e][i]=this.type):4==this.type&&this.isClick?(t.getComponent(u).color=y.GRAY,this.arr[e][i]=this.type):5==this.type&&this.isClick?(t.getComponent(u).color=y.YELLOW,this.arr[e][i]=this.type):9==this.type&&this.isClick&&(t.getComponent(u).color=y.CYAN,this.arr[e][i]=this.type)},o.saveFile=function(){c(JSON.stringify(this.arr))},o.setType=function(t,e){this.type=parseInt(e),1==this.type?this.label.string="山川":2==this.type?this.label.string="建筑":3==this.type?this.label.string="河流":0==this.type?this.label.string="空地":4==this.type?this.label.string="堤岸":5==this.type?this.label.string="森林":9==this.type&&(this.label.string="沼泽")},e}(f)).prototype,"mapData",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=L))||S));o._RF.pop()}}}));

System.register("chunks:///_virtual/MathValueHelper.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameController.ts","./DataControler.ts","./EntityHelper.ts","./GameHelper.ts"],(function(e){"use strict";var t,n,a,i,y,r,g,s,o,p;return{setters:[function(e){t=e.createForOfIteratorHelperLoose},function(e){n=e.cclegacy,a=e._decorator,i=e.log},function(e){y=e.GameController},function(e){r=e.DataControler,g=e.EntityType,s=e.ArmyType},function(e){o=e.EH},function(e){p=e.default}],execute:function(){n._RF.push({},"7650cV6lOVOi6KHRfjJ+7dg","MathValueHelper",void 0);a.ccclass,a.property,e("MathValueHelper",function(){function e(){}return e.cutFood=function(e){e.food-=Math.round((e.getBili()+2*e.getShangyuan())/200),e.food<0?(e.food=0,e.shiqi--,e.shiqi<0&&(e.shiqi=0)):e.food>e.getBili()&&p.getRandom(0,99)>95&&e.shiqi<50&&e.shiqi++},e.huifu=function(e){if(e.bbs>10){var t=Math.round(e.bbs/5);t<=e.bbs&&(e.bbs-=t,e.bubing+=t)}else e.bbs=0;if(e.qbs>10){var n=Math.round(e.qbs/5);n<=e.qbs&&(e.qbs-=n,e.qibing+=n)}else e.qbs=0;if(e.sbs>10){var a=Math.round(e.sbs/5);a<=e.sbs&&(e.sbs-=a,e.shuibing+=a)}else e.sbs=0;if(e.gbs>10){var i=Math.round(e.gbs/5);i<=e.gbs&&(e.gbs-=i,e.gongbing+=i)}else e.gbs=0},e.cutShiqi=function(e){p.getRandom(0,99)>95&&(e.shiqi>90?e.shiqi-=2:e.shiqi>40&&e.shiqi--)},e.getHurt=function(e,n){var a=r.getInstance(),i=0,y=1;e.type==g.city?y+=a.bds.get(e.name).size*e.health*.005:e.type==g.gate?y=.02*e.health:e.type==g.port&&(y=.01*e.health);for(var o,p=t(n.values());!(o=p()).done;){for(var b,u=o.value,m=this.getPermeter(u,e),d=u.getBili(),c=50,l=t(u.peoples);!(b=l()).done;){var h=b.value;u.type==g.army?u.armyType==s.bb?a.pps.get(h).bb>c&&(c=5*a.pps.get(h).bb+50):u.armyType==s.qb?a.pps.get(h).qb>c&&(c=5*a.pps.get(h).qb+50):u.armyType==s.sb?a.pps.get(h).sb>c&&(c=5*a.pps.get(h).sb+50):u.armyType==s.gb&&a.pps.get(h).gb>c&&(c=5*a.pps.get(h).gb+50):a.pps.get(h).ts>c&&(c=a.pps.get(h).ts)}i+=m*d*c}var f=Math.round(i/(1e3*y));e.type==g.army?e.troops>f?(e.troops-=f,e.ts+=Math.round(f/2)):e.troops=0:(e.bubing>0?(e.bubing-=f,e.bbs+=Math.round(f/2)):e.shuibing>0?(e.shuibing-=f,e.sbs+=Math.round(f/2)):e.gongbing>0?(e.gongbing-=f,e.gbs+=Math.round(f/2)):e.qibing>0&&(e.qibing-=f,e.qbs+=Math.round(f/2)),e.bubing<0?e.bubing=0:e.shuibing<0?e.shuibing=0:e.gongbing<0?e.gongbing=0:e.qibing<0&&(e.qibing=0))},e.cutShouyi=function(e,n){if(!(p.getRandom(0,99)>2)){for(var a,i=0,y=t(n.values());!(a=y()).done;){i+=a.value.getBili()}e.shouyi-=Math.round(i/100)}},e.getPermeter=function(e,t){var n=s.bb,a=s.sb,i=s.gb,y=s.qb,r=0;if(e.type==g.city||e.type==g.gate)if(t.type!=g.army||t.armyType!=n&&t.armyType!=a)if(t.type==g.army&&t.armyType==y)r=1.2;else{if(t.type!=g.army||t.armyType!=i)return 1;r=1}else r=1.2;else if(e.type==g.port)if(t.type!=g.army||t.armyType!=n&&t.armyType!=a)if(t.type==g.army&&t.armyType==y)r=1.2;else{if(t.type!=g.army||t.armyType!=i)return 1;r=1}else r=1.2;else e.type!=g.army||e.armyType!=n&&e.armyType!=a?e.type==g.army&&e.armyType==y?t.type==g.city||t.type==g.gate?r=.5:t.type==g.port?r=.8:t.type!=g.army||t.armyType!=n&&t.armyType!=a?t.type==g.army&&t.armyType==y?r=.8:t.type==g.army&&t.armyType==i&&(r=1.2):r=1:e.type==g.army&&e.armyType==i?t.type==g.city||t.type==g.gate?r=1.2:t.type==g.port?r=1.6:t.type!=g.army||t.armyType!=n&&t.armyType!=a?t.type==g.army&&t.armyType==y?r=.8:t.type==g.army&&t.armyType==i&&(r=.9):r=.9:r=0:t.type==g.city||t.type==g.gate||t.type==g.port?r=.8:t.type!=g.army||t.armyType!=n&&t.armyType!=a?t.type==g.army&&t.armyType==y?r=.8:t.type==g.army&&t.armyType==i&&(r=1.2):r=1;return e.type==g.army&&e.armyType==s.sb&&e.isInRiver&&(r*=1.5),r},e.getSpeedPermeter=function(e){var t=r.getInstance().pps.get(o.getCaptainInEntity(e));return t.ts>50?(t.ts-50)/200+1:1},e.checkBaoji=function(e,n){for(var a,b=r.getInstance(),u=y.getInstance(),m=0,d="",c=t(e.peoples);!(a=c()).done;){var l=a.value,h=-1;e.armyType==s.bb?h=b.pps.get(l).bb:e.armyType==s.qb?h=b.pps.get(l).qb:e.armyType==s.sb?h=b.pps.get(l).sb:e.armyType==s.gb&&(h=b.pps.get(l).gb),h>m&&(m=h,d=l)}if(""!=d){i("---------------计算暴击-------------");var f=b.pps.get(d).xg,v=p.getRandom(0,99);if(!(v<85&&0==f||v<90&&1==f||v<94&&2==f||v<97&&3==f)){var T=n.values()[p.getRandom(0,n.size-1)];if(T){var q=0;q=e.type==g.army?e.troops:e.bubing+e.shuibing+e.gongbing+e.qibing;var I=Math.round(q*m*(p.getRandom(100,110)/100)*.01);T.type==g.army?T.troops>I?T.troops-=I:T.troops=0:(T.bubing>0?T.bubing-=I:T.shuibing>0?T.shuibing-=I:T.gongbing>0?T.gongbing-=I:T.qibing>0&&(T.qibing-=I),T.bubing<0?T.bubing=0:T.shuibing<0?T.shuibing=0:T.gongbing<0?T.gongbing=0:T.qibing<0&&(T.qibing=0)),u.ec.showCutNumber(I,T.name);var M=!1;if((o.getKingdomIdByEntityName(e.name)==u.playerId||o.getKingdomIdByEntityName(T.name)==u.playerId)&&(M=!0),M){var E=[];E.push({id:e.getCaptain(),msg:"杀他个片甲不留"}),E.push({id:T.getCaptain(),msg:"损兵折将啊,可恶"}),u.cc.showDialogs(E)}}}}},e.showArmyAudioEffect=function(e,t){var n=y.getInstance();e.isInWar?e.armyType==s.bb||e.armyType==s.sb?n.bc.changeSound(t,"射箭"):e.armyType==s.gb?n.bc.changeSound(t,"投石"):e.armyType==s.qb&&n.bc.changeSound(t,"射箭"):e.isInRiver?n.bc.changeSound(t,"行船"):e.armyType==s.bb||e.armyType==s.sb?n.bc.changeSound(t,"步兵行军"):e.armyType==s.gb?n.bc.changeSound(t,"工兵行军"):e.armyType==s.qb&&n.bc.changeSound(t,"轻骑兵")},e.addAllKindomMoney=function(){i("计算季度商业税收");for(var e,n=y.getInstance(),a=t(n.kingdoms.values());!(e=a()).done;){for(var r,s=e.value,o=0,p=t(n.kingdoms.get(s.kingId).entities);!(r=p()).done;){var b=r.value,u=n.entities.get(b);u.type==g.city&&(o+=10*u.shuishou)}s.money+=o}},e.addAllEntityFood=function(){i("计算秋季农业收益");for(var e,n=y.getInstance(),a=t(n.entities.values());!(e=a()).done;){var r=e.value;if(r.type==g.city&&""!=o.getKingdomIdByEntityName(r.name)){n.dc.bds.get(r.name);r.food+=10*r.shouyi}}},e.addAllEntityBingyi=function(){i("计算春季兵役人数");for(var e,n=y.getInstance(),a=t(n.entities.values());!(e=a()).done;){var r=e.value,s=n.kingdoms.get(o.getKingdomIdByEntityName(r.name));r.type==g.city&&""!=o.getKingdomIdByEntityName(r.name)&&(r.bingyi+=(r.mingxing+s.credit)*n.dc.bds.get(r.name).size)}},e.cutAllEntitySalary=function(){i("计算每个月薪水");for(var e,n=y.getInstance(),a=t(n.entities.values());!(e=a()).done;){var r=e.value,g=n.kingdoms.get(o.getKingdomIdByEntityName(r.name));if(g)for(var s,p=t(r.peoples);!(s=p()).done;){var b=s.value,u=n.peoples.get(b);g.money>5*u.juewei+5?g.money-=5*u.juewei+5:(g.credit>1&&g.credit--,u.loyal>1&&u.loyal--)}}},e}());n._RF.pop()}}}));

System.register("chunks:///_virtual/NativeAndHttpHelper.ts",["cc"],(function(t){"use strict";var n,e;return{setters:[function(t){n=t.cclegacy,e=t._decorator}],execute:function(){n._RF.push({},"c106aAA8TdIBbzeNUAhe9G6","NativeAndHttpHelper",void 0);e.ccclass,e.property,t("NativeAndHttpHelper",function(){function t(){}return t.showAd=function(t){},t.onShowAdCallback=function(t,n){},t.httpGet=function(t){},t.httpPost=function(t,n){},t.onHTTPCallback=function(t){},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/OrderConfirmController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameController.ts","./UiHelper.ts","./BasePannelController.ts","./PeopleInfoController.ts"],(function(n){"use strict";var e,a,t,r,o,i,l,s,f,c,C;return{setters:[function(n){e=n.inheritsLoose,a=n.createForOfIteratorHelperLoose},function(n){t=n.cclegacy,r=n._decorator,o=n.find,i=n.Node,l=n.Label},function(n){s=n.GameController},function(n){f=n.UiHelper},function(n){c=n.BasePannelController},function(n){C=n.PeopleInfoController}],execute:function(){var h;t._RF.push({},"64ebfBjuHFKhq/fkgDxdrxl","OrderConfirmController",void 0);var d=r.ccclass;r.property,n("OrderConfirmController",d("OrderConfirmController")(h=function(n){function t(){return n.apply(this,arguments)||this}e(t,n);var r=t.prototype;return r.start=function(){this.gc=s.getInstance(),o("Canvas/OrderConfirmPannel/Bg").off(i.EventType.TOUCH_END),o("Canvas/OrderConfirmPannel/Bg").on(i.EventType.TOUCH_END,this.hide,this)},r.showForOrder=function(n,e){this.callback=e,this.order=n,this.show(),this.renderData(f.getOrderDetailStr(n),n.peoples)},r.showForTask=function(n,e){this.callback=e,this.task=n,this.show(),this.renderData(f.getTaskDetailStr(n),[n.people])},r.showForAct=function(n,e){this.callback=e,this.act=n,this.show(),this.renderData(f.getActDetailStr(n),null)},r.hide=function(){this.hideFrame(o("Canvas/OrderConfirmPannel"),o("Canvas/OrderConfirmPannel").getChildByName("Pannel"))},r.show=function(){this.showFrame(o("Canvas/OrderConfirmPannel"),o("Canvas/OrderConfirmPannel").getChildByName("Pannel"),!0,!1)},r.renderData=function(n,e){var t=this;this.hideAllData(),o("Canvas/OrderConfirmPannel/Pannel/Datas/Name/Label").getComponent(l).string=n.get("name"),n.delete("name");for(var r,s=0,f=a(n);!(r=f()).done;){var c=r.value;++s>4||this.showData(c[0],c[1],s)}var h=0;if(e&&0!=e.length){o("Canvas/OrderConfirmPannel/Pannel/Datas/Peoples").active=!0;for(var d,v=function(){var n=d.value;if(h>=6)return"continue";var e=o("Canvas/OrderConfirmPannel/Pannel/Datas/Peoples/People"+h);e&&(e.active=!0,e.getChildByName("Value").getComponent(l).string=n,e.off(i.EventType.TOUCH_END),e.on(i.EventType.TOUCH_END,(function(){t.hide(),t.node.getComponent(C).show(n)}),t)),h++},m=a(e);!(d=m()).done;)v()}else o("Canvas/OrderConfirmPannel/Pannel/Datas/Peoples").active=!1},r.ok=function(){this.callback&&this.callback(),this.hide()},r.cancel=function(){this.hide()},r.showData=function(n,e,a){var t=o("Canvas/OrderConfirmPannel/Pannel/Datas/Data"+a);t.active=!0,t.getChildByName("Key").getComponent(l).string=n,t.getChildByName("Value").getComponent(l).string=e},r.hideAllData=function(){for(var n=1;n<5;n++){o("Canvas/OrderConfirmPannel/Pannel/Datas/Data"+n).active=!1}for(var e=0;e<6;e++){o("Canvas/OrderConfirmPannel/Pannel/Datas/Peoples/People"+e).active=!1}},r.showOrderInfomationPannel=function(n,e){var a=this;o("Canvas/OrderInfomationPannel").active=!0,o("Canvas/OrderInfomationPannel/Pannel/Name/Label").getComponent(l).string=n,o("Canvas/OrderInfomationPannel/Pannel/Value").getComponent(l).string=e,o("Canvas/OrderInfomationPannel/Bg").on(i.EventType.TOUCH_END,(function(){a.hideOrderInfomationPannel()}),this)},r.hideOrderInfomationPannel=function(){o("Canvas/OrderInfomationPannel").active=!1},t}(c))||h);t._RF.pop()}}}));

System.register("chunks:///_virtual/PathFindingComponent.ts",["./rollupPluginModLoBabelHelpers.js","cc","./DataControler.ts","./GameController.ts","./AStarRoadSeeker.ts","./BaseComponent.ts","./GameHelper.ts"],(function(r){"use strict";var t,a,e,n,s,o,i,h,u,l,p,c,g,d,f,v;return{setters:[function(r){t=r.inheritsLoose,a=r.createForOfIteratorHelperLoose},function(r){e=r.cclegacy,n=r._decorator,s=r.log,o=r.find,i=r.v3,h=r.tween,u=r.TweenSystem},function(r){l=r.DataControler,p=r.EntityType,c=r.ArmyType},function(r){g=r.GameController},function(r){d=r.default},function(r){f=r.default},function(r){v=r.default}],execute:function(){var y;e._RF.push({},"959a4JAJVlO75qMqqfOcEzH","PathFindingComponent",void 0);var m=n.ccclass;n.property,r("default",m(y=function(r){function e(){for(var t,a=arguments.length,e=new Array(a),n=0;n<a;n++)e[n]=arguments[n];return(t=r.call.apply(r,[this].concat(e))||this).changeSpeed=1,t.isTeam=!1,t}t(e,r);var n=e.prototype;return n.setCallback=function(r,t,a){this.onRiverCallback=r,this.onLandCallback=t,this.onNoWayCallback=a},n.gotoEntityForTeam=function(r,t,a,e){this.aStar=d.getInstance();var n=this.getGirdPos(),s=this.aStar.findPath(this.node.name,n[0],n[1],l.getInstance().bds.get(t.name).pos[0],l.getInstance().bds.get(t.name).pos[1],e,r.getData().index,t.getData().index,!0);this.gotoPos(s,a,this)},n.gotoEntityForGroup=function(r,t,e,n){this.aStar=d.getInstance();var o=this.getGirdPos(),i=this.getEntityNearPoints(t.name);if(i.length>0){for(var h,u=null,l=1e4,p=a(i);!(h=p()).done;){var c=h.value,g=this.aStar.findPath(this.node.name,o[0],o[1],c[0],c[1],n,r.getData().index,0,!1);g.length<l&&(l=g.length,u=g)}u&&this.gotoPos(u,e,this)}else s("--------opps--bug---------")},n.getGirdPos=function(){return[Math.round(this.node.position.x)+50,50-Math.round(this.node.position.z)]},n.getOtherGridPos=function(r){var t=o(r).position;return[Math.round(t.x)+50,50-Math.round(t.z)]},n.gotoLand=function(r,t,a,e,n,s,o){void 0===s&&(s=!1),void 0===o&&(o=!1),this.aStar=d.getInstance();var i=this.getGirdPos();if(o){var h=this.getGrunpNearPoint(t,a,i[0],i[1]);t=h[0],a=h[1]}var u=this.aStar.findPath(this.node.name,i[0],i[1],t,a,e,r.getData().index,0,s);this.gotoPos(u,n,this)},n.gotoPos=function(r,t,a){for(var e=this,n=[],o=[],u=0;u<r.length;u++){if(0==u&&r[0]&&r[1]&&r[0].value%10!=7&&r[1].value%10!=7){var l=this.node.position,p=i(r[0].dx-50,0,50-r[0].dy),c=i(r[1].dx-50,0,50-r[1].dy);if(l.x>p.x&&l.x<c.x||l.x>c.x&&l.x<p.x||l.z>p.z&&l.z<c.z||l.z>p.z&&l.z<c.z)continue}var d=r[u];n.push(i(d.dx-50,0,50-d.dy)),d.value>10?o.push(d.value%10):o.push(d.value)}if(this.tween=h(this.node),this.tween&&this.tween.stop(),0==n.length)return r&&r.length>0?void t():(this.onNoWayCallback?this.onNoWayCallback():s("----路径不存在且未指定回调----"+this.node.name),void g.isGameProduct);for(var f=function(r){var t=1;0!=r&&n[r]&&n[r+1]&&n[r].x-n[r+1].x!=0&&n[r].z-n[r+1].z!=0&&(t=1.4),e.tween.to(t*e.changeSpeed*e.getSpeedPermeter(o[r]),{position:n[r]},{easing:"linear"}),n[r+1]?e.tween.call((function(){e.next=n[r+1]})):e.tween.call((function(){e.next=null})),n[r+1]&&7==o[r]&&7==o[r+1]?e.tween.call((function(){e.onLandCallback&&e.onLandCallback()})):n[r+1]&&7==o[r]&&3==o[r+1]&&e.tween.call((function(){e.onRiverCallback&&e.onRiverCallback()}))},v=0;v<n.length;v++)f(v);t?this.tween.call(t.bind(a)).start():this.tween.start()},n.pause=function(){u.instance.ActionManager.pauseTarget(this.node)},n.recover=function(){u.instance.ActionManager.resumeTarget(this.node)},n.stopGotoPos=function(){null!=this.tween&&this.tween.stop()},n.getGrunpNearPoint=function(r,t,a,e){if(r<1||r>98||t<1||t>98)return[r,t];var n=g.getInstance(),s=[];if(n.arr[r-1]&&0==n.arr[r-1][t]&&s.push([r-1,t]),n.arr[r+1]&&0==n.arr[r+1][t]&&s.push([r+1,t]),n.arr[r]&&0==n.arr[r][t+1]&&s.push([r,t+1]),n.arr[r]&&0==n.arr[r][t-1]&&s.push([r,t-1]),0==s.length)return[r,t];for(var o=0,i=null,h=0,u=s;h<u.length;h++){var l=u[h],p=Math.abs(l[0]-a)+Math.abs(l[1]-e);p>o&&(o=p,i=l)}return i||s[v.getRandom(0,s.length-1)]},n.getEntityNearPoints=function(r){var t=g.getInstance(),a=l.getInstance().bds.get(r),e=[];if(1==a.type){var n=a.pos[0],o=a.pos[1];n-2>-1&&t.arr[n-2]&&0==t.arr[n-2][o]&&e.push([n-2,o]),n+2<100&&t.arr[n+2]&&0==t.arr[n+2][o]&&e.push([n+2,o]),o-2>-1&&t.arr[n]&&0==t.arr[n][o-2]&&e.push([n,o-2]),o+2<100&&t.arr[n]&&0==t.arr[n][o+2]&&e.push([n,o+2])}else if(3==a.type){var i=a.pos[0],h=a.pos[1],u=a.pos[2],p=a.pos[3];i==u?(t.arr[i-1]&&0==t.arr[i-1][h]&&e.push([i-1,h]),t.arr[i-1]&&0==t.arr[i-1][p]&&e.push([i-1,p]),t.arr[i+1]&&0==t.arr[i+1][p]&&e.push([i+1,p]),t.arr[i+1]&&0==t.arr[i+1][h]&&e.push([i+1,h])):h==p?(t.arr[i]&&0==t.arr[i][h-1]&&e.push([i,h-1]),t.arr[u]&&0==t.arr[u][h-1]&&e.push([u,h-1]),t.arr[u]&&0==t.arr[u][h+1]&&e.push([u,h+1]),t.arr[i]&&0==t.arr[i][h+1]&&e.push([i,h+1])):s("---bug---")}else if(2==a.type){var c=a.pos[0],d=a.pos[1],f=a.pos[2],v=a.pos[3];if(c==f){var y=d>v?d:v;!t.arr[c]||0!=t.arr[c][y+1]&&3!=t.arr[c][y+1]||e.push([c,y+1]),!t.arr[c-1]||0!=t.arr[c-1][y+1]&&3!=t.arr[c-1][y+1]||e.push([c-1,y+1]),!t.arr[c+1]||0!=t.arr[c+1][y+1]&&3!=t.arr[c+1][y+1]||e.push([c,y+1]);var m=d<v?d:v;!t.arr[c]||0!=t.arr[c][m-1]&&3!=t.arr[c][m-1]||e.push([c,m-1]),!t.arr[c-1]||0!=t.arr[c-1][m-1]&&3!=t.arr[c-1][m-1]||e.push([c-1,m-1]),!t.arr[c+1]||0!=t.arr[c+1][m-1]&&3!=t.arr[c+1][m-1]||e.push([c+1,m-1])}else if(d==v){var b=c>f?c:f;!t.arr[b+1]||0!=t.arr[b+1][d]&&3!=t.arr[b+1][d]||e.push([b+1,d]),!t.arr[b+1]||0!=t.arr[b+1][d+1]&&3!=t.arr[b+1][d+1]||e.push([b+1,d+1]),!t.arr[b+1]||0!=t.arr[b+1][d-1]&&3!=t.arr[b+1][d-1]||e.push([b+1,d-1]);var P=c<f?c:f;!t.arr[P-1]||0!=t.arr[P-1][d]&&3!=t.arr[P-1][d]||e.push([P-1,d]),!t.arr[P-1]||0!=t.arr[P-1][d-1]&&3!=t.arr[P-1][d-1]||e.push([P-1,d-1]),!t.arr[P-1]||0!=t.arr[P-1][d+1]&&3!=t.arr[P-1][d+1]||e.push([P-1,d+1])}else s("---bug---")}else s("---bug---");return e},n.goAroundBuildingForGroup=function(r,t,e,n,s){this.aStar=d.getInstance();var o=this.getOtherGridPos(r.name),i=this.getEntityNearPoints(t.name);if(i.length>1){for(var h=null,u=i.length-1;u>-1;u--){var l=i[u];if(l[0]==o[0]&&l[1]==o[1]){i.splice(u,1);break}}if(t.type==p.city)h=i[v.getRandom(0,i.length-1)];else if(t.type==p.port){for(var c,g=[],f=a(i);!(c=f()).done;){var y=c.value;(y[0]==o[0]&&Math.abs(y[1]-o[1])<3||y[1]==o[1]&&Math.abs(y[0]-o[0])<3)&&g.push(y)}h=g[v.getRandom(0,g.length-1)]}else if(t.type==p.gate){for(var m,b=[],P=a(i);!(m=P()).done;){var x=m.value;(x[0]==o[0]&&Math.abs(x[1]-o[1])<2||x[1]==o[1]&&Math.abs(x[0]-o[0])<2)&&b.push(x)}h=b[0]}if(h){var C=this.aStar.findPath(this.node.name,o[0],o[1],h[0],h[1],n,0,0,!1);this.gotoPos(C,e,this)}else s&&s()}else s&&s()},n.getSpeedPermeter=function(r){var t=1;return this.isTeam?t=3==r?.5:5==r?1:9==r?2:.5:(3==r?t=this.armyType==c.qb?.7:this.armyType==c.gb?1:this.armyType==c.sb?.3:.5:5==r?t=this.armyType==c.gb?4:2:9==r?t=this.armyType==c.gb?8:4:this.armyType==c.qb?t=.5:this.armyType==c.gb&&(t=2),t)},n.getNowEntityDangerousPermeter=function(r){var t=1,a=this.getGirdPos(),e=r.arr[a[0]+1][a[1]-1],n=r.arr[a[0]+1][a[1]],o=r.arr[a[0]+1][a[1]+1],i=r.arr[a[0]][a[1]-1],h=r.arr[a[0]][a[1]],u=r.arr[a[0]][a[1]+1],l=r.arr[a[0]-1][a[1]-1],p=r.arr[a[0]-1][a[1]],c=r.arr[a[0]-1][a[1]+1];return 0!=h&&s("---埋伏地点有bug---"),1==e&&t++,1==n&&t++,1==o&&t++,1==i&&t++,1==u&&t++,1==l&&t++,1==p&&t++,1==c&&t++,s(this.node.name+"队的埋伏地点的危险系数为:"+t),t},e}(f))||y);e._RF.pop()}}}));

System.register("chunks:///_virtual/PatrolEventController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./DataControler.ts","./EntityHelper.ts","./GameHelper.ts"],(function(t){"use strict";var n,e,i,s,o,a,c,r;return{setters:[function(t){n=t.createForOfIteratorHelperLoose},function(t){e=t.cclegacy,i=t._decorator},function(t){s=t.EntityType,o=t.TaskType,a=t.InfomationType},function(t){c=t.EH},function(t){r=t.default}],execute:function(){e._RF.push({},"706d9ep+3FAVYcUewm9SNft","PatrolEventController",void 0);i.ccclass,i.property,t("PatrolEventController",function(){function t(){this.events=[]}t.getIns=function(){return t.instance||(t.instance=new t,t.instance.init()),t.instance};var e=t.prototype;return e.init=function(){var t=new d;t.str="当地巫师聚众献祭敛财",t.successStr="借势当众拆穿,顺势收缴不义之财,百姓拍手称快",t.failStr="粗暴武力制止,被信徒围攻,落荒而逃,百姓唏嘘不已",t.needZs=!0,t.addMinxing=5,t.addMoney=300,t.cutHealth=20,t.cutMinxing=5,this.events.push(t);var n=new d;n.str="恶霸横行乡里,百姓敢怒不敢言",n.successStr="雷霆一击,将恶霸绳之以法,以儆效尤,百姓拍手称快",n.failStr="拖沓迟疑,恶霸逃之夭夭,不日返回报复,百姓唏嘘不已",n.needWl=!0,n.addMinxing=5,n.addMoney=300,n.cutHealth=20,n.cutMinxing=5,this.events.push(n);var e=new d;e.str="饥民聚众乞讨,食不果腹,瘦骨嶙峋",e.successStr="开仓接济,饥民感恩戴德,百姓拍手称快",e.failStr="开仓接济,有刁民冒充饥民,损失惨重,百姓唏嘘不已",e.needZs=!0,e.costFood=50,e.addMinxing=10,e.cutMinxing=5,this.events.push(e);var i=new d;i.str="恶吏豪族巧立名目,搜刮民脂民膏",i.successStr="恩威并施,与豪族达成协议,百姓生活得以改善",i.failStr="直接干涉,豪族武力对抗,百姓日子雪上加霜",i.needZs=!0,i.needWl=!0,i.costMoney=100,i.addMinxing=20,i.cutMinxing=5,i.addBingyi=500,i.cutBingyi=200,this.events.push(i)},e.update=function(t,e){if(t.type==s.city&&t.tasks)for(var i,d=n(t.tasks.values());!(i=d()).done;){var u=i.value;if(u.type==o.patrol&&r.getRandom(0,999)>950){var h=this.events[r.getRandom(0,this.events.length-1)],l=e.dc.pps.get(u.people),g=e.peoples.get(u.people),y=c.getKingdomIdByEntityName(t.name);if(!y||""==y)return;var p=e.kingdoms.get(y);if(!p)return;if(h.costMoney>p.money)return;if(h.costFood>t.food)return;var f=!1;(h.needWl&&r.getRandom(0,99)<l.wl||h.needZs&&r.getRandom(0,99)<l.zs)&&(f=!0);var M=c.c2r(u.people)+"在"+c.c2r(t.name)+"巡视期间遇上"+c.c2r(h.str)+",",v="";if(f?(v=M+=h.successStr+" ",h.addMinxing>0&&(M+="民心+"+h.addMinxing+" ",t.changeMinxing(h.addMinxing)),h.addMoney>0&&(M+="金钱+"+h.addMoney+" ",p.money+=h.addMoney),h.addShiqi>0&&(M+="士气+"+h.addShiqi+" ",t.changeShiqi(h.addShiqi)),h.addBingyi>0&&(M+="兵役+"+h.addBingyi+" ",t.changeBingyi(h.addBingyi))):(v=M+=h.failStr+" ",h.cutMinxing>0&&(M+="民心-"+h.cutMinxing+" ",t.changeMinxing(-h.cutMinxing)),h.cutHealth>0&&(M+="健康-"+h.cutHealth+" ",g.health-=h.cutHealth,g.health<0&&(g.health=0)),h.cutShiqi>0&&(M+="士气-"+h.cutShiqi+" ",t.changeShiqi(-h.cutShiqi)),h.cutBingyi>0&&(M+="兵役-"+h.cutBingyi+" ",t.changeBingyi(-h.cutBingyi))),h.costFood>0&&(M+="耗费粮食:"+h.costFood+" ",t.changeFood(-h.costFood)),h.costMoney>0&&(M+="耗费金钱:"+h.costMoney+" ",p.money-=h.costMoney),y==e.playerId){var S=f?a.执行成功:a.执行失败;e.cc.showInfomation(M,null,S)}return void e.cc.addLog(v)}}},t}());var d=t("PatrolEvent",(function(){this.str="",this.successStr="",this.failStr="",this.needZs=!1,this.needWl=!1,this.costMoney=0,this.costFood=0,this.cutMinxing=0,this.cutHealth=0,this.cutShiqi=0,this.cutBingyi=0,this.addMoney=0,this.addMinxing=0,this.addShiqi=0,this.addBingyi=0}));e._RF.pop()}}}));

System.register("chunks:///_virtual/PeopleInfoController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./DataControler.ts","./EntityHelper.ts","./GameController.ts","./BasePannelController.ts"],(function(e){"use strict";var t,a,n,o,s,l,p,i,h,r,D,g,m;return{setters:[function(e){t=e.inheritsLoose},function(e){a=e.cclegacy,n=e._decorator,o=e.find,s=e.Node,l=e.Label,p=e.Sprite},function(e){i=e.DataControler,h=e.TypeGeter,r=e.ArmyType},function(e){D=e.EH},function(e){g=e.GameController},function(e){m=e.BasePannelController}],execute:function(){var P;a._RF.push({},"2baa8Q+vD9EWKIkELQS5elf","PeopleInfoController",void 0);var y=n.ccclass;n.property,e("PeopleInfoController",y("PeopleInfoController")(P=function(e){function a(){return e.apply(this,arguments)||this}t(a,e);var n=a.prototype;return n.start=function(){this.gc=g.getInstance(),o("Canvas/PeopleInfoPannel/Bg").off(s.EventType.TOUCH_END),o("Canvas/PeopleInfoPannel/Bg").on(s.EventType.TOUCH_END,this.hide,this)},n.show=function(e){this.gc.peoples.get(e)?(this.people=this.gc.peoples.get(e),this.peopleData=this.gc.dc.pps.get(this.people.name),this.showFrame(o("Canvas/PeopleInfoPannel"),o("Canvas/PeopleInfoPannel").getChildByName("Pannel")),this.renderData()):this.log("BUG-人物不存在")},n.hide=function(){this.hideFrame(o("Canvas/PeopleInfoPannel"),o("Canvas/PeopleInfoPannel").getChildByName("Pannel"))},n.renderData=function(){this.hideAllData(),o("Canvas/PeopleInfoPannel/Pannel/Datas/Name/Label").getComponent(l).string=this.people.name,o("Canvas/PeopleInfoPannel/Pannel/Datas/HeadFrame/Head").getComponent(p).spriteFrame=i.getInstance().heads.get(this.people.name),this.showData(h.getArmyType(r.bb),this.peopleData.bb+"",1),this.showData(h.getArmyType(r.qb),this.peopleData.qb+"",2),this.showData(h.getArmyType(r.sb),this.peopleData.sb+"",3),this.showData(h.getArmyType(r.gb),this.peopleData.gb+"",4),this.showData("年龄",this.gc.year-this.peopleData.age+"",5),this.showData("内政",this.peopleData.nz+"",6),this.showData("武力",this.peopleData.wl+"",7),this.showData("统帅",this.peopleData.ts+"",8),this.showData("智商",this.peopleData.zs+"",9),this.showData("健康",this.people.health+"",10),D.checkIsPeopleZaiye(this.people.name)?this.showData("所属","在野",11):D.getEntityByPeopleName(this.people.name)?this.showData("所属",D.getEntityByPeopleName(this.people.name).name,11):D.getEntityByCaptiveName(this.people.name)?this.showData("所属",D.getEntityByCaptiveName(this.people.name).name,11):this.showData("所属","不详",11),this.showData("忠诚",this.people.loyal+"",12),this.showData("爵位",h.getJueType(this.people.juewei),13);var e=14;this.peopleData.parent&&""!=this.peopleData.parent&&(this.showData("父亲",this.peopleData.parent+"",e),e++),this.peopleData.home&&""!=this.peopleData.home&&(this.showData("籍贯",this.peopleData.home+"",e),e++),this.peopleData.story&&this.peopleData.story.length>5?o("Canvas/PeopleInfoPannel/Pannel/Datas/StoryFrame/Label").getComponent(l).string=this.peopleData.story:o("Canvas/PeopleInfoPannel/Pannel/Datas/StoryFrame/Label").getComponent(l).string="此人尚未添加任何传记"},n.showData=function(e,t,a){var n=o("Canvas/PeopleInfoPannel/Pannel/Datas/Data"+a);n.active=!0,n.getChildByName("Key").getComponent(l).string=e,n.getChildByName("Value").getComponent(l).string=t},n.hideAllData=function(){for(var e=1;e<16;e++){o("Canvas/PeopleInfoPannel/Pannel/Datas/Data"+e).active=!1}},a}(m))||P);a._RF.pop()}}}));

System.register("chunks:///_virtual/PinYinHelper.ts",["cc"],(function(n){"use strict";var a;return{setters:[function(n){a=n.cclegacy}],execute:function(){a._RF.push({},"7f503FC+vBBPKHBwRMXSTZ2","PinYinHelper",void 0);n("default",function(){function n(){this.PinYin={a:"啊阿锕",ai:"埃挨哎唉哀皑癌蔼矮艾碍爱隘诶捱嗳嗌嫒瑷暧砹锿霭",an:"鞍氨安俺按暗岸胺案谙埯揞犴庵桉铵鹌顸黯",ang:"肮昂盎",ao:"凹敖熬翱袄傲奥懊澳坳拗嗷噢岙廒遨媪骜聱螯鏊鳌鏖",ba:"芭捌扒叭吧笆八疤巴拔跋靶把耙坝霸罢爸茇菝萆捭岜灞杷钯粑鲅魃",bai:"白柏百摆佰败拜稗薜掰鞴",ban:"斑班搬扳般颁板版扮拌伴瓣半办绊阪坂豳钣瘢癍舨",bang:"邦帮梆榜膀绑棒磅蚌镑傍谤蒡螃",bao:"苞胞包褒雹保堡饱宝抱报暴豹鲍爆勹葆宀孢煲鸨褓趵龅",bo:"剥薄玻菠播拨钵波博勃搏铂箔伯帛舶脖膊渤泊驳亳蕃啵饽檗擘礴钹鹁簸跛",bei:"杯碑悲卑北辈背贝钡倍狈备惫焙被孛陂邶埤蓓呗怫悖碚鹎褙鐾",ben:"奔苯本笨畚坌锛",beng:"崩绷甭泵蹦迸唪嘣甏",bi:"逼鼻比鄙笔彼碧蓖蔽毕毙毖币庇痹闭敝弊必辟壁臂避陛匕仳俾芘荜荸吡哔狴庳愎滗濞弼妣婢嬖璧贲畀铋秕裨筚箅篦舭襞跸髀",bian:"鞭边编贬扁便变卞辨辩辫遍匾弁苄忭汴缏煸砭碥稹窆蝙笾鳊",biao:"标彪膘表婊骠飑飙飚灬镖镳瘭裱鳔",bie:"鳖憋别瘪蹩鳘",bin:"彬斌濒滨宾摈傧浜缤玢殡膑镔髌鬓",bing:"兵冰柄丙秉饼炳病并禀邴摒绠枋槟燹",bu:"捕卜哺补埠不布步簿部怖拊卟逋瓿晡钚醭",ca:"擦嚓礤",cai:"猜裁材才财睬踩采彩菜蔡",can:"餐参蚕残惭惨灿骖璨粲黪",cang:"苍舱仓沧藏伧",cao:"操糙槽曹草艹嘈漕螬艚",ce:"厕策侧册测刂帻恻",ceng:"层蹭噌",cha:"插叉茬茶查碴搽察岔差诧猹馇汊姹杈楂槎檫钗锸镲衩",chai:"拆柴豺侪茈瘥虿龇",chan:"搀掺蝉馋谗缠铲产阐颤冁谄谶蒇廛忏潺澶孱羼婵嬗骣觇禅镡裣蟾躔",chang:"昌猖场尝常长偿肠厂敞畅唱倡伥鬯苌菖徜怅惝阊娼嫦昶氅鲳",chao:"超抄钞朝嘲潮巢吵炒怊绉晁耖",che:"车扯撤掣彻澈坼屮砗",chen:"郴臣辰尘晨忱沉陈趁衬称谌抻嗔宸琛榇肜胂碜龀",cheng:"撑城橙成呈乘程惩澄诚承逞骋秤埕嵊徵浈枨柽樘晟塍瞠铖裎蛏酲",chi:"吃痴持匙池迟弛驰耻齿侈尺赤翅斥炽傺墀芪茌搋叱哧啻嗤彳饬沲媸敕胝眙眵鸱瘛褫蚩螭笞篪豉踅踟魑",chong:"充冲虫崇宠茺忡憧铳艟",chou:"抽酬畴踌稠愁筹仇绸瞅丑俦圳帱惆溴妯瘳雠鲋",chu:"臭初出橱厨躇锄雏滁除楚础储矗搐触处亍刍憷绌杵楮樗蜍蹰黜",chuan:"揣川穿椽传船喘串掾舛惴遄巛氚钏镩舡",chuang:"疮窗幢床闯创怆",chui:"吹炊捶锤垂陲棰槌",chun:"春椿醇唇淳纯蠢促莼沌肫朐鹑蝽",chuo:"戳绰蔟辶辍镞踔龊",ci:"疵茨磁雌辞慈瓷词此刺赐次荠呲嵯鹚螅糍趑",cong:"聪葱囱匆从丛偬苁淙骢琮璁枞",cu:"凑粗醋簇猝殂蹙",cuan:"蹿篡窜汆撺昕爨",cui:"摧崔催脆瘁粹淬翠萃悴璀榱隹",cun:"村存寸磋忖皴",cuo:"撮搓措挫错厝脞锉矬痤鹾蹉躜",da:"搭达答瘩打大耷哒嗒怛妲疸褡笪靼鞑",dai:"呆歹傣戴带殆代贷袋待逮怠埭甙呔岱迨逯骀绐玳黛",dan:"耽担丹单郸掸胆旦氮但惮淡诞弹蛋亻儋卩萏啖澹檐殚赕眈瘅聃箪",dang:"当挡党荡档谠凼菪宕砀铛裆",dao:"刀捣蹈倒岛祷导到稻悼道盗叨啁忉洮氘焘忑纛",de:"德得的锝",deng:"蹬灯登等瞪凳邓噔嶝戥磴镫簦",di:"堤低滴迪敌笛狄涤翟嫡抵底地蒂第帝弟递缔氐籴诋谛邸坻莜荻嘀娣柢棣觌砥碲睇镝羝骶",dian:"颠掂滇碘点典靛垫电佃甸店惦奠淀殿丶阽坫埝巅玷癜癫簟踮",diao:"碉叼雕凋刁掉吊钓调轺铞蜩粜貂",die:"跌爹碟蝶迭谍叠佚垤堞揲喋渫轶牒瓞褶耋蹀鲽鳎",ding:"丁盯叮钉顶鼎锭定订丢仃啶玎腚碇町铤疔耵酊",dong:"东冬董懂动栋侗恫冻洞垌咚岽峒夂氡胨胴硐鸫",dou:"兜抖斗陡豆逗痘蔸钭窦窬蚪篼酡",du:"都督毒犊独读堵睹赌杜镀肚度渡妒芏嘟渎椟橐牍蠹笃髑黩",duan:"端短锻段断缎彖椴煅簖",dui:"堆兑队对怼憝碓",dun:"墩吨蹲敦顿囤钝盾遁炖砘礅盹镦趸",duo:"掇哆多夺垛躲朵跺舵剁惰堕咄哚缍柁铎裰踱",e:"蛾峨鹅俄额讹娥恶厄扼遏鄂饿噩谔垩垭苊莪萼呃愕屙婀轭曷腭硪锇锷鹗颚鳄",en:"恩蒽摁唔嗯",er:"而儿耳尔饵洱二贰迩珥铒鸸鲕",fa:"发罚筏伐乏阀法珐垡砝",fan:"藩帆番翻樊矾钒繁凡烦反返范贩犯饭泛蘩幡犭梵攵燔畈蹯",fang:"坊芳方肪房防妨仿访纺放匚邡彷钫舫鲂",fei:"菲非啡飞肥匪诽吠肺废沸费芾狒悱淝妃绋绯榧腓斐扉祓砩镄痱蜚篚翡霏鲱",fen:"芬酚吩氛分纷坟焚汾粉奋份忿愤粪偾瀵棼愍鲼鼢",feng:"丰封枫蜂峰锋风疯烽逢冯缝讽奉凤俸酆葑沣砜",fu:"佛否夫敷肤孵扶拂辐幅氟符伏俘服浮涪福袱弗甫抚辅俯釜斧脯腑府腐赴副覆赋复傅付阜父腹负富讣附妇缚咐匐凫郛芙苻茯莩菔呋幞滏艴孚驸绂桴赙黻黼罘稃馥虍蚨蜉蝠蝮麸趺跗鳆",ga:"噶嘎蛤尬呷尕尜旮钆",gai:"该改概钙盖溉丐陔垓戤赅胲",gan:"干甘杆柑竿肝赶感秆敢赣坩苷尴擀泔淦澉绀橄旰矸疳酐",gang:"冈刚钢缸肛纲岗港戆罡颃筻",gong:"杠工攻功恭龚供躬公宫弓巩汞拱贡共蕻廾咣珙肱蚣蛩觥",gao:"篙皋高膏羔糕搞镐稿告睾诰郜蒿藁缟槔槁杲锆",ge:"哥歌搁戈鸽胳疙割革葛格阁隔铬个各鬲仡哿塥嗝纥搿膈硌铪镉袼颌虼舸骼髂",gei:"给",gen:"根跟亘茛哏艮",geng:"耕更庚羹埂耿梗哽赓鲠",gou:"钩勾沟苟狗垢构购够佝诟岣遘媾缑觏彀鸲笱篝鞲",gu:"辜菇咕箍估沽孤姑鼓古蛊骨谷股故顾固雇嘏诂菰哌崮汩梏轱牯牿胍臌毂瞽罟钴锢瓠鸪鹄痼蛄酤觚鲴骰鹘",gua:"刮瓜剐寡挂褂卦诖呱栝鸹",guai:"乖拐怪哙",guan:"棺关官冠观管馆罐惯灌贯倌莞掼涫盥鹳鳏",guang:"光广逛犷桄胱疒",gui:"瑰规圭硅归龟闺轨鬼诡癸桂柜跪贵刽匦刿庋宄妫桧炅晷皈簋鲑鳜",gun:"辊滚棍丨衮绲磙鲧",guo:"锅郭国果裹过馘蠃埚掴呙囗帼崞猓椁虢锞聒蜮蜾蝈",ha:"哈",hai:"骸孩海氦亥害骇咴嗨颏醢",han:"酣憨邯韩含涵寒函喊罕翰撼捍旱憾悍焊汗汉邗菡撖阚瀚晗焓颔蚶鼾",hen:"夯痕很狠恨",hang:"杭航沆绗珩桁",hao:"壕嚎豪毫郝好耗号浩薅嗥嚆濠灏昊皓颢蚝",he:"呵喝荷菏核禾和何合盒貉阂河涸赫褐鹤贺诃劾壑藿嗑嗬阖盍蚵翮",hei:"嘿黑",heng:"哼亨横衡恒訇蘅",hong:"轰哄烘虹鸿洪宏弘红黉讧荭薨闳泓",hou:"喉侯猴吼厚候后堠後逅瘊篌糇鲎骺",hu:"呼乎忽瑚壶葫胡蝴狐糊湖弧虎唬护互沪户冱唿囫岵猢怙惚浒滹琥槲轷觳烀煳戽扈祜鹕鹱笏醐斛",hua:"花哗华猾滑画划化话劐浍骅桦铧稞",huai:"槐徊怀淮坏还踝",huan:"欢环桓缓换患唤痪豢焕涣宦幻郇奂垸擐圜洹浣漶寰逭缳锾鲩鬟",huang:"荒慌黄磺蝗簧皇凰惶煌晃幌恍谎隍徨湟潢遑璜肓癀蟥篁鳇",hui:"灰挥辉徽恢蛔回毁悔慧卉惠晦贿秽会烩汇讳诲绘诙茴荟蕙哕喙隳洄彗缋珲晖恚虺蟪麾",hun:"荤昏婚魂浑混诨馄阍溷缗",huo:"豁活伙火获或惑霍货祸攉嚯夥钬锪镬耠蠖",ji:"击圾基机畸稽积箕肌饥迹激讥鸡姬绩缉吉极棘辑籍集及急疾汲即嫉级挤几脊己蓟技冀季伎祭剂悸济寄寂计记既忌际妓继纪居丌乩剞佶佴脔墼芨芰萁蒺蕺掎叽咭哜唧岌嵴洎彐屐骥畿玑楫殛戟戢赍觊犄齑矶羁嵇稷瘠瘵虮笈笄暨跻跽霁鲚鲫髻麂",jia:"嘉枷夹佳家加荚颊贾甲钾假稼价架驾嫁伽郏拮岬浃迦珈戛胛恝铗镓痂蛱笳袈跏",jian:"歼监坚尖笺间煎兼肩艰奸缄茧检柬碱硷拣捡简俭剪减荐槛鉴践贱见键箭件健舰剑饯渐溅涧建僭谏谫菅蒹搛囝湔蹇謇缣枧柙楗戋戬牮犍毽腱睑锏鹣裥笕箴翦趼踺鲣鞯",jiang:"僵姜将浆江疆蒋桨奖讲匠酱降茳洚绛缰犟礓耩糨豇",jiao:"蕉椒礁焦胶交郊浇骄娇嚼搅铰矫侥脚狡角饺缴绞剿教酵轿较叫佼僬茭挢噍峤徼姣纟敫皎鹪蛟醮跤鲛",jie:"窖揭接皆秸街阶截劫节桔杰捷睫竭洁结解姐戒藉芥界借介疥诫届偈讦诘喈嗟獬婕孑桀獒碣锴疖袷颉蚧羯鲒骱髫",jin:"巾筋斤金今津襟紧锦仅谨进靳晋禁近烬浸尽卺荩堇噤馑廑妗缙瑾槿赆觐钅锓衿矜",jing:"劲荆兢茎睛晶鲸京惊精粳经井警景颈静境敬镜径痉靖竟竞净刭儆阱菁獍憬泾迳弪婧肼胫腈旌",jiong:"炯窘冂迥扃",jiu:"揪究纠玖韭久灸九酒厩救旧臼舅咎就疚僦啾阄柩桕鹫赳鬏",ju:"鞠拘狙疽驹菊局咀矩举沮聚拒据巨具距踞锯俱句惧炬剧倨讵苣苴莒掬遽屦琚枸椐榘榉橘犋飓钜锔窭裾趄醵踽龃雎鞫",juan:"捐鹃娟倦眷卷绢鄄狷涓桊蠲锩镌隽",jue:"撅攫抉掘倔爵觉决诀绝厥劂谲矍蕨噘崛獗孓珏桷橛爝镢蹶觖",jun:"均菌钧军君峻俊竣浚郡骏捃狻皲筠麇",ka:"喀咖卡佧咔胩",ke:"咯坷苛柯棵磕颗科壳咳可渴克刻客课岢恪溘骒缂珂轲氪瞌钶疴窠蝌髁",kai:"开揩楷凯慨剀垲蒈忾恺铠锎",kan:"刊堪勘坎砍看侃凵莰莶戡龛瞰",kang:"康慷糠扛抗亢炕坑伉闶钪",kao:"考拷烤靠尻栲犒铐",ken:"肯啃垦恳垠裉颀",keng:"吭忐铿",kong:"空恐孔控倥崆箜",kou:"抠口扣寇芤蔻叩眍筘",ku:"枯哭窟苦酷库裤刳堀喾绔骷",kua:"夸垮挎跨胯侉",kuai:"块筷侩快蒯郐蒉狯脍",kuan:"宽款髋",kuang:"匡筐狂框矿眶旷况诓诳邝圹夼哐纩贶",kui:"亏盔岿窥葵奎魁傀馈愧溃馗匮夔隗揆喹喟悝愦阕逵暌睽聩蝰篑臾跬",kun:"坤昆捆困悃阃琨锟醌鲲髡",kuo:"括扩廓阔蛞",la:"垃拉喇蜡腊辣啦剌摺邋旯砬瘌",lai:"莱来赖崃徕涞濑赉睐铼癞籁",lan:"蓝婪栏拦篮阑兰澜谰揽览懒缆烂滥啉岚懔漤榄斓罱镧褴",lang:"琅榔狼廊郎朗浪莨蒗啷阆锒稂螂",lao:"捞劳牢老佬姥酪烙涝唠崂栳铑铹痨醪",le:"勒乐肋仂叻嘞泐鳓",lei:"雷镭蕾磊累儡垒擂类泪羸诔荽咧漯嫘缧檑耒酹",ling:"棱冷拎玲菱零龄铃伶羚凌灵陵岭领另令酃塄苓呤囹泠绫柃棂瓴聆蛉翎鲮",leng:"楞愣",li:"厘梨犁黎篱狸离漓理李里鲤礼莉荔吏栗丽厉励砾历利傈例俐痢立粒沥隶力璃哩俪俚郦坜苈莅蓠藜捩呖唳喱猁溧澧逦娌嫠骊缡珞枥栎轹戾砺詈罹锂鹂疠疬蛎蜊蠡笠篥粝醴跞雳鲡鳢黧",lian:"俩联莲连镰廉怜涟帘敛脸链恋炼练挛蔹奁潋濂娈琏楝殓臁膦裢蠊鲢",liang:"粮凉梁粱良两辆量晾亮谅墚椋踉靓魉",liao:"撩聊僚疗燎寥辽潦了撂镣廖料蓼尥嘹獠寮缭钌鹩耢",lie:"列裂烈劣猎冽埒洌趔躐鬣",lin:"琳林磷霖临邻鳞淋凛赁吝蔺嶙廪遴檩辚瞵粼躏麟",liu:"溜琉榴硫馏留刘瘤流柳六抡偻蒌泖浏遛骝绺旒熘锍镏鹨鎏",long:"龙聋咙笼窿隆垄拢陇弄垅茏泷珑栊胧砻癃",lou:"楼娄搂篓漏陋喽嵝镂瘘耧蝼髅",lu:"芦卢颅庐炉掳卤虏鲁麓碌露路赂鹿潞禄录陆戮垆摅撸噜泸渌漉璐栌橹轳辂辘氇胪镥鸬鹭簏舻鲈",lv:"驴吕铝侣旅履屡缕虑氯律率滤绿捋闾榈膂稆褛",luan:"峦孪滦卵乱栾鸾銮",lue:"掠略锊",lun:"轮伦仑沦纶论囵",luo:"萝螺罗逻锣箩骡裸落洛骆络倮荦摞猡泺椤脶镙瘰雒",ma:"妈麻玛码蚂马骂嘛吗唛犸嬷杩麽",mai:"埋买麦卖迈脉劢荬咪霾",man:"瞒馒蛮满蔓曼慢漫谩墁幔缦熳镘颟螨鳗鞔",mang:"芒茫盲忙莽邙漭朦硭蟒",meng:"氓萌蒙檬盟锰猛梦孟勐甍瞢懵礞虻蜢蠓艋艨黾",miao:"猫苗描瞄藐秒渺庙妙喵邈缈缪杪淼眇鹋蜱",mao:"茅锚毛矛铆卯茂冒帽貌贸侔袤勖茆峁瑁昴牦耄旄懋瞀蛑蝥蟊髦",me:"么",mei:"玫枚梅酶霉煤没眉媒镁每美昧寐妹媚坶莓嵋猸浼湄楣镅鹛袂魅",men:"门闷们扪玟焖懑钔",mi:"眯醚靡糜迷谜弥米秘觅泌蜜密幂芈冖谧蘼嘧猕獯汨宓弭脒敉糸縻麋",mian:"棉眠绵冕免勉娩缅面沔湎腼眄",mie:"蔑灭咩蠛篾",min:"民抿皿敏悯闽苠岷闵泯珉",ming:"明螟鸣铭名命冥茗溟暝瞑酩",miu:"谬",mo:"摸摹蘑模膜磨摩魔抹末莫墨默沫漠寞陌谟茉蓦馍嫫镆秣瘼耱蟆貊貘",mou:"谋牟某厶哞婺眸鍪",mu:"拇牡亩姆母墓暮幕募慕木目睦牧穆仫苜呒沐毪钼",na:"拿哪呐钠那娜纳内捺肭镎衲箬",nai:"氖乃奶耐奈鼐艿萘柰",nan:"南男难囊喃囡楠腩蝻赧",nao:"挠脑恼闹孬垴猱瑙硇铙蛲",ne:"淖呢讷",nei:"馁",nen:"嫩能枘恁",ni:"妮霓倪泥尼拟你匿腻逆溺伲坭猊怩滠昵旎祢慝睨铌鲵",nian:"蔫拈年碾撵捻念廿辇黏鲇鲶",niang:"娘酿",niao:"鸟尿茑嬲脲袅",nie:"捏聂孽啮镊镍涅乜陧蘖嗫肀颞臬蹑",nin:"您柠",ning:"狞凝宁拧泞佞蓥咛甯聍",niu:"牛扭钮纽狃忸妞蚴",nong:"脓浓农侬",nu:"奴努怒呶帑弩胬孥驽",nv:"女恧钕衄",nuan:"暖",nuenue:"虐",nue:"疟谑",nuo:"挪懦糯诺傩搦喏锘",ou:"哦欧鸥殴藕呕偶沤怄瓯耦",pa:"啪趴爬帕怕琶葩筢",pai:"拍排牌徘湃派俳蒎",pan:"攀潘盘磐盼畔判叛爿泮袢襻蟠蹒",pang:"乓庞旁耪胖滂逄",pao:"抛咆刨炮袍跑泡匏狍庖脬疱",pei:"呸胚培裴赔陪配佩沛掊辔帔淠旆锫醅霈",pen:"喷盆湓",peng:"砰抨烹澎彭蓬棚硼篷膨朋鹏捧碰坯堋嘭怦蟛",pi:"砒霹批披劈琵毗啤脾疲皮匹痞僻屁譬丕陴邳郫圮鼙擗噼庀媲纰枇甓睥罴铍痦癖疋蚍貔",pian:"篇偏片骗谝骈犏胼褊翩蹁",piao:"飘漂瓢票剽嘌嫖缥殍瞟螵",pie:"撇瞥丿苤氕",pin:"拼频贫品聘拚姘嫔榀牝颦",ping:"乒坪苹萍平凭瓶评屏俜娉枰鲆",po:"坡泼颇婆破魄迫粕叵鄱溥珀钋钷皤笸",pou:"剖裒踣",pu:"扑铺仆莆葡菩蒲埔朴圃普浦谱曝瀑匍噗濮璞氆镤镨蹼",qi:"期欺栖戚妻七凄漆柒沏其棋奇歧畦崎脐齐旗祈祁骑起岂乞企启契砌器气迄弃汽泣讫亟亓圻芑萋葺嘁屺岐汔淇骐绮琪琦杞桤槭欹祺憩碛蛴蜞綦綮趿蹊鳍麒",qia:"掐恰洽葜",qian:"牵扦钎铅千迁签仟谦乾黔钱钳前潜遣浅谴堑嵌欠歉佥阡芊芡荨掮岍悭慊骞搴褰缱椠肷愆钤虔箝",qiang:"枪呛腔羌墙蔷强抢嫱樯戗炝锖锵镪襁蜣羟跫跄",qiao:"橇锹敲悄桥瞧乔侨巧鞘撬翘峭俏窍劁诮谯荞愀憔缲樵毳硗跷鞒",qie:"切茄且怯窃郄唼惬妾挈锲箧",qin:"钦侵亲秦琴勤芹擒禽寝沁芩蓁蕲揿吣嗪噙溱檎螓衾",qing:"青轻氢倾卿清擎晴氰情顷请庆倩苘圊檠磬蜻罄箐謦鲭黥",qiong:"琼穷邛茕穹筇銎",qiu:"秋丘邱球求囚酋泅俅氽巯艽犰湫逑遒楸赇鸠虬蚯蝤裘糗鳅鼽",qu:"趋区蛆曲躯屈驱渠取娶龋趣去诎劬蕖蘧岖衢阒璩觑氍祛磲癯蛐蠼麴瞿黢",quan:"圈颧权醛泉全痊拳犬券劝诠荃獾悛绻辁畎铨蜷筌鬈",que:"缺炔瘸却鹊榷确雀阙悫",qun:"裙群逡",ran:"然燃冉染苒髯",rang:"瓤壤攘嚷让禳穰",rao:"饶扰绕荛娆桡",ruo:"惹若弱",re:"热偌",ren:"壬仁人忍韧任认刃妊纫仞荏葚饪轫稔衽",reng:"扔仍",ri:"日",rong:"戎茸蓉荣融熔溶容绒冗嵘狨缛榕蝾",rou:"揉柔肉糅蹂鞣",ru:"茹蠕儒孺如辱乳汝入褥蓐薷嚅洳溽濡铷襦颥",ruan:"软阮朊",rui:"蕊瑞锐芮蕤睿蚋",run:"闰润",sa:"撒洒萨卅仨挲飒",sai:"腮鳃塞赛噻",san:"三叁伞散彡馓氵毵糁霰",sang:"桑嗓丧搡磉颡",sao:"搔骚扫嫂埽臊瘙鳋",se:"瑟色涩啬铩铯穑",sen:"森",seng:"僧",sha:"莎砂杀刹沙纱傻啥煞脎歃痧裟霎鲨",shai:"筛晒酾",shan:"珊苫杉山删煽衫闪陕擅赡膳善汕扇缮剡讪鄯埏芟潸姗骟膻钐疝蟮舢跚鳝",shang:"墒伤商赏晌上尚裳垧绱殇熵觞",shao:"梢捎稍烧芍勺韶少哨邵绍劭苕潲蛸笤筲艄",she:"奢赊蛇舌舍赦摄射慑涉社设厍佘猞畲麝",shen:"砷申呻伸身深娠绅神沈审婶甚肾慎渗诜谂吲哂渖椹矧蜃",sheng:"声生甥牲升绳省盛剩胜圣丞渑媵眚笙",shi:"师失狮施湿诗尸虱十石拾时什食蚀实识史矢使屎驶始式示士世柿事拭誓逝势是嗜噬适仕侍释饰氏市恃室视试谥埘莳蓍弑唑饣轼耆贳炻礻铈铊螫舐筮豕鲥鲺",shou:"收手首守寿授售受瘦兽扌狩绶艏",shu:"蔬枢梳殊抒输叔舒淑疏书赎孰熟薯暑曙署蜀黍鼠属术述树束戍竖墅庶数漱恕倏塾菽忄沭涑澍姝纾毹腧殳镯秫鹬",shua:"刷耍唰涮",shuai:"摔衰甩帅蟀",shuan:"栓拴闩",shuang:"霜双爽孀",shui:"谁水睡税",shun:"吮瞬顺舜恂",shuo:"说硕朔烁蒴搠嗍濯妁槊铄",si:"斯撕嘶思私司丝死肆寺嗣四伺似饲巳厮俟兕菥咝汜泗澌姒驷缌祀祠锶鸶耜蛳笥",song:"松耸怂颂送宋讼诵凇菘崧嵩忪悚淞竦",sou:"搜艘擞嗽叟嗖嗾馊溲飕瞍锼螋",su:"苏酥俗素速粟僳塑溯宿诉肃夙谡蔌嗉愫簌觫稣",suan:"酸蒜算",sui:"虽隋随绥髓碎岁穗遂隧祟蓑冫谇濉邃燧眭睢",sun:"孙损笋荪狲飧榫跣隼",suo:"梭唆缩琐索锁所唢嗦娑桫睃羧",ta:"塌他它她塔獭挞蹋踏闼溻遢榻沓",tai:"胎苔抬台泰酞太态汰邰薹肽炱钛跆鲐",tan:"坍摊贪瘫滩坛檀痰潭谭谈坦毯袒碳探叹炭郯蕈昙钽锬覃",tang:"汤塘搪堂棠膛唐糖傥饧溏瑭铴镗耥螗螳羰醣",thang:"倘躺淌",theng:"趟烫",tao:"掏涛滔绦萄桃逃淘陶讨套挑鼗啕韬饕",te:"特",teng:"藤腾疼誊滕",ti:"梯剔踢锑提题蹄啼体替嚏惕涕剃屉荑悌逖绨缇鹈裼醍",tian:"天添填田甜恬舔腆掭忝阗殄畋钿蚺",tiao:"条迢眺跳佻祧铫窕龆鲦",tie:"贴铁帖萜餮",ting:"厅听烃汀廷停亭庭挺艇莛葶婷梃蜓霆",tong:"通桐酮瞳同铜彤童桶捅筒统痛佟僮仝茼嗵恸潼砼",tou:"偷投头透亠",tu:"凸秃突图徒途涂屠土吐兔堍荼菟钍酴",tuan:"湍团疃",tui:"推颓腿蜕褪退忒煺",tun:"吞屯臀饨暾豚窀",tuo:"拖托脱鸵陀驮驼椭妥拓唾乇佗坨庹沱柝砣箨舄跎鼍",wa:"挖哇蛙洼娃瓦袜佤娲腽",wai:"歪外",wan:"豌弯湾玩顽丸烷完碗挽晚皖惋宛婉万腕剜芄苋菀纨绾琬脘畹蜿箢",wang:"汪王亡枉网往旺望忘妄罔尢惘辋魍",wei:"威巍微危韦违桅围唯惟为潍维苇萎委伟伪尾纬未蔚味畏胃喂魏位渭谓尉慰卫倭偎诿隈葳薇帏帷崴嵬猥猬闱沩洧涠逶娓玮韪軎炜煨熨痿艉鲔",wen:"瘟温蚊文闻纹吻稳紊问刎愠阌汶璺韫殁雯",weng:"嗡翁瓮蓊蕹",wo:"挝蜗涡窝我斡卧握沃莴幄渥杌肟龌",wu:"巫呜钨乌污诬屋无芜梧吾吴毋武五捂午舞伍侮坞戊雾晤物勿务悟误兀仵阢邬圬芴庑怃忤浯寤迕妩骛牾焐鹉鹜蜈鋈鼯",xi:"昔熙析西硒矽晰嘻吸锡牺稀息希悉膝夕惜熄烯溪汐犀檄袭席习媳喜铣洗系隙戏细僖兮隰郗茜葸蓰奚唏徙饩阋浠淅屣嬉玺樨曦觋欷熹禊禧钸皙穸蜥蟋舾羲粞翕醯鼷",xia:"瞎虾匣霞辖暇峡侠狭下厦夏吓掀葭嗄狎遐瑕硖瘕罅黠",xian:"锨先仙鲜纤咸贤衔舷闲涎弦嫌显险现献县腺馅羡宪陷限线冼藓岘猃暹娴氙祆鹇痫蚬筅籼酰跹",xiang:"相厢镶香箱襄湘乡翔祥详想响享项巷橡像向象芗葙饷庠骧缃蟓鲞飨",xiao:"萧硝霄削哮嚣销消宵淆晓小孝校肖啸笑效哓咻崤潇逍骁绡枭枵筱箫魈",xie:"楔些歇蝎鞋协挟携邪斜胁谐写械卸蟹懈泄泻谢屑偕亵勰燮薤撷廨瀣邂绁缬榭榍歙躞",xin:"薪芯锌欣辛新忻心信衅囟馨莘歆铽鑫",xing:"星腥猩惺兴刑型形邢行醒幸杏性姓陉荇荥擤悻硎",xiong:"兄凶胸匈汹雄熊芎",xiu:"休修羞朽嗅锈秀袖绣莠岫馐庥鸺貅髹",xu:"墟戌需虚嘘须徐许蓄酗叙旭序畜恤絮婿绪续讴诩圩蓿怵洫溆顼栩煦砉盱胥糈醑",xuan:"轩喧宣悬旋玄选癣眩绚儇谖萱揎馔泫洵渲漩璇楦暄炫煊碹铉镟痃",xue:"靴薛学穴雪血噱泶鳕",xun:"勋熏循旬询寻驯巡殉汛训讯逊迅巽埙荀薰峋徇浔曛窨醺鲟",ya:"压押鸦鸭呀丫芽牙蚜崖衙涯雅哑亚讶伢揠吖岈迓娅琊桠氩砑睚痖",yan:"焉咽阉烟淹盐严研蜒岩延言颜阎炎沿奄掩眼衍演艳堰燕厌砚雁唁彦焰宴谚验厣靥赝俨偃兖讠谳郾鄢芫菸崦恹闫阏洇湮滟妍嫣琰晏胭腌焱罨筵酽魇餍鼹",yang:"殃央鸯秧杨扬佯疡羊洋阳氧仰痒养样漾徉怏泱炀烊恙蛘鞅",yao:"邀腰妖瑶摇尧遥窑谣姚咬舀药要耀夭爻吆崾徭瀹幺珧杳曜肴鹞窈繇鳐",ye:"椰噎耶爷野冶也页掖业叶曳腋夜液谒邺揶馀晔烨铘",yi:"一壹医揖铱依伊衣颐夷遗移仪胰疑沂宜姨彝椅蚁倚已乙矣以艺抑易邑屹亿役臆逸肄疫亦裔意毅忆义益溢诣议谊译异翼翌绎刈劓佾诒圪圯埸懿苡薏弈奕挹弋呓咦咿噫峄嶷猗饴怿怡悒漪迤驿缢殪贻旖熠钇镒镱痍瘗癔翊衤蜴舣羿翳酏黟",yin:"茵荫因殷音阴姻吟银淫寅饮尹引隐印胤鄞堙茚喑狺夤氤铟瘾蚓霪龈",ying:"英樱婴鹰应缨莹萤营荧蝇迎赢盈影颖硬映嬴郢茔莺萦撄嘤膺滢潆瀛瑛璎楹鹦瘿颍罂",yo:"哟唷",yong:"拥佣臃痈庸雍踊蛹咏泳涌永恿勇用俑壅墉慵邕镛甬鳙饔",you:"幽优悠忧尤由邮铀犹油游酉有友右佑釉诱又幼卣攸侑莸呦囿宥柚猷牖铕疣蝣鱿黝鼬",yu:"迂淤于盂榆虞愚舆余俞逾鱼愉渝渔隅予娱雨与屿禹宇语羽玉域芋郁吁遇喻峪御愈欲狱育誉浴寓裕预豫驭禺毓伛俣谀谕萸蓣揄喁圄圉嵛狳饫庾阈妪妤纡瑜昱觎腴欤於煜燠聿钰鹆瘐瘀窳蝓竽舁雩龉",yuan:"鸳渊冤元垣袁原援辕园员圆猿源缘远苑愿怨院塬沅媛瑗橼爰眢鸢螈鼋",yue:"曰约越跃钥岳粤月悦阅龠樾刖钺",yun:"耘云郧匀陨允运蕴酝晕韵孕郓芸狁恽纭殒昀氲",za:"匝砸杂拶咂",zai:"栽哉灾宰载再在咱崽甾",zan:"攒暂赞瓒昝簪糌趱錾",zang:"赃脏葬奘戕臧",zao:"遭糟凿藻枣早澡蚤躁噪造皂灶燥唣缫",ze:"责择则泽仄赜啧迮昃笮箦舴",zei:"贼",zen:"怎谮",zeng:"增憎曾赠缯甑罾锃",zha:"扎喳渣札轧铡闸眨栅榨咋乍炸诈揸吒咤哳怍砟痄蚱齄",zhai:"摘斋宅窄债寨砦",zhan:"瞻毡詹粘沾盏斩辗崭展蘸栈占战站湛绽谵搌旃",zhang:"樟章彰漳张掌涨杖丈帐账仗胀瘴障仉鄣幛嶂獐嫜璋蟑",zhao:"招昭找沼赵照罩兆肇召爪诏棹钊笊",zhe:"遮折哲蛰辙者锗蔗这浙谪陬柘辄磔鹧褚蜇赭",zhen:"珍斟真甄砧臻贞针侦枕疹诊震振镇阵缜桢榛轸赈胗朕祯畛鸩",zheng:"蒸挣睁征狰争怔整拯正政帧症郑证诤峥钲铮筝",zhi:"芝枝支吱蜘知肢脂汁之织职直植殖执值侄址指止趾只旨纸志挚掷至致置帜峙制智秩稚质炙痔滞治窒卮陟郅埴芷摭帙忮彘咫骘栉枳栀桎轵轾攴贽膣祉祗黹雉鸷痣蛭絷酯跖踬踯豸觯",zhong:"中盅忠钟衷终种肿重仲众冢锺螽舂舯踵",zhou:"舟周州洲诌粥轴肘帚咒皱宙昼骤啄着倜诹荮鬻纣胄碡籀舳酎鲷",zhu:"珠株蛛朱猪诸诛逐竹烛煮拄瞩嘱主著柱助蛀贮铸筑住注祝驻伫侏邾苎茱洙渚潴驺杼槠橥炷铢疰瘃蚰竺箸翥躅麈",zhua:"抓",zhuai:"拽",zhuan:"专砖转撰赚篆抟啭颛",zhuang:"桩庄装妆撞壮状丬",zhui:"椎锥追赘坠缀萑骓缒",zhun:"谆准",zhuo:"捉拙卓桌琢茁酌灼浊倬诼廴蕞擢啜浞涿杓焯禚斫",zi:"兹咨资姿滋淄孜紫仔籽滓子自渍字谘嵫姊孳缁梓辎赀恣眦锱秭耔笫粢觜訾鲻髭",zong:"鬃棕踪宗综总纵腙粽",zou:"邹走奏揍鄹鲰",zu:"租足卒族祖诅阻组俎菹啐徂驵蹴",zuan:"钻纂攥缵",zui:"嘴醉最罪",zun:"尊遵撙樽鳟",zuo:"昨左佐柞做作坐座阝阼胙祚酢",cou:"薮楱辏腠",nang:"攮哝囔馕曩",o:"喔",dia:"嗲",chuai:"嘬膪踹",cen:"岑涔",diu:"铥",nou:"耨",fou:"缶",bia:"髟"}}n.getIns=function(){return new n};var a=n.prototype;return a.convertPinyin=function(n){for(var a=n.length,i="",u=new RegExp("[a-zA-Z0-9- ]"),e=0;e<a;e++){var g=n.substr(e,1),o=this.arraySearch(g);u.test(g)?i+=g:!1!==o&&(i+=o)}for(i=i.replace(/ /g,"-");i.indexOf("--")>0;)i=i.replace("--","-");return i},a.arraySearch=function(n){for(var a in this.PinYin)if(-1!=this.PinYin[a].indexOf(n))return a;return!1},n}());a._RF.pop()}}}));

System.register("chunks:///_virtual/recastJsPlugin.ts",["cc"],(function(e){"use strict";var t,i,n,s,a,r,o,h;return{setters:[function(e){t=e.cclegacy,i=e.math,n=e.v3,s=e.Vec3,a=e.Node,r=e.utils,o=e.MeshRenderer,h=e.error}],execute:function(){t._RF.push({},"6984aEOozhKZruJ/H3lUWdF","recastJsPlugin",void 0);var c=e("RecastConfig",{RATIO:1}),u=(e("RecastJSPlugin",function(){function e(e,t){var i=this;if(void 0===t&&(t=Recast),this.bjsRECAST={},this.name="RecastJSPlugin",this._maximumSubStepCount=10,this._timeStep=1/60,"function"==typeof t)(new t).then((function(t){i.bjsRECAST=t,i.isSupported()?(i._tempVec1=new i.bjsRECAST.Vec3,i._tempVec2=new i.bjsRECAST.Vec3,e()):h("RecastJS is not available. Please make sure you included the js file.")}));else{if(this.bjsRECAST=t,!this.isSupported())return void h("RecastJS is not available. Please make sure you included the js file.");this._tempVec1=new this.bjsRECAST.Vec3,this._tempVec2=new this.bjsRECAST.Vec3,e()}this.setTimeStep()}var t=e.prototype;return t.setTimeStep=function(e){void 0===e&&(e=1/60),this._timeStep=e},t.getTimeStep=function(){return this._timeStep},t.setMaximumSubStepCount=function(e){void 0===e&&(e=10),this._maximumSubStepCount=e},t.getMaximumSubStepCount=function(){return this._maximumSubStepCount},t.createNavMesh=function(t,i){var n=new this.bjsRECAST.rcConfig;n.cs=i.cs,n.ch=i.ch,n.borderSize=i.borderSize?i.borderSize:0,n.tileSize=i.tileSize?i.tileSize:0,n.walkableSlopeAngle=i.walkableSlopeAngle,n.walkableHeight=i.walkableHeight,n.walkableClimb=i.walkableClimb,n.walkableRadius=i.walkableRadius,n.maxEdgeLen=i.maxEdgeLen,n.maxSimplificationError=i.maxSimplificationError,n.minRegionArea=i.minRegionArea,n.mergeRegionArea=i.mergeRegionArea,n.maxVertsPerPoly=i.maxVertsPerPoly,n.detailSampleDist=i.detailSampleDist,n.detailSampleMaxError=i.detailSampleMaxError;this.navMesh=new this.bjsRECAST.NavMesh;var s=e.getMeshData(t),a=s.vertexTypeArray,r=s.startId,o=s.facesTypeArray;this.navMesh.build(a,r,o,o.length,n,null)},e.getMeshData=function(e){for(var t=e,a=[],r=[],o=new i.Mat4,h=n(),u=[],g=0,p=0;p<t.length;++p){var l=t[p].model;if(l){t[p].node.getWorldMatrix(o);for(var m=l.subModels,d=1/c.RATIO,f=0;f<m.length;f++){u.push(g);var v=m[f].subMesh.geometricInfo;if(v&&v.positions&&v.indices){for(var y=[],x=v.positions.length/3,A=0;A<x;++A)s.transformMat4(h,n(v.positions[3*A],v.positions[3*A+1],v.positions[3*A+2]),o),y.push(h.x*d,h.y*d,h.z*d);a.push(y),g+=y.length/3,r.push(v.indices),v.positions.length,v.indices.length}}}}var C=[],S=[];g=0;for(var R=0,b=0;b<a.length;++b){for(var V=3*g;V<a[b].length+3*g;++V)C[V]=a[b][V-3*g];for(var _=r[b],z=0;z<_.length;++z)S[R++]=g+_[z];g+=a[b].length/3}return{vertexTypeArray:C,startId:g,facesTypeArray:S,group:u}},e.exportObj=function(e){for(var t=[],i=this.getMeshData(e),n=i.vertexTypeArray,s=i.facesTypeArray,a=i.group,r=0;r<n.length;r+=3)t.push("v "+n[r]+" "+n[r+1]+" "+n[r+2]);for(var o=0;o<s.length;o+=3)-1!==a.indexOf(o/3)&&t.push("g Cube"+a.indexOf(o/2)),t.push("f "+(s[o]+1)+" "+(s[o+1]+1)+" "+(s[o+2]+1));return t.join("\n")},t.createDebugNavMesh=function(t){var i,n,s=this.navMesh.getDebugNavMesh(),a=s.getTriangleCount(),r=[],o=[];for(i=0;i<3*a;i++)r.push(i);for(i=0;i<a;i++)for(n=0;n<3;n++){var h=s.getTriangle(i).getPoint(n);o.push(h.x,h.y,h.z)}return e.createMeshRenderer(t,o,r)},t.getDebugPos=function(){var e,t,i=this.navMesh.getDebugNavMesh(),n=i.getTriangleCount(),s=[];for(e=0;e<3*n;e++);for(e=0;e<n;e++)for(t=0;t<3;t++){var a=i.getTriangle(e).getPoint(t);s.push(a.x,a.y,a.z)}return s},e.createMeshRenderer=function(e,t,h){var c=new a;e.addChild(c);var u=new i.Mat4;i.Mat4.invert(u,c.getWorldMatrix(u));for(var g=n(),p=0;p<t.length;p+=3)g.x=t[p],g.y=t[p+1],g.z=t[p+2],s.transformMat4(g,g,u),t[p]=g.x,t[p+1]=g.y,t[p+2]=g.z;var l=r.createMesh({positions:t,indices:h,doubleSided:!0});return c.addComponent(o).mesh=l,c},t.getClosestPoint=function(e){this._tempVec1.x=e.x,this._tempVec1.y=e.y,this._tempVec1.z=e.z;var t=this.navMesh.getClosestPoint(this._tempVec1);return new s(t.x,t.y,t.z)},t.getClosestPointToRef=function(e,t){this._tempVec1.x=e.x,this._tempVec1.y=e.y,this._tempVec1.z=e.z;var i=this.navMesh.getClosestPoint(this._tempVec1);t.set(i.x,i.y,i.z)},t.getRandomPointAround=function(e,t){this._tempVec1.x=e.x,this._tempVec1.y=e.y,this._tempVec1.z=e.z;var i=this.navMesh.getRandomPointAround(this._tempVec1,t);return new s(i.x,i.y,i.z)},t.getRandomPointAroundToRef=function(e,t,i){this._tempVec1.x=e.x,this._tempVec1.y=e.y,this._tempVec1.z=e.z;var n=this.navMesh.getRandomPointAround(this._tempVec1,t);i.set(n.x,n.y,n.z)},t.moveAlong=function(e,t){this._tempVec1.x=e.x,this._tempVec1.y=e.y,this._tempVec1.z=e.z,this._tempVec2.x=t.x,this._tempVec2.y=t.y,this._tempVec2.z=t.z;var i=this.navMesh.moveAlong(this._tempVec1,this._tempVec2);return new s(i.x,i.y,i.z)},t.moveAlongToRef=function(e,t,i){this._tempVec1.x=e.x,this._tempVec1.y=e.y,this._tempVec1.z=e.z,this._tempVec2.x=t.x,this._tempVec2.y=t.y,this._tempVec2.z=t.z;var n=this.navMesh.moveAlong(this._tempVec1,this._tempVec2);i.set(n.x,n.y,n.z)},t.computePath=function(e,t){var i;this._tempVec1.x=e.x,this._tempVec1.y=e.y,this._tempVec1.z=e.z,this._tempVec2.x=t.x,this._tempVec2.y=t.y,this._tempVec2.z=t.z;var n=this.navMesh.computePath(this._tempVec1,this._tempVec2),a=n.getPointCount(),r=[];for(i=0;i<a;i++){var o=n.getPoint(i);r.push(new s(o.x,o.y,o.z))}return r},t.createCrowd=function(e,t,i){return new u(this,e,t,i)},t.setDefaultQueryExtent=function(e){this._tempVec1.x=e.x,this._tempVec1.y=e.y,this._tempVec1.z=e.z,this.navMesh.setDefaultQueryExtent(this._tempVec1)},t.getDefaultQueryExtent=function(){var e=this.navMesh.getDefaultQueryExtent();return new s(e.x,e.y,e.z)},t.buildFromNavmeshData=function(e){var t=e.length*e.BYTES_PER_ELEMENT,i=this.bjsRECAST._malloc(t),n=new Uint8Array(this.bjsRECAST.HEAPU8.buffer,i,t);n.set(e);var s=new this.bjsRECAST.NavmeshData;s.dataPointer=n.byteOffset,s.size=e.length,this.navMesh=new this.bjsRECAST.NavMesh,this.navMesh.buildFromNavmeshData(s),this.bjsRECAST._free(n.byteOffset)},t.getNavmeshData=function(){var e=this.navMesh.getNavmeshData(),t=new Uint8Array(this.bjsRECAST.HEAPU8.buffer,e.dataPointer,e.size),i=new Uint8Array(e.size);return i.set(t),this.navMesh.freeNavmeshData(e),i},t.getDefaultQueryExtentToRef=function(e){var t=this.navMesh.getDefaultQueryExtent();e.set(t.x,t.y,t.z)},t.dispose=function(){},t.addCylinderObstacle=function(e,t,i){return this._tempVec1.x=e.x,this._tempVec1.y=e.y,this._tempVec1.z=e.z,this.navMesh.addCylinderObstacle(this._tempVec1,t,i)},t.addBoxObstacle=function(e,t,i){return this._tempVec1.x=e.x,this._tempVec1.y=e.y,this._tempVec1.z=e.z,this._tempVec2.x=t.x,this._tempVec2.y=t.y,this._tempVec2.z=t.z,this.navMesh.addBoxObstacle(this._tempVec1,this._tempVec2,i)},t.removeObstacle=function(e){this.navMesh.removeObstacle(e)},t.isSupported=function(){return void 0!==this.bjsRECAST},e}()),e("RecastJSCrowd",function(){function e(e,t,i,n){this.recastCrowd={},this.agents=new Array,this.bjsRECASTPlugin=e,this.recastCrowd=new this.bjsRECASTPlugin.bjsRECAST.Crowd(t,i,this.bjsRECASTPlugin.navMesh.getNavMesh()),this._scene=n}var t=e.prototype;return t.addAgent=function(e,t){var i=new this.bjsRECASTPlugin.bjsRECAST.dtCrowdAgentParams;i.radius=t.radius,i.height=t.height,i.maxAcceleration=t.maxAcceleration,i.maxSpeed=t.maxSpeed,i.collisionQueryRange=t.collisionQueryRange,i.pathOptimizationRange=t.pathOptimizationRange,i.separationWeight=t.separationWeight,i.updateFlags=7,i.obstacleAvoidanceType=0,i.queryFilterType=0,i.userData=0;var n=this.recastCrowd.addAgent(new this.bjsRECASTPlugin.bjsRECAST.Vec3(e.x,e.y,e.z),i);return this.agents.push(n),n},t.getAgentPosition=function(t){var i=this.recastCrowd.getAgentPosition(t);return e.getWorldPosition(i)},e.getWorldPosition=function(e){return new s(e.x*c.RATIO,e.y*c.RATIO,e.z*c.RATIO)},t.getAgentPositionToRef=function(e,t){var i=this.recastCrowd.getAgentPosition(e);t.set(i.x,i.y,i.z)},t.getAgentVelocity=function(e){var t=this.recastCrowd.getAgentVelocity(e);return new s(t.x,t.y,t.z)},t.getAgentVelocityToRef=function(e,t){var i=this.recastCrowd.getAgentVelocity(e);t.set(i.x,i.y,i.z)},t.getAgentNextTargetPath=function(e){var t=this.recastCrowd.getAgentNextTargetPath(e);return new s(t.x,t.y,t.z)},t.getAgentNextTargetPathToRef=function(e,t){var i=this.recastCrowd.getAgentNextTargetPath(e);t.set(i.x,i.y,i.z)},t.getAgentState=function(e){return this.recastCrowd.getAgentState(e)},t.overOffmeshConnection=function(e){return this.recastCrowd.overOffmeshConnection(e)},t.agentGoto=function(e,t){this.recastCrowd.agentGoto(e,new this.bjsRECASTPlugin.bjsRECAST.Vec3(t.x,t.y,t.z))},t.agentStop=function(e){this.recastCrowd.agentStop(e)},t.agentTeleport=function(e,t){this.recastCrowd.agentTeleport(e,new this.bjsRECASTPlugin.bjsRECAST.Vec3(t.x,t.y,t.z))},t.updateAgentParameters=function(e,t){var i=this.recastCrowd.getAgentParameters(e);void 0!==t.radius&&(i.radius=t.radius),void 0!==t.height&&(i.height=t.height),void 0!==t.maxAcceleration&&(i.maxAcceleration=t.maxAcceleration),void 0!==t.maxSpeed&&(i.maxSpeed=t.maxSpeed),void 0!==t.collisionQueryRange&&(i.collisionQueryRange=t.collisionQueryRange),void 0!==t.pathOptimizationRange&&(i.pathOptimizationRange=t.pathOptimizationRange),void 0!==t.separationWeight&&(i.separationWeight=t.separationWeight),this.recastCrowd.setAgentParameters(e,i)},t.removeAgent=function(e){this.recastCrowd.removeAgent(e);var t=this.agents.indexOf(e);t>-1&&this.agents.splice(t,1)},t.getAgents=function(){return this.agents},t.update=function(e){this.bjsRECASTPlugin.navMesh.update();var t=this.bjsRECASTPlugin.getTimeStep(),i=this.bjsRECASTPlugin.getMaximumSubStepCount();if(t<=.1)this.recastCrowd.update(e);else{var n=Math.floor(e/t);i&&n>i&&(n=i),n<1&&(n=1);for(var s=e/n,a=0;a<n;a++)this.recastCrowd.update(s)}},t.setDefaultQueryExtent=function(e){var t=new this.bjsRECASTPlugin.bjsRECAST.Vec3(e.x,e.y,e.z);this.recastCrowd.setDefaultQueryExtent(t)},t.getDefaultQueryExtent=function(){var e=this.recastCrowd.getDefaultQueryExtent();return new s(e.x,e.y,e.z)},t.getDefaultQueryExtentToRef=function(e){var t=this.recastCrowd.getDefaultQueryExtent();e.set(t.x,t.y,t.z)},t.getCorners=function(e){var t,i=this.recastCrowd.getPath(e),n=i.getPointCount(),a=[];for(t=0;t<n;t++){var r=i.getPoint(t);a.push(new s(r.x,r.y,r.z))}return a},t.dispose=function(){this.recastCrowd.destroy()},e}()));t._RF.pop()}}}));

System.register("chunks:///_virtual/RenderHelper.ts",["./rollupPluginModLoBabelHelpers.js","cc","./DataControler.ts","./GameHelper.ts"],(function(e){"use strict";var n,t,r,a,i,s,o,d,h,m,g,l;return{setters:[function(e){n=e.createForOfIteratorHelperLoose},function(e){t=e.cclegacy,r=e._decorator,a=e.find,i=e.instantiate,s=e.v3,o=e.MeshRenderer,d=e.Vec4},function(e){h=e.EntityType,m=e.OrderType,g=e.ArmyType},function(e){l=e.default}],execute:function(){var u;t._RF.push({},"bf33b/szHlGjKq8jA9qqxb0","RenderHelper",void 0);var y=r.ccclass;r.property,e("RenderHelper",y("RenderHelper")(u=function(){function e(){}return e.init=function(){e.frameCountMap=new Map,e.businessCountMap=new Map,e.armyCountMap=new Map,e.armyInRiverMap=new Map},e.renderCity=function(e){var t=e.gc,r=e.entity;if(r.type==h.city){var i=Math.round(r.shouyi*t.dc.bds.get(r.name).size/5)+3;if(i>30&&(i=30),this.frameCountMap.has(r.name)){if(this.frameCountMap.get(r.name)!=i){for(var s,o=a("Farmlands").children,d=n(o);!(s=d()).done;){var m=s.value;m.name==r.name+"农田"&&m.destroy()}this.frameCountMap.set(r.name,i),this.renderFarmland(i,[],2,t,r)}}else this.frameCountMap.set(r.name,i),this.renderFarmland(i,[],2,t,r)}if(r.type==h.city){var g=Math.round(r.shuishou*t.dc.bds.get(r.name).size/5)+3;this.businessCountMap.has(r.name)?this.businessCountMap.get(r.name)!=g&&this.businessCountMap.set(r.name,g):this.businessCountMap.set(r.name,g),r.hasBusiness||t.dc.bds.get(r.name).size>2?e.node.getChildByName("Shop").active=!0:e.node.getChildByName("Shop").active=!1}if(r.type==h.city){var l=Math.round((r.getBili()+r.getShangyuan())/500);l>25&&(l=25);for(var u=0;u<25;u++){var y=e.node.getChildByName("Armys").getChildByName("Cube"+u);y.active=!(u>l)}}},e.renderGate=function(e){e.entity,e.gc},e.renderPort=function(e){e.entity,e.gc},e.renderArmy=function(e){e.gc;var t=e.entity;if(e.next){for(var r,a=null,i=n(e.node.getChildByName("Center").children);!(r=i()).done;){var s=r.value;s.active&&"ZhangPeng"!=s.name&&(l.lookat(s,e.next),a=s)}for(var o,d=n(e.node.getChildByName("Around").children);!(o=d()).done;){var h=o.value;h.active&&"ZhangPeng"!=h.name&&a&&(h.rotation=a.rotation)}}var u=0;u=t.troops<500?0:t.troops<2e3?500:t.troops<5e3?2e3:t.troops<1e4?5e3:t.troops<2e4?1e4:t.troops<5e4?2e4:5e4;var y=1;t.isInRiver?y=4:0==e.isMoving&&0==t.isInWar&&t.orderType==m.stay?y=3:t.armyType==g.qb&&(y=2),u==e.lastArmyCount&&y==e.lastArmyType||(e.lastArmyCount=u,e.lastArmyType=y,this.renderArmyAround(e.node,t.troops,y),this.renderArmyCenter(e.node.getChildByName("Center"),y,t))},e.renderArmyAround=function(e,t,r){for(var a,i=e.getChildByName("Center").getChildByName("ShiBing"),s=e.getChildByName("Center").getChildByName("QiBing"),o=e.getChildByName("Center").getChildByName("Boat"),d=e.getChildByName("Center").getChildByName("ZhangPeng"),h=e.getChildByName("Around"),m=n(h.children);!(a=m()).done;){a.value.active=!1}1==r?t<500?this.renderItem(h,i,3,"ShiBing",.12):t<2e3?this.renderItem(h,i,4,"ShiBing",.12):t<5e3?this.renderItem(h,i,5,"ShiBing",.12):t<1e4?this.renderItem(h,i,6,"ShiBing",.12):t<2e4?this.renderItem(h,i,7,"ShiBing",.12):t<5e4?this.renderItem(h,i,8,"ShiBing",.12):this.renderItem(h,i,9,"ShiBing",.12):2==r?t<2e3?this.renderItem(h,s,3,"QiBing",.15):t<5e3?this.renderItem(h,s,4,"QiBing",.15):t<1e4?this.renderItem(h,s,5,"QiBing",.15):t<2e4?this.renderItem(h,s,6,"QiBing",.15):this.renderItem(h,s,7,"QiBing",.15):3==r?t<2e3?this.renderItem(h,d,3,"ZhangPeng",.15):t<5e3?this.renderItem(h,d,4,"ZhangPeng",.15):t<1e4?this.renderItem(h,d,5,"ZhangPeng",.15):t<2e4?this.renderItem(h,d,6,"ZhangPeng",.15):this.renderItem(h,d,7,"ZhangPeng",.15):4==r&&(t<5e3?this.renderItem(h,o,0,"Boat",.25):t<1e4?this.renderItem(h,o,3,"Boat",.25):t<2e4?this.renderItem(h,o,4,"Boat",.25):this.renderItem(h,o,5,"Boat",.25))},e.renderItem=function(e,n,t,r,a){void 0===a&&(a=1),a*=2;for(var o=0;o<t;o++)for(var d=0;d<t;d++)if((3!=t||1!=o||1!=d)&&(5!=t||2!=o||2!=d)&&(7!=t||3!=o||3!=d)&&(4!=t||1!=o&&2!=o||1!=d&&2!=d)&&(6!=t||3!=o&&2!=o||3!=d&&2!=d)&&(8!=t||3!=o&&4!=o||3!=d&&4!=d)){var h=null;e.getChildByName(r+o+d)?h=e.getChildByName(r+o+d):((h=i(n)).name=r+o+d,h.parent=e),h.position=s(o*a-(t-1)*a/2,.1,d*a-(t-1)*a/2),h.active=!0,h.scale=s(1,1,1),"QiBing"==r?(h.getChildByName("Cube").scale=s(.05,.05,.05),h.position=s(o*a-(t-1)*a/2,.2,d*a-(t-1)*a/2)):"Boat"==r?h.getChildByName("Cube").scale=s(20,20,20):"ZhangPeng"==r?h.getChildByName("Cube").scale=s(.1,.1,.1):(h.getChildByName("Cube").scale=s(1,1,1),h.position=s(o*a-(t-1)*a/2,.2,d*a-(t-1)*a/2))}},e.renderArmyCenter=function(e,t,r){for(var a,i=n(e.children);!(a=i()).done;){a.value.active=!1}var s="ShiBing";1==t?s=r.armyType==g.gb?"Tower":"QiBing":2==t?s="QiBing":3==t?s="ZhangPeng":4==t&&(s="Boat"),e.getChildByName(s).active=!0},e.renderFarmland=function(e,n,t,r,a){if(a.type==h.city&&!r.dc.bds.get(a.name).isManzu){for(var i=r.arr,s=r.dc.bds.get(a.name).pos,o=s[0],d=s[1],m=0;m<2*t;m++){var g=o-t,l=d-m+t-1;if(g>=0&&l>=0&&g<100&&l<100)0==i[g][l]&&e>0&&(n.push([g,l]),e--);var u=o+t,y=d+m-t+1;if(u>=0&&y>=0&&u<100&&y<100)0==i[u][y]&&e>0&&(n.push([u,y]),e--);var c=o+m-t+1,p=d-t;if(c>=0&&p>=0&&c<100&&p<100)0==i[c][p]&&e>0&&(n.push([c,p]),e--);var C=o-m+t-1,v=d+t;if(C>=0&&v>=0&&C<100&&v<100)0==i[C][v]&&e>0&&(n.push([C,v]),e--)}e>0?this.renderFarmland(e,n,t+1,r,a):this.addFarmland(n,a)}},e.addFarmland=function(e,n){for(var t=l.prefabs.get("Farmland"),r=0;r<e.length;r++){var h=i(t),m=s(e[r][0]-50,.01,50-e[r][1]);h.getComponent(o).materials[0].setProperty("mainColor",new d(1,.7,0,1)),h.name=n.name+"农田",a("Farmlands").addChild(h),h.position=m}},e}())||u);t._RF.pop()}}}));

System.register("chunks:///_virtual/SelectArmyPannelController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SelectPosPannelController.ts","./DataControler.ts","./EntityHelper.ts","./GameController.ts","./BasePannelController.ts","./SelectEntityPannelController.ts"],(function(t){"use strict";var o,e,n,i,s,r,a,h,l,g,C,u,d,m,y,c;return{setters:[function(t){o=t.inheritsLoose},function(t){e=t.cclegacy,n=t._decorator,i=t.find,s=t.Label,r=t.Node,a=t.Toggle,h=t.log},function(t){l=t.SelectPosPannelController},function(t){g=t.TypeGeter,C=t.ArmyType,u=t.OrderType},function(t){d=t.EH},function(t){m=t.GameController},function(t){y=t.BasePannelController},function(t){c=t.SelectEntityPannelController}],execute:function(){var b;e._RF.push({},"d0a193veX5KUJlB76XpF002","SelectArmyPannelController",void 0);var p=n.ccclass;n.property,t("SelectArmyPannelController",p("SelectArmyPannelController")(b=function(t){function e(){for(var o,e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return(o=t.call.apply(t,[this].concat(n))||this).armyType=C.bb,o.armyCount=0,o.foodCount=0,o.order=null,o.maxBubingCount=0,o.maxShuibingCount=0,o.maxQibingCount=0,o.maxGongbingCount=0,o.maxfoodCount=0,o}o(e,t);var n=e.prototype;return n.start=function(){var t=this;i("Canvas/SelectArmyPannel/Pannel/ToggleGroup/Label1").getComponent(s).string=g.getArmyType(C.bb),i("Canvas/SelectArmyPannel/Pannel/ToggleGroup/Label2").getComponent(s).string=g.getArmyType(C.qb),i("Canvas/SelectArmyPannel/Pannel/ToggleGroup/Label3").getComponent(s).string=g.getArmyType(C.sb),i("Canvas/SelectArmyPannel/Pannel/ToggleGroup/Label4").getComponent(s).string=g.getArmyType(C.gb),this.pannel=this.node.getChildByName("SelectArmyPannel"),this.toggleContainer=this.node.getChildByName("SelectArmyPannel").getChildByName("Pannel").getChildByName("ToggleGroup"),this.gc=m.getInstance(),this.pannel.getChildByName("Pannel").getChildByName("Cancel").on(r.EventType.TOUCH_END,(function(){t.hideFrame(t.pannel,t.pannel.getChildByName("Pannel"))}),this)},n.showSelectArmyPannel=function(t){this.order=t,this.armyType=C.bb,this.armyCount=0,this.foodCount=0;var o=this.gc.entities.get(this.order.homeId);this.maxfoodCount=o.food,this.maxBubingCount=o.bubing,this.maxGongbingCount=o.gongbing,this.maxQibingCount=o.qibing,this.maxShuibingCount=o.shuibing,this.showFrame(this.pannel,this.pannel.getChildByName("Pannel"),!0,!1),this.label=this.pannel.getChildByName("Pannel").getChildByName("Numbers").getChildByName("Label").getComponent(s),this.foodLabel=this.pannel.getChildByName("Pannel").getChildByName("Foods").getChildByName("Label").getComponent(s),this.label.string="人数："+this.armyCount,this.foodLabel.string="粮草："+this.foodCount,this.pannel.getChildByName("Pannel").getChildByName("Numbers").active=!0,this.pannel.getChildByName("Pannel").getChildByName("Foods").active=!0;var e=this.toggleContainer.getChildByName("Toggle1"),n=this.toggleContainer.getChildByName("Toggle2"),i=this.toggleContainer.getChildByName("Toggle3"),r=this.toggleContainer.getChildByName("Toggle4");e.getComponent(a).isChecked=!0,n.getComponent(a).isChecked=!1,i.getComponent(a).isChecked=!1,r.getComponent(a).isChecked=!1,e.on("toggle",this.toggleCallback.bind(this,C.bb),this),n.on("toggle",this.toggleCallback.bind(this,C.qb),this),i.on("toggle",this.toggleCallback.bind(this,C.sb),this),r.on("toggle",this.toggleCallback.bind(this,C.gb),this)},n.toggleCallback=function(t){this.armyType=t,this.armyCount=0,this.label.string="人数："+this.armyCount},n.ok=function(){this.order.troops=this.armyCount,this.order.food=this.foodCount,this.order.armyType=this.armyType,this.order.food<=this.maxfoodCount&&this.order.food>=100?this.order.armyType==C.bb&&this.order.troops<=this.maxBubingCount||this.order.armyType==C.sb&&this.order.troops<=this.maxShuibingCount||this.order.armyType==C.qb&&this.order.troops<=this.maxQibingCount||this.order.armyType==C.gb&&this.order.troops<=this.maxGongbingCount?this.order.troops<500&&(this.order.orderType==u.attack||this.order.orderType==u.stay)?(this.toast("该兵种调遣数量太少"),h("----该兵种调遣数量太少---order----",this.order)):d.getArmyLimitByTs(this.order.peoples)>=this.order.troops?(this.order.orderType==u.stay?this.node.getComponent(l).showSelectPosPannel(this.order):this.node.getComponent(c).showSelectEntityPannel(this.order),this.pannel.active=!1):this.toast("主公不妥!所选武将能力有限,无法统帅这么多部队"):(this.toast("士兵数量错误"),h("----士兵数量错误---order----",this.order)):(this.toast("粮食数量错误"),h("----粮食数量错误---"+this.maxfoodCount+"---order----",this.order))},n.add=function(){this.armyCount<this.getMaxArmyCount()-100?this.armyCount+=100:this.armyCount=this.getMaxArmyCount(),this.label.string="人数："+this.armyCount},n.cut=function(){this.armyCount>100?this.armyCount-=100:this.armyCount=0,this.label.string="人数："+this.armyCount},n.addFood=function(){this.foodCount<this.maxfoodCount-100?this.foodCount+=100:this.foodCount=this.maxfoodCount,this.foodLabel.string="粮草："+this.foodCount},n.cutFood=function(){this.foodCount>100?this.foodCount-=100:this.foodCount=0,this.foodLabel.string="粮草："+this.foodCount},n.add2=function(){this.armyCount<this.getMaxArmyCount()-1e3?this.armyCount+=1e3:this.armyCount=this.getMaxArmyCount(),this.label.string="人数："+this.armyCount},n.cut2=function(){this.armyCount>1e3?this.armyCount-=1e3:this.armyCount=0,this.label.string="人数："+this.armyCount},n.addFood2=function(){this.foodCount<this.maxfoodCount-1e3?this.foodCount+=1e3:this.foodCount=this.maxfoodCount,this.foodLabel.string="粮草："+this.foodCount},n.cutFood2=function(){this.foodCount>1e3?this.foodCount-=1e3:this.foodCount=0,this.foodLabel.string="粮草："+this.foodCount},n.getMaxArmyCount=function(){switch(this.armyType){case C.bb:return this.maxBubingCount;case C.sb:return this.maxShuibingCount;case C.qb:return this.maxQibingCount;case C.gb:return this.maxGongbingCount}},e}(y))||b);e._RF.pop()}}}));

System.register("chunks:///_virtual/SelectEntityPannelController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BuyAndSellPannelController.ts","./DataControler.ts","./EventBus.ts","./GameHelper.ts","./EntityHelper.ts","./GameController.ts","./BasePannelController.ts","./SelectOrderPannelController.ts","./AStarRoadSeeker.ts","./SelectPeoplePannelController.ts","./EntityIconController.ts"],(function(e){"use strict";var t,i,n,r,o,s,l,a,d,h,c,y,g,p,u,m,f,C,v,b,T,I,E;return{setters:[function(e){t=e.inheritsLoose},function(e){i=e.cclegacy,n=e._decorator,r=e.find,o=e.instantiate,s=e.v3,l=e.MeshRenderer,a=e.Vec4,d=e.Label,h=e.Node},function(e){c=e.BuyAndSellPannelController},function(e){y=e.OrderType,g=e.EntityType},function(e){p=e.EventBus,u=e.EventType},function(e){m=e.default},function(e){f=e.EH},function(e){C=e.GameController},function(e){v=e.BasePannelController},function(e){b=e.SelectOrderPannelController},function(e){T=e.default},function(e){I=e.SelectPeoplePannelController},function(e){E=e.EntityIconController}],execute:function(){var P;i._RF.push({},"112efbsavxHt4x/S3z8KvCo","SelectEntityPannelController",void 0);var S=n.ccclass;n.property,e("SelectEntityPannelController",S("SelectEntityPannelController")(P=function(e){function i(){for(var t,i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return(t=e.call.apply(e,[this].concat(n))||this).entity=null,t.order=null,t}t(i,e);var n=i.prototype;return n.start=function(){this.gc=C.getInstance()},n.callback=function(e,t){this.pannel.getChildByName("Ok").active=!1,r("SelectPath").removeAllChildren();var i=this.gc.entities.get(e.str);if(this.order.orderType==y.attack){if(i.name==this.order.id)return void(this.label.string="出征目标不可以是自己");f.checkIsTwoEntityFrineds(i,f.getEntityByName(this.order.id))&&this.toast("主公,我方和此势力已缔结停战协议,开战会失信于天下");var n=f.getKingdomIdByEntityName(this.order.id);if(m.checKIsArrayContainsItem(i.name,this.gc.kingdoms.get(n).entities))return void(this.label.string="出征目标不可以是己方实体")}else if(this.order.orderType==y.join||this.order.orderType==y.yidong){if(i.name==this.order.id)return void(this.label.string="目标不可以是自己");var d=f.getKingdomIdByEntityName(this.order.id);if(!m.checKIsArrayContainsItem(i.name,this.gc.kingdoms.get(d).entities))return void(this.label.string="目标必须是己方实体");if(i.type==g.army)return void(this.label.string="目标不可以是队伍")}else if(this.order.orderType==y.xirao||this.order.orderType==y.lijian||this.order.orderType==y.liuyan||this.order.orderType==y.yihe){if(i.name==this.order.id)return void(this.label.string="目标不可以是自己");if(i.isInWar)return void(this.label.string="目标正在交战");var h=f.getKingdomIdByEntityName(this.order.id);if(m.checKIsArrayContainsItem(i.name,this.gc.kingdoms.get(h).entities))return void(this.label.string="目标不可以是己方实体");if(i.type==g.army)return void(this.label.string="目标不可以是队伍")}if(this.order.orderType!=y.xirao&&this.order.orderType!=y.liuyan||f.checkIsEntityBeContainedByAnyKing(i.name))if(this.order.orderType!=y.liuyan&&this.order.orderType!=y.find||i.type==g.city)if(this.order.orderType!=y.yihe||""!=f.checkIsEntityContainsKing(i.name))if(i.name!=this.order.id)if(this.order.orderType==y.maifu&&i.isBuilding())this.label.string="埋伏目标不能是建筑";else if(this.order.orderType==y.maifu&&f.checkIsEntityMine(i.name,f.getKingdomIdByEntityName(this.order.homeId)))this.label.string="埋伏目标不能是己方";else{var c=this.order.pos,p=r(e.str).position,u=m.getGirdPos(p);if(this.pos=u,Math.abs(u[0]-c[0])+Math.abs(u[1]-c[1])>50)this.label.string="路途遥远,请主公三思";else{var C=c[0],v=c[1],b=u[0],I=u[1],E=this.gc.kingdoms.get(f.getKingdomIdByEntityName(this.order.id)).index,P=this.gc.dc.bds.get(this.order.homeId).index,S=0;this.gc.dc.bds.get(e.str)&&(S=this.gc.dc.bds.get(e.str).index);var B=null;if(null!=(B=this.order.orderType==y.xirao||this.order.orderType==y.yidong||this.order.orderType==y.yihe||this.order.orderType==y.find||this.order.orderType==y.lijian||this.order.orderType==y.liuyan||this.order.orderType==y.maifu?T.getInstance().findPath(i.name+"--onSelectEntity",C,v,b,I,E,P,S,!0):T.getInstance().findPath(i.name+"--onSelectEntity",C,v,b,I,E,P,S))&&0!=B.length){if(this.order.orderType!=y.maifu)for(var k=m.prefabs.get("Quad"),A=0;A<B.length;A++){var N=B[A],K=o(k),w=s(N.dx-50,.1,50-N.dy);K.getComponent(l).materials[0].setProperty("mainColor",new a(0,0,0,1)),r("SelectPath").addChild(K),K.position=w,K.scale=s(.2,.2,.2)}this.pannel.getChildByName("Ok").active=!0,this.entity=i,this.label&&(this.label.string="目标："+i.name)}else this.label.string="道路不通,请主公三思"}}else this.label.string="目标不能是自己";else this.label.string="目标设施没有君主";else this.label.string="必须选择一个都市作为目标";else this.label.string="必须选择一个有归属的设施作为目标"},n.ok=function(){this.order.tragetId=this.entity.name,this.order.orderType!=y.maifu&&(this.order.pos=this.pos),this.log("----目标选择完毕----",this.order),r("SelectPath").removeAllChildren(),this.order.orderType==y.lijian?this.node.getComponent(I).showSelectPeopleFrame(this.order,null,null,4,1):this.order.orderType==y.yihe?(this.order.tragetPeople=f.checkIsEntityContainsKing(this.order.tragetId),this.node.getComponent(c).showSetMoneyForOrderPannel(this.order)):this.gc.cc.postOrder(this.order),this.pannel.getChildByName("Ok").active=!1,this.pannel.active=!1,p.getInstance().unSub(this.id),this.node.getComponent(b).sub(),this.node.getComponent(E).hideAllArrows()},n.showSelectEntityPannel=function(e){this.order=e,this.node.getComponent(b).unSub(),this.id=p.getInstance().sub(this.callback,u.click_entity,this),this.pannel=this.node.getChildByName("SelectEntityPannel"),this.label=this.pannel.getChildByName("Label").getComponent(d),this.label.string="",this.pannel.active=!0,this.pannel.getChildByName("Ok").active=!1,this.pannel.getChildByName("Cancel").on(h.EventType.TOUCH_END,this.cancel,this);var t=e.homeId;e.orderType==y.join&&(t=e.id),this.node.getComponent(E).showArrows(e.orderType,t,f.getKingdomIdByEntityName(e.homeId))},n.cancel=function(){this.pannel.active=!1,r("SelectPath").removeAllChildren(),p.getInstance().unSub(this.id),this.node.getComponent(b).sub(),this.node.getComponent(E).hideAllArrows()},i}(v))||P);i._RF.pop()}}}));

System.register("chunks:///_virtual/SelectOrderPannelController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UiHelper.ts","./EntityHelper.ts","./DataControler.ts","./EventBus.ts","./GameHelper.ts","./GameController.ts","./BasePannelController.ts","./SelectPeoplePannelController.ts","./SelectEntityPannelController.ts","./SelectPosPannelController.ts","./TrainArmyPannelController.ts","./EntityInfoController.ts","./LongClickComponent.ts","./OrderConfirmController.ts"],(function(n){"use strict";var t,i,e,a,o,s,l,h,r,c,d,u,y,g,m,C,p,P,f,E,k,b,O,B,v,_,w,I,N,S,j,L;return{setters:[function(n){t=n.inheritsLoose,i=n.createForOfIteratorHelperLoose},function(n){e=n.cclegacy,a=n._decorator,o=n.find,s=n.Button,l=n.Label,h=n.Color,r=n.log},function(n){c=n.UiHelper},function(n){d=n.EH},function(n){u=n.GameStatus,y=n.EntityType,g=n.OrderType,m=n.Task,C=n.TaskType,p=n.OD,P=n.ActType,f=n.Order,E=n.Act},function(n){k=n.EventBus,b=n.EventType},function(n){O=n.default},function(n){B=n.GameController},function(n){v=n.BasePannelController},function(n){_=n.SelectPeoplePannelController},function(n){w=n.SelectEntityPannelController},function(n){I=n.SelectPosPannelController},function(n){N=n.TrainArmyPannelController},function(n){S=n.EntityInfoController},function(n){j=n.LongClickComponent},function(n){L=n.OrderConfirmController}],execute:function(){var T;e._RF.push({},"9b32bJac95KYqH+XXM1EC4D","SelectOrderPannelController",void 0);var x=a.ccclass;a.property,n("SelectOrderPannelController",x("SelectOrderPannelController")(T=function(n){function e(){for(var t,i=arguments.length,e=new Array(i),a=0;a<i;a++)e[a]=arguments[a];return(t=n.call.apply(n,[this].concat(e))||this).id=null,t}t(e,n);var a=e.prototype;return a.start=function(){this.initOrderClickEvent(),this.pannel=this.node.getChildByName("EntityOrderPannel"),this.gc=B.getInstance(),this.sub()},a.sub=function(){null==this.id&&(this.id=k.getInstance().sub(this.showSelectOrderFrame,b.click_entity,this))},a.unSub=function(){this.id&&k.getInstance().unSub(this.id),this.id=null},a.onDestroy=function(){this.unSub()},a.hide=function(){this.hideFrame(o("Canvas/EntityOrderPannel"),o("Canvas/EntityOrderPannel/Pannel"))},a.showSelectOrderFrame=function(n,t){if(this.gc.gameStatus==u.stop)if(this.clickEntity=this.gc.entities.get(n.str),0!=d.checkIsEntityBeContainedByAnyKing(n.str)){this.interactAllButton();d.getKingdomIdByEntityName(this.clickEntity.name);this.checkButtonIsShow(),this.showFrame(this.pannel,this.pannel.getChildByName("Pannel"))}else this.node.getComponent(S).show(this.clickEntity)},a.checkEntityHasKing=function(n){for(var t,e=i(this.gc.kingdoms.values());!(t=e()).done;)for(var a,o=t.value,s=i(o.entities.values());!(a=s()).done;){if(n==a.value)return!0}return!1},a.checkButtonIsShow=function(){c.canEntityBuildArmy(this.clickEntity)&&(this.interactButton("ChuZheng"),this.interactButton("YunShu"),this.interactButton("ZhuZha")),this.clickEntity.isBuilding()||(this.interactButton("ZhuanYi"),this.interactButton("GongJi"),this.interactButton("CheHui")),this.interactButton("XingXi"),this.clickEntity.isInWar||(c.canEntityZhengbing(this.clickEntity)&&this.interactButton("ZhengBing"),c.canEntityXunlian(this.clickEntity)&&this.interactButton("XunLian"),c.canEntityXunshi(this.clickEntity)&&this.interactButton("XunShi"),c.canEntityKaikeng(this.clickEntity)&&this.interactButton("KaiKeng"),c.canEntityXiushan(this.clickEntity)&&this.interactButton("XiuShan"),c.canEntityMaijing(this.clickEntity)&&this.interactButton("MaiJing"),c.canEntityMaichu(this.clickEntity)&&this.interactButton("MaiChu"),c.canEntityQuanxiang(this.clickEntity)&&this.interactButton("QuanXiang"),c.canEntityXirao(this.clickEntity)&&this.interactButton("XiRao"),c.canEntityLijian(this.clickEntity)&&this.interactButton("LiJian"),c.canEntityLiuyan(this.clickEntity)&&this.interactButton("LiuYan"),c.canEntityYidong(this.clickEntity)&&this.interactButton("YiDong"),c.canEntityMaifu(this.clickEntity)&&this.interactButton("MaiFu"),c.canEntityYihe(this.clickEntity)&&this.interactButton("YiHe"),c.canEntityLiufang(this.clickEntity)&&this.interactButton("LiuFang"),c.canEntityChujue(this.clickEntity)&&this.interactButton("ChuJue"),c.canEntityJiangli(this.clickEntity)&&this.interactButton("JiangLi"),c.canEntityTansuo(this.clickEntity)&&this.interactButton("TanSuo"),c.canEntityJuewei(this.clickEntity)&&this.interactButton("JueWei"),c.canEntityCaolian(this.clickEntity)&&this.interactButton("CaoLian"))},a.checkIsTaskPost=function(n){if(this.clickEntity.type!=y.gate&&this.clickEntity.type!=y.city&&this.clickEntity.type!=y.port)return!1;for(var t,e=i(this.clickEntity.tasks.values());!(t=e()).done;){if(t.value.type==n)return!0}return!1},a.interactButton=function(n){try{var t=this.pannel.getChildByName("Pannel").getChildByName(n).getComponent(s);t.interactable=!0,t.node.getChildByName("Label")&&(t.node.getChildByName("Label").getComponent(l).color=new h(255,255,255,255))}catch(t){r(n+"-----SelectOrderPannelController---interactButton---bug-----")}},a.interactAllButton=function(){for(var n,t=this.node.getChildByName("EntityOrderPannel").getChildByName("Pannel").getComponentsInChildren(s),e=i(t);!(n=e()).done;){var a=n.value;a.interactable=!1,a.node.getChildByName("Label")&&(a.node.getChildByName("Label").getComponent(l).color=new h(255,255,255,100))}},a.postOrder=function(n,t){var i=new f;i.orderType=n,n!=g.xirao&&n!=g.yidong||(i.troops=100);var e=o(this.clickEntity.name).position;i.pos=O.getGirdPos(e),i.id=this.clickEntity.name,this.pannel.active=!1,this.clickEntity.type==y.army?(i.homeId=this.clickEntity.homeId,i.troops=this.clickEntity.troops,i.food=this.clickEntity.food,n==g.attack||n==g.join?this.node.getComponent(w).showSelectEntityPannel(i):n==g.stay&&this.node.getComponent(I).showSelectPosPannel(i)):(i.homeId=this.clickEntity.name,this.node.getComponent(_).showSelectPeopleFrame(i,null,null,0,t))},a.postTask=function(n){var t=new m;t.type=n,t.homeId=this.clickEntity.name,n==C.train?this.node.getComponent(N).showTrainArmyPannel(t):this.node.getComponent(_).showSelectPeopleFrame(null,t,null,1,1),this.pannel.active=!1},a.postAct=function(n,t){void 0===t&&(t=2);var i=new E;i.type=n,i.homeId=this.clickEntity.name,this.node.getComponent(_).showSelectPeopleFrame(null,null,i,t,1),this.pannel.active=!1},a.attack=function(n){n?this.node.getComponent(L).showOrderInfomationPannel("攻击","从本设施建立一支部队,选择相应的武将,并选择一个非己方目标作为攻击目标,注意:本设施总兵力必须大于"+p.build_army_mini_bingli+"且粮草必须大于"+p.build_army_mini_food+"才能执行此项命令"):this.postOrder(g.attack,5)},a.carry=function(n){n?this.node.getComponent(L).showOrderInfomationPannel("运输","从本设施建立一支部队,选择相应的武将,并选择一个己方目标作为目的地,注意:本设施总兵力必须大于"+p.build_army_mini_bingli+"且粮草必须大于"+p.build_army_mini_food+"才能执行此项命令"):this.postOrder(g.join,5)},a.zhuzha=function(n){n?this.node.getComponent(L).showOrderInfomationPannel("驻扎","从本设施建立一支部队,选择相应的武将,并选择一个可以抵达的空地作为目的地,注意:本设施总兵力必须大于"+p.build_army_mini_bingli+"且粮草必须大于"+p.build_army_mini_food+"才能执行此项命令"):this.postOrder(g.stay,5)},a.zengbing=function(n){n?this.node.getComponent(L).showOrderInfomationPannel("征兵","选择一个武将去招募士兵,招募多少根据本设施的兵役人数和武将的综合素质来决定,需要耗费"+p.zhengbing_money_cost+"金钱,且兵役必须大于"+p.zhengbing_mini_bingyi+",本回合结束产生效果"):this.postTask(C.zhengbing)},a.train=function(n){n?this.node.getComponent(L).showOrderInfomationPannel("训练","可以将本设施的步兵训练为特殊兵种(如骑兵,水兵,工兵),注意:所选择的武将必须达到相应兵种的指数,每训练100位士兵耗费"+p.xunlian_100_money_cost+"金,且本设施有相关资质才能执行,本回合结束产生效果"):this.postTask(C.train)},a.xunshi=function(n){n?this.node.getComponent(L).showOrderInfomationPannel("巡视","选择一个武将去城内到处巡视,可以增加民心士气,且有一定概率遇到随机事件,需要耗费"+p.xunshi_money_cost+"金,武将如果相应素质高处理得当可以有额外收益,本回合结束产生效果"):this.postTask(C.patrol)},a.buy=function(n){n?this.node.getComponent(L).showOrderInfomationPannel("买进","选择一个武将去本地的粮商买粮,买入价格多少根据此武将的内政水兵决定,手动选择耗费的金钱数,本回合结束产生效果"):this.postTask(C.buy)},a.sell=function(n){n?this.node.getComponent(L).showOrderInfomationPannel("卖出","选择一个武将去本地的粮商卖粮,卖出价格多少根据此武将的内政水兵决定,手动选择卖出的粮草数,本回合结束产生效果"):this.postTask(C.sell)},a.repair=function(n){n?this.node.getComponent(L).showOrderInfomationPannel("修缮","选定一个武将对本设施进行修缮,根据武将的综合素质来决定修缮的结果,,耗费"+p.xiushan_money_cost+"金,本回合结束产生效果"):this.postTask(C.repair)},a.kaikeng=function(n){n?this.node.getComponent(L).showOrderInfomationPannel("开垦","都市内政命令,选定一个武将对本都市开垦拓荒,根据武将的综合素质来增加本设施的收益,耗费"+p.kaikeng_money_cost+"金,本回合结束产生效果"):this.postTask(C.kaikeng)},a.xirao=function(n){n?this.node.getComponent(L).showOrderInfomationPannel("袭扰","选择一名武将从本设施出发对附近范围内的敌方设施进行袭扰破坏,可降低目标设施的耐久度,耗费"+p.xirao_money_cost+"金,且步兵必须大于"+p.xirao_mini_bubing+",随机获取金钱和粮草"):this.postOrder(g.xirao,1)},a.juewei=function(n){n?this.node.getComponent(L).showOrderInfomationPannel("爵位","对选择的目标武将加官进爵,一共有五级:[亭侯-乡侯-县侯-列侯-公],条件是只有占据洛阳的势力才能以汉献帝的名义赐爵,耗费"+p.juewei_money_cost+"金,会增加该武将的忠诚度,命令下达即可生效"):this.postAct(P.jue_wei)},a.chujue=function(n){n?this.node.getComponent(L).showOrderInfomationPannel("处决","选择本势力里的俘虏处决,常在无法劝降的俘虏,如果担心他越狱可以先下手为强把他弄死,命令下达即可生效,不耗费金钱,会丢失民心和信望"):this.postAct(P.chu_jue,3)},a.yidong=function(n){n?this.node.getComponent(L).showOrderInfomationPannel("移动","选择本设施的若干武将移动到另一个己方设施,没有任何条件,不耗费金钱"):this.postOrder(g.yidong,99)},a.maifu=function(n){n?this.node.getComponent(L).showOrderInfomationPannel("埋伏","选择本设施的一名武将带上如果士兵,秘密从本设施出发去选择好的地点设伏,遇上任何敌军产生暴击效果,然后回归,或者到达时间限制自动回归,消耗"+p.maifu_money_cost+"金,需要"+p.maifu_mini_bubing+"个步兵"):this.postOrder(g.maifu,1)},a.discover=function(n){n?this.node.getComponent(L).showOrderInfomationPannel("探索","选择一名武将从本设施出发去选定的目标设施,寻找武将人才并登用,耗费"+p.tansuo_money_cost+"金,且步兵必须大于"+p.tansuo_mini_bubing+",如果己方武将综合素质较高有较大概率登用成功"):this.postOrder(g.find,1)},a.yihe=function(n){n?this.node.getComponent(L).showOrderInfomationPannel("议和","选择一位武将从本设施出发,选择一个包含君主的设施为目标出发,到达后根据武将的综合素质有一定概率达成和平协议,和平协议的逻辑细节请阅读游戏说明,手动选择耗费金钱数"):this.postOrder(g.yihe,1)},a.jiangli=function(n){n?this.node.getComponent(L).showOrderInfomationPannel("奖励","选择本设施的一位武将给予金钱奖励,有一定概率提升忠诚度,消耗"+p.jiangli_money_cost+"金,立即生效"):this.postAct(P.jiang_shang)},a.liufang=function(n){n?this.node.getComponent(L).showOrderInfomationPannel("流放","选择本设施的一位武将流放,就是赶他走,把他炒鱿鱼,立即生效"):this.postAct(P.liu_fang)},a.lijian=function(n){n?this.node.getComponent(L).showOrderInfomationPannel("离间","选择本设施里的一位武将出发把敌方设施中的一名武将作为目标进行离间,耗费"+p.lijian_money_cost+"金,且步兵必须大于"+p.lijian_mini_bubing+",以此来降低此人的忠诚度"):this.postOrder(g.lijian,1)},a.liuyan=function(n){n?this.node.getComponent(L).showOrderInfomationPannel("流言","选择本设施里的一位武将出发把敌方设施作为目标散布流言,耗费"+p.liuyan_money_cost+"金,且步兵必须大于"+p.liuyan_mini_bubing+",以此来降低目标设施的民心和士气"):this.postOrder(g.liuyan,1)},a.quanxiang=function(n){n?this.node.getComponent(L).showOrderInfomationPannel("劝降","对本设施的俘虏劝降,成功的概率和选择的武将的综合素质挂钩,不耗费金钱,本回合结束产生效果"):this.postTask(C.quanxiang)},a.zhuanyi=function(n){n?this.node.getComponent(L).showOrderInfomationPannel("转移","部队命令,选择一个空地作为部队的新目标位置,并把部队改为转移状态"):this.postOrder(g.stay,5)},a.gongji=function(n){n?this.node.getComponent(L).showOrderInfomationPannel("攻击","部队命令,选择一个设施或队伍作为部队的新攻击目标,并把部队改为攻击状态"):this.postOrder(g.attack,5)},a.chehui=function(n){n?this.node.getComponent(L).showOrderInfomationPannel("撤回","部队命令,选择一个己方设施作为部队的返回目的地,并把部队改为撤回状态"):this.postOrder(g.join,5)},a.caolian=function(n){n?this.node.getComponent(L).showOrderInfomationPannel("操练","选择本设施的一位武将来操练三军,可以提升士气,耗费"+p.caolian_money_cost+"金,本回合结束生效"):this.postTask(C.caolian)},a.weizhi=function(n){r("未知-不做任何处理")},a.xingxi=function(n){this.node.getComponent(S).show(this.clickEntity),this.hide()},a.initOrderClickEvent=function(){o("Canvas/EntityOrderPannel/Pannel").getChildByName("ChuZheng").getComponent(j).callback=this.attack.bind(this),o("Canvas/EntityOrderPannel/Pannel").getChildByName("YunShu").getComponent(j).callback=this.carry.bind(this),o("Canvas/EntityOrderPannel/Pannel").getChildByName("ZhuZha").getComponent(j).callback=this.zhuzha.bind(this),o("Canvas/EntityOrderPannel/Pannel").getChildByName("ZhengBing").getComponent(j).callback=this.zengbing.bind(this),o("Canvas/EntityOrderPannel/Pannel").getChildByName("XunLian").getComponent(j).callback=this.train.bind(this),o("Canvas/EntityOrderPannel/Pannel").getChildByName("XunShi").getComponent(j).callback=this.xunshi.bind(this),o("Canvas/EntityOrderPannel/Pannel").getChildByName("MaiJing").getComponent(j).callback=this.buy.bind(this),o("Canvas/EntityOrderPannel/Pannel").getChildByName("MaiChu").getComponent(j).callback=this.sell.bind(this),o("Canvas/EntityOrderPannel/Pannel").getChildByName("XiuShan").getComponent(j).callback=this.repair.bind(this),o("Canvas/EntityOrderPannel/Pannel").getChildByName("KaiKeng").getComponent(j).callback=this.kaikeng.bind(this),o("Canvas/EntityOrderPannel/Pannel").getChildByName("XiRao").getComponent(j).callback=this.xirao.bind(this),o("Canvas/EntityOrderPannel/Pannel").getChildByName("JueWei").getComponent(j).callback=this.juewei.bind(this),o("Canvas/EntityOrderPannel/Pannel").getChildByName("ChuJue").getComponent(j).callback=this.chujue.bind(this),o("Canvas/EntityOrderPannel/Pannel").getChildByName("YiDong").getComponent(j).callback=this.yidong.bind(this),o("Canvas/EntityOrderPannel/Pannel").getChildByName("MaiFu").getComponent(j).callback=this.maifu.bind(this),o("Canvas/EntityOrderPannel/Pannel").getChildByName("TanSuo").getComponent(j).callback=this.discover.bind(this),o("Canvas/EntityOrderPannel/Pannel").getChildByName("YiHe").getComponent(j).callback=this.yihe.bind(this),o("Canvas/EntityOrderPannel/Pannel").getChildByName("JiangLi").getComponent(j).callback=this.jiangli.bind(this),o("Canvas/EntityOrderPannel/Pannel").getChildByName("LiuFang").getComponent(j).callback=this.liufang.bind(this),o("Canvas/EntityOrderPannel/Pannel").getChildByName("LiJian").getComponent(j).callback=this.lijian.bind(this),o("Canvas/EntityOrderPannel/Pannel").getChildByName("LiuYan").getComponent(j).callback=this.liuyan.bind(this),o("Canvas/EntityOrderPannel/Pannel").getChildByName("QuanXiang").getComponent(j).callback=this.quanxiang.bind(this),o("Canvas/EntityOrderPannel/Pannel").getChildByName("ZhuanYi").getComponent(j).callback=this.zhuanyi.bind(this),o("Canvas/EntityOrderPannel/Pannel").getChildByName("GongJi").getComponent(j).callback=this.gongji.bind(this),o("Canvas/EntityOrderPannel/Pannel").getChildByName("CheHui").getComponent(j).callback=this.chehui.bind(this),o("Canvas/EntityOrderPannel/Pannel").getChildByName("CaoLian").getComponent(j).callback=this.caolian.bind(this),o("Canvas/EntityOrderPannel/Pannel").getChildByName("WeiZhi-001").getComponent(j).callback=this.weizhi.bind(this),o("Canvas/EntityOrderPannel/Pannel").getChildByName("WeiZhi-002").getComponent(j).callback=this.weizhi.bind(this),o("Canvas/EntityOrderPannel/Pannel").getChildByName("WeiZhi-003").getComponent(j).callback=this.weizhi.bind(this),o("Canvas/EntityOrderPannel/Pannel").getChildByName("XingXi").getComponent(j).callback=this.xingxi.bind(this)},e}(v))||T);e._RF.pop()}}}));

System.register("chunks:///_virtual/SelectPeoplePannelController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SelectPosPannelController.ts","./EntityHelper.ts","./DataControler.ts","./GameHelper.ts","./BasePannelController.ts","./BuyAndSellPannelController.ts","./SelectEntityPannelController.ts","./GameController.ts","./SelectArmyPannelController.ts"],(function(e){"use strict";var t,s,n,i,a,l,o,c,h,r,p,g,d,y,m,C,u,P,k,b,f,v,B,N,S,T,w;return{setters:[function(e){t=e.inheritsLoose,s=e.createForOfIteratorHelperLoose},function(e){n=e.cclegacy,i=e._decorator,a=e.log,l=e.Button,o=e.instantiate,c=e.v3,h=e.Sprite,r=e.Label,p=e.Node,g=e.Toggle,d=e.UITransform},function(e){y=e.SelectPosPannelController},function(e){m=e.EH},function(e){C=e.TaskType,u=e.OrderType,P=e.ActType,k=e.ArmyType,b=e.DataControler,f=e.TypeGeter},function(e){v=e.default},function(e){B=e.BasePannelController},function(e){N=e.BuyAndSellPannelController},function(e){S=e.SelectEntityPannelController},function(e){T=e.GameController},function(e){w=e.SelectArmyPannelController}],execute:function(){var A;n._RF.push({},"f20fd898CZD3aAk7QWlvUUN","SelectPeoplePannelController",void 0);var I=i.ccclass;i.property,e("SelectPeoplePannelController",I("SelectPeoplePannelController")(A=function(e){function n(){for(var t,s=arguments.length,n=new Array(s),i=0;i<s;i++)n[i]=arguments[i];return(t=e.call.apply(e,[this].concat(n))||this).selectPeoples=[],t.type=0,t}t(n,e);var i=n.prototype;return i.start=function(){this.pannel=this.node.getChildByName("PeopleSelectPannel"),this.okBt=this.pannel.getChildByName("Pannel").getChildByName("Ok"),this.closeBt=this.pannel.getChildByName("Pannel").getChildByName("Close"),this.gc=T.getInstance()},i.close=function(){this.hideFrame(this.pannel,this.pannel.getChildByName("Pannel"))},i.ok=function(){if(a("--选择武将完毕--"),1==this.type){m.getKingdomIdByEntityName(this.task.homeId);switch(this.task.people=this.selectPeoples[0],this.task.type){case C.buy:case C.sell:this.node.getComponent(N).showBuyAndSellPannel(this.task),this.pannel.active=!1;break;case C.train:this.checkPeopleSkill(this.task.people,this.task.armyType)?(this.pannel.active=!1,this.gc.cc.postTask(this.task)):this.toast("所选择的武将对应兵种熟练度不够");break;case C.zhengbing:case C.repair:case C.patrol:case C.kaikeng:case C.caolian:this.gc.cc.postTask(this.task),this.pannel.active=!1;break;case C.quanxiang:this.showSelectPeopleFrame(null,this.task,null,5,1)}}else if(0==this.type)switch(this.order.peoples=this.selectPeoples,this.order.orderType){case u.attack:case u.join:case u.stay:this.node.getComponent(w).showSelectArmyPannel(this.order),this.pannel.active=!1;break;case u.xirao:case u.yidong:case u.lijian:case u.liuyan:case u.find:case u.yihe:this.node.getComponent(S).showSelectEntityPannel(this.order),this.pannel.active=!1;break;case u.maifu:this.node.getComponent(y).showSelectPosPannel(this.order),this.pannel.active=!1}else if(4==this.type)switch(this.order.tragetPeople=this.selectPeoples[0],this.order.orderType){case u.lijian:this.gc.cc.postOrder(this.order),this.pannel.active=!1}else if(5==this.type)switch(this.task.traget=this.selectPeoples[0],this.task.type){case C.quanxiang:this.gc.cc.postTask(this.task),this.pannel.active=!1}else switch(this.act.people=this.selectPeoples[0],this.act.type){case P.jiang_shang:case P.liu_fang:if(this.act.people==m.getKingdomIdByEntityName(this.act.homeId))return void this.toast("目标不可以是君主");this.gc.cc.postAction(this.act),this.pannel.active=!1;break;case P.chu_jue:case P.jue_wei:this.gc.cc.postAction(this.act),this.pannel.active=!1}},i.checkPeopleSkill=function(e,t){var s=this.gc.dc.pps.get(e),n=!1;switch(t){case k.qb:20*s.qb>30&&(n=!0);break;case k.gb:20*s.gb>30&&(n=!0);break;case k.sb:20*s.sb>30&&(n=!0);break;case k.bb:20*s.bb>30&&(n=!0)}return n},i.showSelectPeopleFrame=function(e,t,n,i,a,y){void 0===i&&(i=0),void 0===a&&(a=5),void 0===y&&(y=k.bb),this.type=i;var m="";1==this.type?(this.task=t,m=t.homeId):0==this.type?(this.order=e,m=e.homeId):4==this.type?(this.order=e,m=e.tragetId):5==this.type?(this.task=t,m=t.homeId):(this.act=n,m=n.homeId),a&&0!=a||(a=5),this.selectPeoples=[],this.okBt.getComponent(l).interactable=!1;var C=this.pannel.getChildByName("Pannel").getChildByName("ScrollView").getChildByName("Mask").getChildByName("Content");C.removeAllChildren(),this.showFrame(this.pannel,this.pannel.getChildByName("Pannel"),!0,!1);var u=v.prefabs.get("PeopleItem"),P=0,B=this.gc.entities.get(m).peoples;3!=this.type&&5!=this.type||(B=this.gc.entities.get(m).captives);for(var N,S=s(B);!(N=S()).done;){var T=N.value,w=this.gc.entities.get(m).tasks;if((!w||null==w.get(T))&&!(2==i&&this.gc.peoples.get(T).juewei>=5||4==i&&this.gc.kingdoms.get(T)||y!=k.bb&&0==this.checkPeopleSkill(T,y))){var A=o(u);A.position=P%2==0?c(0,150*Math.floor(P/2),0):c(500,150*Math.floor(P/2+1),0),P--,A.getChildByName("Head").getComponent(h).spriteFrame=b.getInstance().heads.get(T),A.getChildByName("Name").getComponent(r).string=T;var I=this.gc.peoples.get(T),j=this.gc.dc.pps.get(T),E=this.gc.year-j.age,F="统帅:"+j.ts+" 智力:"+j.zs+" 内政:"+j.nz+" 武力:"+j.wl;F+=" "+f.getArmyType(k.bb)+":"+j.bb+" "+f.getArmyType(k.sb)+":"+j.sb+" "+f.getArmyType(k.qb)+":"+j.qb+" "+f.getArmyType(k.gb)+":"+j.gb,F+=" 忠诚:"+I.loyal+" 健康:"+I.health+" 爵位:"+I.juewei+" 年龄:"+E,A.getChildByName("Info").getComponent(r).string=F,C.addChild(A),A.getChildByName("Cover").on(p.EventType.TOUCH_END,this.toggleCallback.bind(this,A.getChildByName("Toggle").getComponent(g),T,a),this)}}C.getComponent(d).height=150*-Math.floor(P/2)},i.toggleCallback=function(e,t,n){if(0!=e.interactable){e.isChecked=!e.isChecked,e.isChecked?0==v.checKIsArrayContainsItem(t,this.selectPeoples)&&this.selectPeoples.push(t):v.spliceItemFormArray(t,this.selectPeoples),a("ps",this.selectPeoples),this.selectPeoples.length>0?this.okBt.getComponent(l).interactable=!0:this.okBt.getComponent(l).interactable=!1;var i=this.node.getChildByName("PeopleSelectPannel").getChildByName("Pannel").getChildByName("ScrollView").getChildByName("Mask").getChildByName("Content");if(this.selectPeoples.length>=n)for(var o,c=s(i.children);!(o=c()).done;){var h=o.value.getChildByName("Toggle").getComponent(g);0==h.isChecked?h.interactable=!1:h.interactable=!0}else for(var r,p=s(i.children);!(r=p()).done;){r.value.getChildByName("Toggle").getComponent(g).interactable=!0}}else this.toast("超过最大数量")},n}(B))||A);n._RF.pop()}}}));

System.register("chunks:///_virtual/SelectPosPannelController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventBus.ts","./GameHelper.ts","./DataControler.ts","./EntityHelper.ts","./GameController.ts","./BasePannelController.ts","./SelectOrderPannelController.ts","./AStarRoadSeeker.ts"],(function(e){"use strict";var t,n,r,a,i,o,s,l,h,c,d,u,g,p,f,m,v,P,C,y,b;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,r=e._decorator,a=e.find,i=e.instantiate,o=e.v3,s=e.MeshRenderer,l=e.Vec4,h=e.Label,c=e.Node,d=e.Texture2D,u=e.ImageAsset},function(e){g=e.EventBus,p=e.EventType},function(e){f=e.default},function(e){m=e.OrderType},function(e){v=e.EH},function(e){P=e.GameController},function(e){C=e.BasePannelController},function(e){y=e.SelectOrderPannelController},function(e){b=e.default}],execute:function(){var S;n._RF.push({},"2d389DbUWFMUKLvkpe+51LN","SelectPosPannelController",void 0);var M=r.ccclass;r.property,e("SelectPosPannelController",M("SelectPosPannelController")(S=function(e){function n(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).pos=null,t.order=null,t}t(n,e);var r=n.prototype;return r.start=function(){this.gc=P.getInstance()},r.getGirdPos=function(e){return[Math.round(e.x)+50,50-Math.round(e.z)]},r.callback=function(e,t){if(this.pannel.getChildByName("Ok").active=!1,a("SelectPath").removeAllChildren(),"Land"==e.str){var n=e.object,r=this.getGirdPos(n);if(r[0]<0||r[0]>99||r[1]<0||r[1]>99)this.label.string="请点击界内";else{if(this.order.orderType==m.maifu){if(0!=this.gc.arr[r[0]][r[1]]&&5!=this.gc.arr[r[0]][r[1]])return void(this.label.string="请点击红色区域")}else if(0!=this.gc.arr[r[0]][r[1]]||v.checkIsPosNearBuilding(r[0],r[1]))return void(this.label.string="请点击红色区域");this.pannel.getChildByName("Ok").active=!1;var h=this.order.pos;if(Math.abs(r[0]-h[0])+Math.abs(r[1]-h[1])>50)this.label.string="路途遥远,请勿劳师远征";else{var c=h[0],d=h[1],u=r[0],g=r[1],p=v.getEntityByName(this.order.homeId),P=this.gc.kingdoms.get(v.getKingdomIdByEntityName(this.order.homeId)).index,C=this.gc.dc.bds.get(this.order.homeId).index,y=b.getInstance().findPath(this.order.homeId+"onSelectPos",c,d,u,g,P,C,0,this.order.orderType==m.maifu);if(this.log("path--",y),null!=y&&0!=y.length)if(p&&v.checkIsAnyOurGroupSameTargetPos(p,u,g))this.label.string="已经有我方或友方队伍把位置设在此地";else{for(var S=f.prefabs.get("Quad"),M=0;M<y.length;M++){var B=y[M],k=i(S),I=o(B.dx-50,.1,50-B.dy);k.getComponent(s).materials[0].setProperty("mainColor",new l(0,0,0,1)),a("SelectPath").addChild(k),k.position=I,k.scale=o(.2,.2,.2)}this.pannel.getChildByName("Ok").active=!0,this.pos=r,this.label&&(this.label.string="目标：x-"+this.pos[0]+" z-"+this.pos[1])}else this.label.string="道路不通 请主公三思"}}}else this.label.string="请点击陆地"},r.ok=function(){this.order.pos=this.pos,this.log("----目的地选择完毕----",this.order),a("SelectPath").removeAllChildren(),this.pannel.getChildByName("Ok").active=!1,this.pannel.active=!1,g.getInstance().unSub(this.id),this.node.getComponent(y).sub(),this.gc.cc.postOrder(this.order),a("SelectLand").active=!1},r.showSelectPosPannel=function(e){e.orderType==m.maifu?this.showSelectPosLand(!0):this.showSelectPosLand(),this.order=e,this.node.getComponent(y).unSub(),this.id=g.getInstance().sub(this.callback,p.click_land,this),this.pannel=this.node.getChildByName("SelectPosPannel"),this.label=this.pannel.getChildByName("Label").getComponent(h),this.label.string="",this.pannel.active=!0,this.pannel.getChildByName("Ok").active=!1,this.pannel.getChildByName("Cancel").on(c.EventType.TOUCH_END,this.cancel,this)},r.cancel=function(){this.pannel.active=!1,a("SelectPath").removeAllChildren(),g.getInstance().unSub(this.id),this.node.getComponent(y).sub(),a("SelectLand").active=!1},r.showSelectPosLand=function(e){void 0===e&&(e=!1),a("SelectLand").active=!0,e?a("SelectLand").getComponent(s).materials[0].setProperty("mainTexture",n.teamMap):a("SelectLand").getComponent(s).materials[0].setProperty("mainTexture",n.groupMap)},n.buildImageOnGameStart=function(e,t){void 0===e&&(e=!1);for(var r=new Uint8Array(16e6),a=t.arr,i=0;i<2e3;i++)for(var o=0;o<2e3;o++)e?5==a[Math.floor(i/20)][Math.floor(o/20)]||0==a[Math.floor(i/20)][Math.floor(o/20)]?(r[4*(2e3*i+o)]=255,r[4*(2e3*i+o)+1]=0,r[4*(2e3*i+o)+2]=0,r[4*(2e3*i+o)+3]=100):(r[4*(2e3*i+o)]=0,r[4*(2e3*i+o)+1]=0,r[4*(2e3*i+o)+2]=0,r[4*(2e3*i+o)+3]=0):0!=a[Math.floor(i/20)][Math.floor(o/20)]||v.checkIsPosNearBuilding(Math.floor(i/20),Math.floor(o/20))?(r[4*(2e3*i+o)]=0,r[4*(2e3*i+o)+1]=0,r[4*(2e3*i+o)+2]=0,r[4*(2e3*i+o)+3]=0):(r[4*(2e3*i+o)]=255,r[4*(2e3*i+o)+1]=0,r[4*(2e3*i+o)+2]=0,r[4*(2e3*i+o)+3]=100);var s=new d,l=new u;l.reset({_data:r,width:2e3,height:2e3,format:d.PixelFormat.RGBA8888,_compressed:!1}),s.image=l,e?n.teamMap=s:n.groupMap=s},n}(C))||S);n._RF.pop()}}}));

System.register("chunks:///_virtual/SelectSceneController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventBus.ts","./GameHelper.ts","./CunDangHelper.ts","./DataControler.ts","./EntityHelper.ts","./BasePannelController.ts"],(function(e){"use strict";var t,n,i,a,s,o,r,l,c,g,h,u,m,p,C,v,d,f,y,S,B,N,b,P,I,_,k,j,q;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,a=e.assertThisInitialized,s=e.createForOfIteratorHelperLoose},function(e){o=e.cclegacy,r=e._decorator,l=e.Asset,c=e.find,g=e.Label,h=e.Button,u=e.director,m=e.Node,p=e.RichText,C=e.Tween,v=e.v3,d=e.tween,f=e.instantiate,y=e.Sprite,S=e.Color,B=e.UITransform},function(e){N=e.EventBus},function(e){b=e.default},function(e){P=e.CunDangHelper},function(e){I=e.CunDang,_=e.DataControler,k=e.EntityType},function(e){j=e.EH},function(e){q=e.BasePannelController}],execute:function(){var D,J,T,E,w,K,L,F,H,Q,M;o._RF.push({},"8e873J/JLFLi66CloJVBlqK","SelectSceneController",void 0);var O=r.ccclass,A=r.property;e("SelectSceneController",(D=O("SelectSceneController"),J=A(l),T=A(l),E=A(l),w=A(l),D((F=t((L=function(e){function t(){for(var t,n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(t=e.call.apply(e,[this].concat(s))||this).isForCache=!1,i(t,"juqing1",F,a(t)),i(t,"juqing2",H,a(t)),i(t,"juqing3",Q,a(t)),i(t,"juqing4",M,a(t)),t.iconMap=new Map,t}n(t,e);var o=t.prototype;return o.start=function(){this.init(),this.item1=c("Canvas/JuQings/Item1/Label").getComponent(g),this.item2=c("Canvas/JuQings/Item2/Label").getComponent(g),this.item3=c("Canvas/JuQings/Item3/Label").getComponent(g),this.item4=c("Canvas/JuQings/Item4/Label").getComponent(g),this.onModeClick(null,"cache"),N.getInstance().removeAll()},o.selectCundang=function(e,n){this.log(n),this.isForCache?this.getString("cache_"+n)?(this.setString("select_scene","cache_"+n),this.startGame()):this.toast("此存档为空"):"1"==n&&this.juqing1?(t.selectJuQing=P.getInstance().makeData(this.juqing1._nativeAsset),this.showSelectKindomPannel(t.selectJuQing)):"2"==n&&this.juqing2?(t.selectJuQing=P.getInstance().makeData(this.juqing2._nativeAsset),this.showSelectKindomPannel(t.selectJuQing)):"3"==n&&this.juqing3?(t.selectJuQing=P.getInstance().makeData(this.juqing3._nativeAsset),this.showSelectKindomPannel(t.selectJuQing)):"4"==n&&this.juqing4?(t.selectJuQing=P.getInstance().makeData(this.juqing4._nativeAsset),this.showSelectKindomPannel(t.selectJuQing)):this.toast("尚未编辑此剧情")},o.onModeClick=function(e,t){if(this.isForCache="cache"==t,this.isForCache?(c("Canvas/CunDang").getComponent(h).interactable=!1,c("Canvas/JuQing").getComponent(h).interactable=!0):(c("Canvas/CunDang").getComponent(h).interactable=!0,c("Canvas/JuQing").getComponent(h).interactable=!1),this.isForCache){if(this.item1.string="存档1 空",this.item2.string="存档2 空",this.item3.string="存档3 空",this.item4.string="存档4 空",this.getString("cache_1")){var n=JSON.parse(this.getItem("cache_1"));this.item1.string="存档1: "+I.getStr(n)}if(this.getString("cache_2")){var i=JSON.parse(this.getItem("cache_2"));this.item2.string="存档2: "+I.getStr(i)}if(this.getString("cache_3")){var a=JSON.parse(this.getItem("cache_3"));this.item3.string="存档3: "+I.getStr(a)}if(this.getString("cache_4")){var s=JSON.parse(this.getItem("cache_4"));this.item4.string="存档4: "+I.getStr(s)}}else this.item1.string="剧情1 空",this.item2.string="剧情2 空",this.item3.string="剧情3 空",this.item4.string="剧情4 空",this.juqing1&&(this.item1.string="剧情1"),this.juqing2&&(this.item2.string="剧情2"),this.juqing3&&(this.item3.string="剧情3"),this.juqing4&&(this.item4.string="剧情4")},o.startGame=function(){c("Canvas/Cover").active=!0,c("Canvas/Cover/Tips").getComponent(g).string=b.getTip(),u.loadScene("GameScene")},o.init=function(){this.pannel=this.node.getChildByName("KindomSelectPannel"),this.content=c("Canvas/KindomSelectPannel/Pannel/Gray"),this.okBt=c("Canvas/KindomSelectPannel/Pannel/Ok"),this.kingLabel=c("Canvas/KindomSelectPannel/Pannel/King")},o.showSelectKindomPannel=function(e){var t=this;this.content.removeAllChildren(),this.okBt.active=!1,this.showFrame(this.pannel,this.pannel.getChildByName("Pannel")),this.kingLabel.getComponent(g).string="";var n=b.prefabs.get("MapItem"),i=_.getInstance();this.iconMap.clear();for(var a,o=s(e.kingdoms);!(a=o()).done;){var r=a.value;this.iconMap.set(r.kingId,[])}for(var l,h=function(){var a=l.value;if(a.type!=k.city)return"continue";var s=f(n);t.content.addChild(s),s.getComponent(y).color=S.WHITE,s.name=a.name;var o=v(5,5,0),r=t.getKingdomIdByCityName(a.name,e);""!=r&&(s.getComponent(y).color=i.pps.get(r).color),t.iconMap.get(r)&&t.iconMap.get(r).push(s);var c=f(n);c.name="Icon",c.parent=s,c.position=v(0,0,0);var h=c.addComponent(B);h.getComponent(y).color=new S(0,0,0,0),h.width=20,h.height=20;var u=i.bds.get(a.name);s.scale=v(3,3,3),s.position=v(8*u.pos[0],8*u.pos[1],0).add(o),c.on(m.EventType.TOUCH_END,(function(n){""!=r?j.getPeopleDataByName(r).isManzu?(t.kingLabel.getComponent(g).string="不可以选择蛮族",t.okBt.active=!1):(e.playerId=r,t.kingLabel.getComponent(g).string="选择势力:"+r,t.shakeAllIcons(r),t.selectKing=r,t.okBt.active=!0):(t.kingLabel.getComponent(g).string="请重新选择势力",t.okBt.active=!1)}),t)},u=s(i.bds.values());!(l=u()).done;)h();c("Canvas/KindomSelectPannel/Bg").on(m.EventType.TOUCH_END,(function(e){t.hideFrame(t.pannel,t.pannel.getChildByName("Pannel"))}),this)},o.ok=function(){var e=this;this.confirm("您确定要选择"+j.c2r(this.selectKing)+"来匡复汉室,一统天下?",(function(){e.setString("select_scene","juqing"),e.startGame()}))},o.confirm=function(e,t,n){var i=this;void 0===n&&(n=null);var a=this.node.getChildByName("Confirm");this.showFrame(a,a.getChildByName("Pannel")),a.getChildByName("Pannel").getChildByName("Label").getComponent(p).string=e,a.getChildByName("Pannel").getChildByName("Yes").off(m.EventType.TOUCH_END),a.getChildByName("Pannel").getChildByName("No").off(m.EventType.TOUCH_END),a.getChildByName("Pannel").getChildByName("Yes").on(m.EventType.TOUCH_END,(function(){i.hideFrame(a,a.getChildByName("Pannel")),t&&t()}),this),a.getChildByName("Pannel").getChildByName("No").on(m.EventType.TOUCH_END,(function(){i.hideFrame(a,a.getChildByName("Pannel")),n&&n()}),this)},o.shakeAllIcons=function(e){for(var t,n=s(this.iconMap.values());!(t=n()).done;)for(var i,a=t.value,o=s(a);!(i=o()).done;){var r=i.value;C.stopAllByTarget(r),r.scale=v(3,3,3)}var l=this.iconMap.get(e);if(l)for(var c,g=s(l);!(c=g()).done;){var h=c.value;d(h).to(.3,{scale:v(3.3,3.3,3.3)}).to(.2,{scale:v(3,3,3)}).union().repeatForever().start()}},o.getKingdomIdByCityName=function(e,t){for(var n,i=s(t.kingdoms);!(n=i()).done;)for(var a,o=n.value,r=s(o.entities);!(a=r()).done;){if(a.value==e)return o.kingId}return""},t}(q)).prototype,"juqing1",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=t(L.prototype,"juqing2",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=t(L.prototype,"juqing3",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=t(L.prototype,"juqing4",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=L))||K));o._RF.pop()}}}));

System.register("chunks:///_virtual/TeamController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./DataControler.ts","./EventBus.ts","./PathFindingComponent.ts","./EntityHelper.ts","./GameController.ts","./DynamicHelper.ts","./GameHelper.ts"],(function(t){"use strict";var e,i,n,s,o,a,h,g,r,y,c,d,m,u,p,l,f,I,v;return{setters:[function(t){e=t.inheritsLoose,i=t.createForOfIteratorHelperLoose},function(t){n=t.cclegacy,s=t._decorator,o=t.BoxCollider},function(t){a=t.ArmyType,h=t.DataControler,g=t.GameStatus,r=t.OrderType,y=t.EntityType,c=t.InfomationType,d=t.JueType},function(t){m=t.EventBus,u=t.EventType},function(t){p=t.default},function(t){l=t.EH},function(t){f=t.GameController},function(t){I=t.DynamicHelper},function(t){v=t.default}],execute:function(){var E;n._RF.push({},"a49f59IAm5NQKfYbSyZ1UdY","TeamController",void 0);var T=s.ccclass;s.property,t("TeamController",T("TeamController")(E=function(t){function n(){for(var e,i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))||this).updateIndex=0,e}e(n,t);var s=n.prototype;return s.onStart=function(t,e){this.goto()},s.onStop=function(t,e){this.stopGotoPos()},s.onPause=function(t,e){this.pause()},s.onRecovery=function(t,e){this.recover()},s.onMieWang=function(t,e){l.getKingdomIdByEntityName(this.entity.name)!=t.str&&""!=l.getKingdomIdByEntityName(this.entity.name)||I.deleteTeam(this.entity,this.node)},s.onChange=function(t,e){var i=t.str;i&&i==this.entity.homeId&&(this.stopGotoPos(),this.entity.isComplete=!0,this.goto())},s.start=function(){this.armyType=a.qb,this.isTeam=!0,this.gc=f.getInstance(),this.dc=h.getInstance(),this.onStartEventId=m.getInstance().sub(this.onStart,u.go,this),this.onStopEventId=m.getInstance().sub(this.onStop,u.stop,this),this.onPauseEventId=m.getInstance().sub(this.onPause,u.pause,this),this.onRecoveryEventId=m.getInstance().sub(this.onRecovery,u.recovery,this),this.onMieWangEventId=m.getInstance().sub(this.onMieWang,u.mie_wang,this),this.onChangeEventId=m.getInstance().sub(this.onChange,u.change_onwer,this)},s.onDisable=function(){this.stopGotoPos(),m.getInstance().unSub(this.onStartEventId),m.getInstance().unSub(this.onRecoveryEventId),m.getInstance().unSub(this.onPauseEventId),m.getInstance().unSub(this.onStopEventId),m.getInstance().unSub(this.onMieWangEventId),m.getInstance().unSub(this.onChangeEventId)},s.goto=function(){if(this.gc.gameStatus==g.go)if(this.entity.isComplete){if(0==l.checkIsEntityMine(this.entity.homeId,l.getKingdomIdByEntityName(this.entity.name))){var t=l.getClosestMineBuilding(this.entity);if(null==t)return void I.destroyTeam(this.entity);this.entity.homeId=t}this.entity.orderType==r.maifu?this.gotoEntityForTeam(this.gc.entities.get(this.entity.homeId),this.gc.entities.get(this.entity.homeId),this.onArrivedHome,l.getKingdomIndexByEntityName(this.entity.name)):this.gotoEntityForTeam(this.gc.entities.get(this.entity.traget),this.gc.entities.get(this.entity.homeId),this.onArrivedHome,l.getKingdomIndexByEntityName(this.entity.name))}else this.entity.orderType==r.maifu?1e3==this.entity.maifuTime&&this.gotoLand(this.gc.entities.get(this.entity.homeId),this.entity.tragetPos[0],this.entity.tragetPos[1],l.getKingdomIndexByEntityName(this.entity.name),this.onMaifu,!0):this.gotoEntityForTeam(this.gc.entities.get(this.entity.homeId),this.gc.entities.get(this.entity.traget),this.onArrivedTarget,l.getKingdomIndexByEntityName(this.entity.name))},s.onMaifu=function(){this.log("--到达埋伏地点--"),this.entity.maifuTime=999,this.node.getComponent(o)||(this.boxCollider=this.node.addComponent(o),this.boxCollider.on("onTriggerEnter",this.onTriggerEnter,this))},s.update=function(){this.updateIndex++,this.updateIndex%10==0&&this.gc.gameStatus==g.go&&this.entity.orderType==r.maifu&&this.entity.maifuTime<1e3&&(this.entity.maifuTime-=10,this.entity.maifuTime<=0&&(this.entity.maifuTime=1e3,this.onArrivedTarget()))},s.onTriggerEnter=function(t){this.log(this.entity.name+"碰到"+t.otherCollider.node.name+"--onTeamTriggerEnter");var e=t.otherCollider.node.name,i=this.gc.entities.get(e);if(i&&i.type==y.army){var n=l.getKingdomIdByEntityName(e),s=l.getKingdomIdByEntityName(this.entity.name);n&&s&&n!=s&&(this.entity.maifuTime=1e3,this.meatArmyName=e,this.onArrivedTarget(1))}},s.onArrivedTarget=function(t){var e=this;void 0===t&&(t=0),this.stopGotoPos();var n=this.gc.entities.get(this.entity.traget);this.entity.isComplete=!0;var s=[];if(this.entity.orderType==r.xirao){this.log("团队到达目的地,执行袭扰任务");var o=l.getCaptainInEntity(this.entity),a=l.getCaptainInEntity(n),h=0;if(o)h+=this.gc.dc.pps.get(o).getAverageAbility();if(a)h-=this.gc.dc.pps.get(a).getAverageAbility();var g=Math.round(v.getRandom(1,4)+h/10);g<0&&(g=0),n.food>20*g?(n.food-=20*g,this.entity.food+=20*g):(this.entity.food+=n.food,n.food=0),n.health>g?n.health-=g:n.health=0,n.bubing>20*g?n.bubing-=20*g:n.bubing=0,this.gc.cc.addLog(l.c2r(n.name)+"被袭扰,损失惨重")}else{if(this.entity.orderType==r.yidong)return this.log("团队到移动达目的地"),void I.deleteTeam(this.entity,this.node,n);if(this.entity.orderType==r.lijian){this.log("团队到达目的地,执行离间任务",this.entity);var y=this.entity.targetPeople;if(v.checKIsArrayContainsItem(y,n.peoples))this.gc.peoples.get(y).loyal-=Math.round(this.gc.dc.pps.get(this.entity.getCaptain()).zs/5),l.setRelationship(l.getKingdomIdByEntityName(this.entity.name),y,10),this.gc.cc.addLog(l.c2r(this.entity.getCaptain())+"来"+l.c2r(n.name)+"与"+l.c2r(y)+"做了密谈"),l.getKingdomIdByEntityName(this.entity.name)==this.gc.playerId&&(s.push({id:this.entity.getCaptain(),msg:l.c2r(y)+",良禽择木而栖,请三思"}),s.push({id:y,msg:l.c2r("好的,请容我三思","white")}));else l.getKingdomIdByEntityName(this.entity.name)==this.gc.playerId&&s.push({id:this.entity.getCaptain(),msg:l.c2r(y)+"不在,白跑一趟"})}else if(this.entity.orderType==r.find){this.log("团队到达目的地,执行探索任务");for(var m,u=l.getKingdomIdByEntityName(this.entity.name),p=this.gc.playerId,f=function(){var t=m.value;if(0==l.checkIsPeopleZaiye(t[0]))return"continue";var i=t[1],s=l.getRelationship(u,i.name);s||(s=0),i.now&&i.now==n.name&&(p==u?e.gc.cc.confirm("发现人才"+l.c2r(i.name)+",是否登用?",(function(){v.getRandom(0,9)>6&&s>=0?(i.loyal=80,i.juewei=d.无,e.entity.peoples.push(i.name),e.gc.cc.showInfomation("成功登用"+l.c2r(i.name),e.goto.bind(e),c.执行成功)):e.gc.cc.showInfomation("登用"+l.c2r(i.name)+"失败",e.goto.bind(e),c.执行失败)}),null,i.name):v.getRandom(0,9)>7&&s>0&&(i.loyal=80,i.juewei=d.无,e.entity.peoples.push(i.name)))},E=i(this.gc.peoples);!(m=E()).done;)f()}else if(this.entity.orderType==r.yihe){this.log("团队到达目的地,执行议和任务");var T=this.entity.targetPeople,C=this.gc.kingdoms.get(T);if(C)if(v.checKIsArrayContainsItem(T,n.peoples)){var b=l.getKingdomIdByEntityName(this.entity.name),B=this.gc.playerId;if(b!=B&&T!=B){var N=this.gc.kings.get(T);N&&N.isAcceptMengyue()&&(this.gc.cundang.treatys.set(v.getKey(T,b),36*this.gc.year+3*this.gc.month+this.gc.xun),C.money+=this.entity.food)}else if(b==B){var K=this.gc.kings.get(T);K&&K.isAcceptMengyue()&&(this.gc.cundang.treatys.set(v.getKey(T,b),36*this.gc.year+3*this.gc.month+this.gc.xun),C.money+=this.entity.food,this.gc.cc.showInfomation(l.c2r(T)+"与"+l.c2r(b)+"缔结了和平条约",this.goto.bind(this),c.武将死亡))}else T==B&&this.gc.cc.confirm(l.c2r(b)+"派遣"+l.c2r(this.entity.getCaptain())+"来求和,主公是否同意?",(function(){e.gc.cundang.treatys.set(v.getKey(T,b),36*e.gc.year+3*e.gc.month+e.gc.xun),C.money+=e.entity.food,e.goto()}))}else l.getKingdomIdByEntityName(this.entity.name)==this.gc.playerId&&s.push({id:this.entity.getCaptain(),msg:l.c2r(T)+"不在,白跑一趟"});else s.push({id:this.entity.getCaptain(),msg:l.c2r(T)+"已经灭亡了,白跑一趟"})}else if(this.entity.orderType==r.liuyan){this.log("团队到达目的地,执行流言任务");var x=l.getCaptainInEntity(this.entity),A=this.gc.dc.pps.get(x).zs,S=l.getEntityByName(this.entity.traget);A>50&&(S.mingxing-=Math.round((A-50)/10)),S.mingxing<0&&(S.mingxing=0),this.gc.cc.addLog(l.c2r(S.name)+"流言四起,现在人心惶惶")}else if(this.entity.orderType==r.maifu)if(this.boxCollider&&(this.boxCollider.enabled=!1),0==t)this.log("团队到达时间限制,准备撤离"),l.getKingdomIdByEntityName(this.entity.name)==this.gc.playerId&&s.push({id:this.entity.getCaptain(),msg:"时间到了,没有等到任何目标,撤吧"});else{this.log("团队遇到敌军,执行完埋伏任务准备撤离");var M=this.gc.dc.pps.get(this.entity.getCaptain()).zs;M+=this.gc.dc.pps.get(this.entity.getCaptain()).ts,M/=200,M*=this.getNowEntityDangerousPermeter(this.gc);var P=l.getEntityByName(this.meatArmyName),w=0;P.troops>5e4?w=Math.round(P.troops/10*M):P.troops>2e4?w=Math.round(P.troops/5*M):P.troops>5e3?w=Math.round(1500*M):P.troops>1e3&&(w=Math.round(750*M)),P.troops-=w,P.troops<150&&(P.troops=150),this.gc.ec.showCutNumber(-w,P.name);var R=!1;(l.getKingdomIdByEntityName(this.entity.name)==this.gc.playerId||l.getKingdomIdByEntityName(P.name)==this.gc.playerId)&&(R=!0),R&&w>200&&(s.push({id:this.entity.getCaptain(),msg:"哈哈,你们中埋伏啦"}),s.push({id:P.getCaptain(),msg:"损兵折将啊,可恶"}))}}this.goto(),s.length>0&&this.gc.cc.showDialogs(s)},s.onArrivedHome=function(){I.deleteTeam(this.entity,this.node,this.gc.entities.get(this.entity.homeId))},n}(p))||E);n._RF.pop()}}}));

System.register("chunks:///_virtual/TeamIconController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EntityHelper.ts","./DataControler.ts","./BasePannelController.ts","./GameController.ts","./GameHelper.ts"],(function(e){"use strict";var t,n,o,a,i,r,c,s,l,g,p,m,d,h;return{setters:[function(e){t=e.inheritsLoose,n=e.createForOfIteratorHelperLoose},function(e){o=e.cclegacy,a=e._decorator,i=e.find,r=e.Camera,c=e.instantiate,s=e.Sprite,l=e.Label},function(e){g=e.EH},function(e){p=e.DataControler},function(e){m=e.BasePannelController},function(e){d=e.GameController},function(e){h=e.default}],execute:function(){var u;o._RF.push({},"18137p961RA27TiH0ZL1yzM","TeamIconController",void 0);var f=a.ccclass;a.property,e("TeamIconController",f("TeamIconController")(u=function(e){function o(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return(t=e.call.apply(e,[this].concat(o))||this).iconMap=new Map,t.index=0,t}t(o,e);var a=o.prototype;return a.start=function(){this.camera=i("Camera").getComponent(r),this.teamIcons=this.node.getChildByName("TeamIcons"),this.gc=d.getInstance()},a.lateUpdate=function(){for(var e,t=n(this.iconMap);!(e=t()).done;){var o=e.value;this.gc.entities.get(o[0])&&(o[1].get("icon").position=this.camera.convertToUINode(o[1].get("node").position,this.teamIcons))}this.index++,this.index%50==0&&this.updateIcon()},a.addIcon=function(e,t){var n=h.prefabs.get("TeamIcon"),o=c(n);o.name="team_icon_"+e,this.teamIcons||(this.teamIcons=this.node.getChildByName("TeamIcons")),this.teamIcons.addChild(o);var a=new Map;a.set("icon",o),a.set("node",t),this.iconMap.set(e,a)},a.updateIcon=function(){for(var e,t=n(this.iconMap);!(e=t()).done;){var o=e.value;if(o[0]&&o[1]&&o[1].get("icon")){var a=o[1].get("icon"),i=a.getChildByName("KingBg").getChildByName("KingFg").getComponent(s),r=a.getChildByName("KingBg").getChildByName("KingName").getComponent(l),c=g.getKingdomIdByEntityName(o[0]);r.string="";var m=this.gc.entities.get(o[0]);c&&(i.spriteFrame=p.getInstance().heads.get(m.name),i.node.parent.getComponent(s).color=this.gc.dc.pps.get(o[0]).color),c&&this.gc.playerId}}},a.removeIcon=function(e){this.iconMap.get(e)&&(this.iconMap.get(e).get("icon").destroy(),this.iconMap.delete(e))},o}(m))||u);o._RF.pop()}}}));

System.register("chunks:///_virtual/TestScript.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseComponent.ts","./recastJsPlugin.ts"],(function(e){"use strict";var t,i,n,r,a,o,s,l,c,u,p,d,g,h,b,f;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){a=e.cclegacy,o=e._decorator,s=e.Material,l=e.Node,c=e.MeshRenderer,u=e.director,p=e.find,d=e.v3,g=e.Line,h=e.CurveRange},function(e){b=e.default},function(e){f=e.RecastJSPlugin}],execute:function(){var m,v,w,y,P,S,D,R,C;a._RF.push({},"5eb08ZdXGtDPLPDkQEL/1PC","TestScript",void 0);var M=o.ccclass,x=o.property;o.executeInEditMode,e("TestScript",(m=M("TestScript"),v=x(s),w=x(l),y=x(l),m((D=t((S=function(e){function t(){for(var t,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return t=e.call.apply(e,[this].concat(a))||this,n(t,"mt",D,r(t)),n(t,"plane",R,r(t)),n(t,"debug",C,r(t)),t}i(t,e);var a=t.prototype;return a.start=function(){this.init()},a.init=function(){var e=this,t=this.plane.getComponentsInChildren(c),i={cs:.2,ch:.2,walkableSlopeAngle:45,walkableHeight:1,walkableClimb:1,walkableRadius:1,maxEdgeLen:1,maxSimplificationError:.5,minRegionArea:2,mergeRegionArea:5,maxVertsPerPoly:3,detailSampleDist:6,detailSampleMaxError:1,tileSize:5};this.rs=new f((function(){console.log("-----------初始化寻路模块成功------------"),e.rs.createNavMesh(t,i),e.drawDebugLines(),e.crowd=e.rs.createCrowd(5,1,u.getScene());e.id=e.crowd.addAgent(p("Player").position,{radius:1,height:2,maxAcceleration:1,maxSpeed:2,collisionQueryRange:1,pathOptimizationRange:1,separationWeight:1}),e.crowd.agentGoto(e.id,p("End").position)}))},a.drawDebugMeshRenderer=function(){var e=this.rs.createDebugNavMesh(this.debug);e.getComponent(c).setMaterial(this.mt,0),e.layer=this.plane.layer,this.plane.active=!1,console.log("debugNode:",e)},a.drawDebugLines=function(){var e=this.rs.getDebugPos();if(e.length%9==0){for(var t=[],i=0;i<e.length;i+=9){var n=[],r=d(e[i],e[i+1],e[i+2]),a=d(e[i+3],e[i+4],e[i+5]),o=d(e[i+6],e[i+7],e[i+8]),s=d(e[i],e[i+1],e[i+2]);n.push(r),n.push(a),n.push(o),n.push(s),t.push(n)}for(var l=0,c=t;l<c.length;l++){var u=c[l],p=this.debug.addComponent(g),b=new h;b.mode=h.Mode.Constant,b.constant=.01,p.width=b;var f=u;p.positions=f}}else console.log("寻路模块数据异常,不是九的整数倍")},a.update=function(e){if(this.crowd){this.crowd.update(e);var t=this.crowd.getAgentPosition(this.id);p("Player").position=t}},t}(b)).prototype,"mt",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=t(S.prototype,"plane",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=t(S.prototype,"debug",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=S))||P));a._RF.pop()}}}));

System.register("chunks:///_virtual/TrainArmyPannelController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameHelper.ts","./DataControler.ts","./EntityHelper.ts","./GameController.ts","./BasePannelController.ts","./SelectPeoplePannelController.ts"],(function(t){"use strict";var e,n,i,a,s,o,l,h,r,g,m,y,C,c,u,d;return{setters:[function(t){e=t.inheritsLoose,n=t.createForOfIteratorHelperLoose},function(t){i=t.cclegacy,a=t._decorator,s=t.find,o=t.Label,l=t.Node,h=t.Toggle},function(t){r=t.default},function(t){g=t.TypeGeter,m=t.ArmyType,y=t.OD},function(t){C=t.EH},function(t){c=t.GameController},function(t){u=t.BasePannelController},function(t){d=t.SelectPeoplePannelController}],execute:function(){var p;i._RF.push({},"8912bcg9PBJyYlAycwLwv0w","TrainArmyPannelController",void 0);var b=a.ccclass;a.property,t("TrainArmyPannelController",b("TrainArmyPannelController")(p=function(t){function i(){for(var e,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))||this).armyType=m.bb,e.armyCount=0,e.task=null,e.maxBubingCount=0,e.maxMoney=0,e.hasRight=!1,e.isForSelectMoney=!1,e}e(i,t);var a=i.prototype;return a.start=function(){var t=this;s("Canvas/TrainArmyPannel/Pannel/ToggleGroup/Label2").getComponent(o).string=g.getArmyType(m.qb),s("Canvas/TrainArmyPannel/Pannel/ToggleGroup/Label3").getComponent(o).string=g.getArmyType(m.sb),s("Canvas/TrainArmyPannel/Pannel/ToggleGroup/Label4").getComponent(o).string=g.getArmyType(m.gb),this.pannel=this.node.getChildByName("TrainArmyPannel"),this.toggleContainer=this.node.getChildByName("TrainArmyPannel").getChildByName("Pannel").getChildByName("ToggleGroup"),this.gc=c.getInstance(),this.pannel.getChildByName("Pannel").getChildByName("Cancel").on(l.EventType.TOUCH_END,(function(){t.hideFrame(t.pannel,t.pannel.getChildByName("Pannel"))}),this)},a.isEntityHasPeopleCanTrain=function(t,e){if(e==m.gb){if(r.checKIsArrayContainsItem(t.name,this.gc.dc.gongbingBuildings))for(var i,a=n(t.peoples);!(i=a()).done;){var s=i.value;if(20*this.gc.dc.pps.get(s).gb>30)return!0}}else if(e==m.qb){if(r.checKIsArrayContainsItem(t.name,this.gc.dc.qibingBuildings))for(var o,l=n(t.peoples);!(o=l()).done;){var h=o.value;if(20*this.gc.dc.pps.get(h).qb>30)return!0}}else if(e==m.sb&&r.checKIsArrayContainsItem(t.name,this.gc.dc.shuibingBuildings))for(var g,y=n(t.peoples);!(g=y()).done;){var C=g.value;if(20*this.gc.dc.pps.get(C).sb>30)return!0}return!1},a.showTrainArmyPannel=function(t){this.isForSelectMoney=!1,this.task=t,this.armyType=m.bb,this.armyCount=0,this.maxMoney=this.gc.kingdoms.get(C.getKingdomIdByEntityName(t.homeId)).money;var e=this.gc.entities.get(this.task.homeId);this.maxBubingCount=e.bubing,this.showFrame(this.pannel,this.pannel.getChildByName("Pannel")),this.label=this.pannel.getChildByName("Pannel").getChildByName("Numbers").getChildByName("Label").getComponent(o),this.label.string="人数："+this.armyCount,this.pannel.getChildByName("Pannel").getChildByName("Numbers").active=!0;var n=this.toggleContainer.getChildByName("Toggle2"),i=this.toggleContainer.getChildByName("Toggle3"),a=this.toggleContainer.getChildByName("Toggle4");n.active=!1,i.active=!1,a.active=!1,n.getComponent(h).isChecked=!1,i.getComponent(h).isChecked=!1,a.getComponent(h).isChecked=!1,n.off("toggle"),i.off("toggle"),a.off("toggle"),this.isEntityHasPeopleCanTrain(e,m.gb)&&(a.active=!0,a.on("toggle",this.toggleCallback.bind(this,m.gb),this),a.getComponent(h).isChecked=!0),this.isEntityHasPeopleCanTrain(e,m.qb)&&(n.active=!0,n.on("toggle",this.toggleCallback.bind(this,m.qb),this),n.getComponent(h).isChecked=!0),this.isEntityHasPeopleCanTrain(e,m.sb)&&(i.active=!0,i.on("toggle",this.toggleCallback.bind(this,m.sb),this),i.getComponent(h).isChecked=!0),this.toggleContainer.getChildByName("Label2").active=!0,this.toggleContainer.getChildByName("Label3").active=!0,this.toggleContainer.getChildByName("Label4").active=!0},a.showSetMoneyPannel=function(t){this.isForSelectMoney=!0,this.task=t,this.armyCount=0;var e=this.gc.kingdoms.get(C.getKingdomIdByEntityName(t.homeId)).money;this.maxMoney=e;this.gc.entities.get(this.task.homeId);this.showFrame(this.pannel,this.pannel.getChildByName("Pannel"),!0,!1),this.label=this.pannel.getChildByName("Pannel").getChildByName("Numbers").getChildByName("Label").getComponent(o),this.label.string="金钱："+this.armyCount,this.pannel.getChildByName("Pannel").getChildByName("Numbers").active=!0;var n=this.toggleContainer.getChildByName("Toggle2"),i=this.toggleContainer.getChildByName("Toggle3"),a=this.toggleContainer.getChildByName("Toggle4");n.active=!1,i.active=!1,a.active=!1,this.toggleContainer.getChildByName("Label2").active=!1,this.toggleContainer.getChildByName("Label3").active=!1,this.toggleContainer.getChildByName("Label4").active=!1},a.toggleCallback=function(t){this.hasRight=!1,(t==m.qb&&r.checKIsArrayContainsItem(this.task.homeId,this.gc.dc.qibingBuildings)||t==m.sb&&r.checKIsArrayContainsItem(this.task.homeId,this.gc.dc.shuibingBuildings)||t==m.gb&&r.checKIsArrayContainsItem(this.task.homeId,this.gc.dc.gongbingBuildings))&&(this.hasRight=!0),this.hasRight?this.armyType=t:this.armyType=m.bb},a.ok=function(){if(this.isForSelectMoney){if(this.armyCount>this.maxMoney)return void this.toast("金钱不够");this.task.num=this.armyCount,this.pannel.active=!1,this.gc.postTask(this.task)}else{if(this.armyCount>1e3)return void this.toast("一次只能训练一千人以内");if(this.armyCount<100)return void this.toast("人数必须超过一百");if((Math.floor(this.armyCount/100)+1)*y.xunlian_100_money_cost>this.maxMoney)return void this.toast("金钱不够,每次要消耗50金");this.task.num=this.armyCount,this.task.armyType=this.armyType,this.pannel.active=!1,this.getComponent(d).showSelectPeopleFrame(null,this.task,null,1,1,this.armyType)}},a.add=function(){this.isForSelectMoney?(this.armyCount<this.maxMoney-100?this.armyCount+=100:this.armyCount=this.maxMoney,this.label.string="金钱："+this.armyCount):(this.armyCount<this.maxBubingCount-100?this.armyCount+=100:this.armyCount=this.maxBubingCount,this.label.string="人数："+this.armyCount)},a.cut=function(){this.isForSelectMoney?(this.armyCount>100?this.armyCount-=100:this.armyCount=0,this.label.string="金钱："+this.armyCount):(this.armyCount>100?this.armyCount-=100:this.armyCount=0,this.label.string="人数："+this.armyCount)},i}(u))||p);i._RF.pop()}}}));

System.register("chunks:///_virtual/UiHelper.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EntityHelper.ts","./DataControler.ts","./GameHelper.ts","./GameController.ts","./TrainArmyPannelController.ts"],(function(e){"use strict";var t,n,i,s,a,o,r,g,c,y,u,m,l,p,d,h;return{setters:[function(e){t=e.createForOfIteratorHelperLoose},function(e){n=e.cclegacy,i=e._decorator,s=e.find},function(e){a=e.EH},function(e){o=e.TypeGeter,r=e.OrderType,g=e.OD,c=e.TaskType,y=e.ActType,u=e.EntityType,m=e.JueType,l=e.ArmyType},function(e){p=e.default},function(e){d=e.GameController},function(e){h=e.TrainArmyPannelController}],execute:function(){var k;n._RF.push({},"b1160y0tG5F8ZJ7DI9JWrQj","UiHelper",void 0);var b=i.ccclass;i.property,e("UiHelper",b("UiHelper")(k=function(){function e(){}return e.getOrderDetailStr=function(e){var t=new Map;switch(t.set("name",o.getOrderType(e.orderType)),e.orderType){case r.attack:case r.join:t.set("目标",e.tragetId),t.set("兵力",e.troops+""),t.set("粮草",e.food+"石"),t.set("兵种",o.getArmyType(e.armyType));break;case r.stay:t.set("位置",e.pos[0]+"-"+e.pos[1]),t.set("兵力",e.troops+""),t.set("粮草",e.food+"石"),t.set("兵种",o.getArmyType(e.armyType));break;case r.yidong:t.set("目的地",e.tragetId),t.set("出发地",e.homeId);break;case r.liuyan:case r.xirao:t.set("目的地",e.tragetId),t.set("消耗",g.xirao_money_cost+"金"),""!=a.getKingdomIdByEntityName(e.tragetId)&&t.set("势力",a.getKingdomIdByEntityName(e.tragetId));break;case r.find:t.set("目的地",e.tragetId),t.set("消耗",g.tansuo_money_cost+"金");break;case r.yihe:t.set("目的地",e.tragetId),t.set("消耗",e.food+"金"),""!=a.getKingdomIdByEntityName(e.tragetId)&&t.set("势力",a.getKingdomIdByEntityName(e.tragetId));break;case r.maifu:t.set("人数",g.maifu_mini_bubing+""),t.set("时间","20天"),t.set("消耗",g.maifu_money_cost+"金");break;case r.lijian:t.set("目标武将",e.tragetPeople),t.set("目的地",e.tragetId),t.set("消耗",g.lijian_money_cost+"金")}return t},e.getNumberByTask=function(e){var t=d.getInstance(),n=a.getEntityByName(e.homeId),i=0,s=t.dc.pps.get(e.people).getAverageAbility();if(e.type==c.buy)i=Math.round(e.num*(p.getRandom(80,100)+t.dc.pps.get(e.people).nz)/20);else if(e.type==c.caolian)i=p.getRandom(3,4)+Math.round(t.dc.pps.get(e.people).ts/20);else if(e.type==c.kaikeng)i=p.getRandom(3,4)+Math.round(t.dc.pps.get(e.people).nz/20);else if(e.type==c.patrol)i=p.getRandom(3,4)+Math.round(s/20);else if(e.type==c.quanxiang)i=p.getRandom(3,4)+Math.round(s/20);else if(e.type==c.repair)i=p.getRandom(3,4)+Math.round(s/20);else if(e.type==c.sell){var o=(p.getRandom(80,100)+t.dc.pps.get(e.people).nz)/2e3;i=Math.round(e.num*o)}else e.type==c.zhengbing&&(i=p.getRandom(10,20)*t.dc.pps.get(e.people).nz)>n.bingyi&&(i=n.bingyi);return i},e.getTaskDetailStr=function(t){var n=new Map;switch(n.set("name",o.getTaskType(t.type)),t.type){case c.buy:n.set("实体",t.homeId),n.set("消耗",t.num+"金"),n.set("预期","粮草+"+this.getNumberByTask(t)+"石");break;case c.caolian:n.set("实体",t.homeId),n.set("消耗",g.caolian_money_cost+"金"),n.set("预期","士气+"+this.getNumberByTask(t));break;case c.kaikeng:n.set("实体",t.homeId),n.set("消耗",g.kaikeng_money_cost+"金"),n.set("预期","收益+"+this.getNumberByTask(t));break;case c.patrol:n.set("实体",t.homeId),n.set("消耗",g.xunshi_money_cost+"金"),n.set("预期","民心+"+this.getNumberByTask(t));break;case c.repair:n.set("实体",t.homeId),n.set("消耗",g.xiushan_money_cost+"金"),n.set("预期","耐久+"+this.getNumberByTask(t));break;case c.zhengbing:n.set("实体",t.homeId),n.set("消耗",g.zhengbing_money_cost+"金"),n.set("预期","步兵+"+e.getNumberByTask(t));break;case c.sell:n.set("实体",t.homeId),n.set("消耗",t.num+"石"),n.set("预期","金钱+"+this.getNumberByTask(t));break;case c.quanxiang:n.set("实体",t.homeId),n.set("目标",t.traget),n.set("胜算",this.getNumberByTask(t)+"成");break;case c.train:n.set("实体",t.homeId),n.set("兵种",o.getArmyType(t.armyType)),n.set("数量",t.num+"")}return n},e.getActDetailStr=function(e){var t=new Map;switch(t.set("name",o.getActType(e.type)),e.type){case y.chu_jue:t.set("目标俘虏",e.people),t.set("民心","-10"),t.set("信望","-10");break;case y.jiang_shang:t.set("目标武将",e.people),t.set("消耗","100金"),t.set("预期效果","忠诚+10");break;case y.jue_wei:t.set("目标武将",e.people),t.set("预期效果","忠诚+20"),t.set("消耗","每旬5金");break;case y.liu_fang:t.set("目标武将",e.people),t.set("影响","民心-5"),t.set("影响","信望-5")}return t},e.checkIsTaskPost=function(e,n){if(e.type!=u.gate&&e.type!=u.city&&e.type!=u.port)return!1;for(var i,s=t(e.tasks.values());!(i=s()).done;){if(i.value.type==n)return!0}return!1},e.checkIsEntityHasPeopleToJingJue=function(e){for(var n,i=d.getInstance(),s=t(e.peoples);!(n=s()).done;){var a=n.value,o=i.peoples.get(a);if(o&&o.juewei<m.公)return!0}return!1},e.checkIsEntityHasRightToBuyOrSell=function(e){var t=d.getInstance();if(0==e.isBuilding())return!1;var n=t.dc.bds.get(e.name);return!!n&&!(0==e.hasBusiness&&n.size<3)},e.canEntityBuildArmy=function(e){var t=e.getBili(),n=e.food;return!!(e.peoples.length-e.tasks.size>0&&t>g.build_army_mini_bingli&&n>g.build_army_mini_food&&e.isBuilding())},e.canEntityZhengbing=function(e){var t=d.getInstance().kingdoms.get(a.getKingdomIdByEntityName(e.name)).money,n=e.peoples.length-e.tasks.size,i=e.bingyi;return n>0&&e.type==u.city&&i>g.zhengbing_mini_bingyi&&t>g.zhengbing_money_cost&&0==this.checkIsTaskPost(e,c.zhengbing)},e.canEntityXunlian=function(e){if(e.peoples.length-e.tasks.size>0&&e.type==u.city&&e.bubing>g.xunlian_mini_bubing&&0==this.checkIsTaskPost(e,c.train)&&a.checkIsEntityCanTrain(e.name)){var t=s("Canvas").getComponent(h);if(t&&t.isEntityHasPeopleCanTrain(e,l.gb)&&t.isEntityHasPeopleCanTrain(e,l.qb)&&t.isEntityHasPeopleCanTrain(e,l.sb))return!0}return!1},e.canEntityXunshi=function(e){var t=d.getInstance().kingdoms.get(a.getKingdomIdByEntityName(e.name)).money;return e.peoples.length-e.tasks.size>0&&e.type==u.city&&t>g.xunshi_money_cost&&0==this.checkIsTaskPost(e,c.patrol)},e.canEntityKaikeng=function(e){var t=d.getInstance(),n=t.kingdoms.get(a.getKingdomIdByEntityName(e.name)),i=t.month,s=n.money,o=e.peoples.length-e.tasks.size,r=t.dc.bds.get(e.name);return o>0&&e.type==u.city&&s>g.kaikeng_money_cost&&0==r.isManzu&&0==this.checkIsTaskPost(e,c.kaikeng)&&i>=9&&i<=12},e.canEntityXiushan=function(e){var t=d.getInstance().kingdoms.get(a.getKingdomIdByEntityName(e.name)).money;return!!(e.peoples.length-e.tasks.size>0&&e.isBuilding()&&t>g.xiushan_money_cost&&0==this.checkIsTaskPost(e,c.repair))},e.canEntityMaijing=function(e){var t=d.getInstance().kingdoms.get(a.getKingdomIdByEntityName(e.name)).money;return!!(e.peoples.length-e.tasks.size>0&&t>0&&this.checkIsEntityHasRightToBuyOrSell(e)&&0==this.checkIsTaskPost(e,c.buy))},e.canEntityMaichu=function(e){return!!(e.peoples.length-e.tasks.size>0&&e.food>0&&e.type==u.city&&this.checkIsEntityHasRightToBuyOrSell(e)&&0==this.checkIsTaskPost(e,c.sell))},e.canEntityQuanxiang=function(e){var t=e.peoples.length-e.tasks.size,n=e.captives.length;return!!(t>0&&e.isBuilding()&&n>0&&0==this.checkIsTaskPost(e,c.quanxiang))},e.canEntityXirao=function(e){var t=d.getInstance(),n=e.bubing,i=t.kingdoms.get(a.getKingdomIdByEntityName(e.name)).money;return!!(e.peoples.length-e.tasks.size>0&&e.isBuilding()&&i>g.xirao_money_cost&&n>g.xirao_mini_bubing)},e.canEntityLijian=function(e){var t=d.getInstance(),n=e.bubing,i=t.kingdoms.get(a.getKingdomIdByEntityName(e.name)).money;return!!(e.peoples.length-e.tasks.size>0&&e.isBuilding()&&i>g.lijian_money_cost&&n>g.lijian_mini_bubing)},e.canEntityLiuyan=function(e){var t=d.getInstance(),n=e.bubing,i=t.kingdoms.get(a.getKingdomIdByEntityName(e.name)).money;return!!(e.peoples.length-e.tasks.size>0&&e.isBuilding()&&i>g.liuyan_money_cost&&n>g.liuyan_mini_bubing)},e.canEntityYidong=function(e){return!!(e.peoples.length-e.tasks.size>0&&e.isBuilding())},e.canEntityMaifu=function(e){var t=d.getInstance(),n=e.bubing,i=t.kingdoms.get(a.getKingdomIdByEntityName(e.name)).money;return!!(e.peoples.length-e.tasks.size>0&&e.isBuilding()&&i>g.maifu_money_cost&&n>g.maifu_mini_bubing)},e.canEntityYihe=function(e){var t=e.bubing;return!!(e.peoples.length-e.tasks.size>0&&e.isBuilding()&&t>g.yihe_mini_bubing)},e.canEntityLiufang=function(e){return!!(e.peoples.length-e.tasks.size>0&&e.isBuilding())},e.canEntityChujue=function(e){return!!(e.captives.length>0&&e.isBuilding())},e.canEntityJiangli=function(e){var t=d.getInstance().kingdoms.get(a.getKingdomIdByEntityName(e.name)).money;return!!(e.peoples.length-e.tasks.size>0&&e.isBuilding()&&t>g.jiangli_money_cost)},e.canEntityTansuo=function(e){var t=d.getInstance(),n=e.bubing,i=t.kingdoms.get(a.getKingdomIdByEntityName(e.name)).money;return!!(e.peoples.length-e.tasks.size>0&&e.isBuilding()&&i>g.tansuo_money_cost&&n>g.tansuo_mini_bubing)},e.canEntityJuewei=function(e){var t=d.getInstance(),n=t.kingdoms.get(a.getKingdomIdByEntityName(e.name)),i=n.money,s=e.peoples.length-e.tasks.size,o=p.checKIsArrayContainsItem("洛阳",n.entities);return!!(s>0&&this.checkIsEntityHasPeopleToJingJue(e)&&o&&t.hasHanXianDi&&e.type==u.city&&i>g.juewei_money_cost)},e.canEntityCaolian=function(e){var t=d.getInstance().kingdoms.get(a.getKingdomIdByEntityName(e.name)).money;return!!(e.peoples.length-e.tasks.size>0&&e.isBuilding()&&t>g.caolian_money_cost&&0==this.checkIsTaskPost(e,c.caolian))},e}())||k);n._RF.pop()}}}));

System.register("chunks:///_virtual/UpdateEventHelper.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameValueHelper.ts","./GameController.ts","./EventBus.ts","./GameHelper.ts","./BetrayHelper.ts","./DataControler.ts","./EntityHelper.ts","./BuildingController.ts"],(function(e){"use strict";var t,n,i,o,a,s,r,c,g,l,d,u,h,m,v;return{setters:[function(e){t=e.createForOfIteratorHelperLoose},function(e){n=e.cclegacy,i=e._decorator,o=e.find,a=e.director},function(e){s=e.GameValueHelper},function(e){r=e.GameController},function(e){c=e.EventBus},function(e){g=e.default},function(e){l=e.BetrayHelper},function(e){d=e.EntityType,u=e.InfomationType,h=e.OrderType},function(e){m=e.EH},function(e){v=e.BuildingController}],execute:function(){var p;n._RF.push({},"f1534z107RG5rGV8RV1Onco","UpdateEventHelper",void 0);var y=i.ccclass;i.property,e("UpdateEventHelper",y("UpdateEventHelper")(p=function(){function e(){}return e.update=function(){if(this.gc=r.getInstance(),9==this.gc.month&&1==this.gc.xun&&s.addAllEntityFood(),3==this.gc.month&&1==this.gc.xun&&s.addAllEntityBingyi(),(1==this.gc.month||4==this.gc.month||7==this.gc.month||10==this.gc.month)&&1==this.gc.xun){s.addAllKindomMoney(),l.updateDead();for(var e,n=t(this.gc.entities.values());!(e=n()).done;){var i=e.value;if(""!=m.getKingdomIdByEntityName(i.name))for(var h,p=t(i.peoples);!(h=p()).done;)for(var y,f=h.value,C=t(i.peoples);!(y=C()).done;){var I=y.value;if(f!=I){var B=this.gc.dc.pps.get(f).xg,w=this.gc.dc.pps.get(I).xg,E=m.getRelationship(f,I);E||(E=0);var H=E;1==B&&1==w?E+=-2:1==B&&2==w||1==B&&3==w?E+=1:1==B&&4==w?E+=-1:2==B&&2==w||2==B&&3==w?E+=1:2==B&&4==w?E+=0:3==B&&3==w?E+=1:3==B&&4==w?E+=0:4==B&&4==w&&(E+=-1),0!=E&&E!=H&&m.setRelationship(f,I,E)}}}}1==this.gc.xun&&s.cutAllEntitySalary();for(var x,k=t(this.gc.peoples);!(x=k()).done;){var K=x.value;if(0!=m.checkIsPeopleZaiye(K[0])){var R=K[1],S=this.gc.dc.pps.get(R.name);if(R.now&&o(R.now))if(S.home&&o(S.home)){if(R.now==S.home)continue;this.getMyHomeDirectCity(R)&&(R.now=this.getMyHomeDirectCity(R).name)}else if(this.getMyKingDirectCity(R)){var D=this.getMyKingDirectCity(R);if(R.now==D.name)continue;R.now=D.name}else{var M=this.getCloseCity(R.now,g.getRandom(0,9)>5,g.getRandom(0,9)>5);M&&(R.now=M.name)}else for(var z,G=g.getRandom(0,80),T=0,A=t(this.gc.entities);!(z=A()).done;){var N=z.value;if(G==T&&N[1].type==d.city){R.now=N[0];break}T++}}}for(var F,P=t(this.gc.entities.values());!(F=P()).done;){var U=F.value;if(0!=U.isBuilding())if(U.isInWar)U.hasBusiness=!1;else{var V=this.gc.kingdoms.get(m.getKingdomIdByEntityName(U.name)),_=this.gc.dc.bds.get(U.name);V&&(_.size>1||V.credit>80&&g.getRandom(0,99)>20||V.credit>70&&g.getRandom(0,99)>50||V.credit>60&&g.getRandom(0,99)>80)?U.hasBusiness=!0:U.hasBusiness=!1}}for(var b,L=t(this.gc.entities.values());!(b=L()).done;){var O=b.value;if(O.type==d.city){var j=o(O.name);j&&j.getComponent(v)&&j.getComponent(v).render()}}for(var W,Z=!0,q=!0,J=t(this.gc.kingdoms.values());!(W=J()).done;){var Q=W.value;Q.kingId!=this.gc.playerId&&(Z=!1),Q.kingId==this.gc.playerId&&(q=!1)}Z?this.gc.cc.addInfomationsToStack("经过多年征战,"+this.gc.playerId+"让天下重新归于一统",(function(){c.getInstance().removeAll(),a.loadScene("SelectScene")}),u.势力建立):q&&this.gc.cc.addInfomationsToStack("看来一切都是徒劳,"+this.gc.playerId+"未能完成统一大业",(function(){c.getInstance().removeAll(),a.loadScene("SelectScene")}),u.势力灭亡)},e.weiyue=function(){this.gc=r.getInstance();for(var e,n=t(this.gc.entities.values());!(e=n()).done;){var i=e.value;if(!i.isBuilding()){var o=m.getKingdomIdByEntityName(i.name);if(i.orderType==h.attack&&i.traget){var a=this.gc.entities.get(i.traget);if(a){var s=m.getKingdomIdByEntityName(a.name);if(s&&this.gc.cundang.treatys.has(g.getKey(o,s))){var c=this.gc.cundang.treatys.get(g.getKey(o,s));36*this.gc.year+3*this.gc.month+this.gc.xun-c<36&&(this.gc.kingdoms.get(o).credit-=100,this.gc.cundang.treatys.delete(g.getKey(o,s)),this.gc.cc.addInfomationsToStack(o+"破坏了与"+s+"缔结的和平条约",null,u.执行失败))}}}}}},e.getMyKingDirectCity=function(e){var t=null,n=m.getMyLovelyKing(e.name);if(n&&o(e.now)){var i=m.getEntityByPeopleName(n);if(i&&o(i.name)){var a=o(e.now).position.x>o(i.name).position.x,s=o(e.now).position.z>o(i.name).position.z;t=this.getCloseCity(e.now,a,s)}}return t},e.getMyHomeDirectCity=function(e){var t=null;if(o(e.now)){var n=m.getEntityByPeopleName(this.gc.dc.pps.get(e.name).home);if(n&&o(n.name)){var i=o(e.now).position.x>o(n.name).position.x,a=o(e.now).position.z>o(n.name).position.z;t=this.getCloseCity(e.now,i,a)}}return t},e.getCloseCity=function(e,n,i){for(var a,s=o(e).position,r=1e6,c=null,l=t(this.gc.entities.values());!(a=l()).done;){var u=a.value;if(u.type==d.city){var h=o(u.name).position;if(n!=h.x>s.x&&i!=h.z>s.z){var m=g.getDistance(s,h);m<r&&(c=u,r=m)}}}return c},e}())||p);n._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});